"use strict";(self.webpackChunkspotifyApp=self.webpackChunkspotifyApp||[]).push([[179],{2011:(mt,Te,k)=>{k.d(Te,{Dh:()=>Re,GT:()=>ge,cc:()=>ke,on:()=>Pe,pX:()=>ne,xv:()=>Ee});var h=k(4650),V=k(9260);mt=k.hmd(mt);const O=["ngOnDestroy"],ne=(X,Me,_e,Fe={})=>new Proxy(X,{get:(me,le)=>_e.runOutsideAngular(()=>{var ve;if(X[le])return!(null===(ve=Fe?.spy)||void 0===ve)&&ve.get&&Fe.spy.get(le,X[le]),X[le];if(O.indexOf(le)>-1)return()=>{};const Oe=Me.toPromise().then(Ne=>{const Y=Ne&&Ne[le];return"function"==typeof Y?Y.bind(Ne):Y&&Y.then?Y.then(Ze=>_e.run(()=>Ze)):_e.run(()=>Y)});return new Proxy(()=>{},{get:(Ne,Y)=>Oe[Y],apply:(Ne,Y,Ze)=>Oe.then(_t=>{var Ge;const $t=_t&&_t(...Ze);return!(null===(Ge=Fe?.spy)||void 0===Ge)&&Ge.apply&&Fe.spy.apply(le,Ze,$t),$t})})})}),ge=(X,Me)=>{Me.forEach(_e=>{Object.getOwnPropertyNames(_e.prototype||_e).forEach(Fe=>{Object.defineProperty(X.prototype,Fe,Object.getOwnPropertyDescriptor(_e.prototype||_e,Fe))})})};class ae{constructor(Me){return Me}}const Re=new h.OlP("angularfire2.app.options"),Ee=new h.OlP("angularfire2.app.name");function Pe(X,Me,_e){const me="object"==typeof _e&&_e||{};me.name=me.name||"string"==typeof _e&&_e||"[DEFAULT]";const ve=V.Z.apps.filter(Oe=>Oe&&Oe.name===me.name)[0]||Me.runOutsideAngular(()=>V.Z.initializeApp(X,me));try{JSON.stringify(X)!==JSON.stringify(ve.options)&&H("error",`${ve.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(ve)}const H=(X,...Me)=>{(0,h.X6Q)()&&typeof console<"u"&&console[X](...Me)};function ke(X,Me,_e,Fe,me){const[,le,ve]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===X)||[];if(le)return function Ae(X,Me){try{return X.toString()===Me.toString()}catch{return X===Me}}(me,ve)||(Ke("error",`${Me} was already initialized on the ${_e} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:me,was:ve})),le;{const Oe=Fe();return globalThis.\u0275AngularfireInstanceCache.push([X,Oe,me]),Oe}}const qe=!!mt.hot,Ke=(X,...Me)=>{(0,h.X6Q)()&&typeof console<"u"&&console[X](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1389:(mt,Te,k)=>{k.d(Te,{$:()=>Dt,A:()=>$,D:()=>Ae,I:()=>pn,J:()=>ci,L:()=>ji,N:()=>ui,P:()=>Ti,Q:()=>Ph,R:()=>Xu,U:()=>j0,V:()=>Nh,W:()=>Oh,X:()=>Hi,Y:()=>Lu,Z:()=>Fh,_:()=>Lh,a:()=>Br,a0:()=>H0,a1:()=>Uh,a2:()=>Jg,a3:()=>Xg,a4:()=>zi,a5:()=>jh,a6:()=>zh,a7:()=>Tr,a8:()=>Po,a9:()=>_s,aA:()=>Y,aB:()=>ff,aC:()=>jn,aD:()=>Kr,aE:()=>ro,aF:()=>zo,aG:()=>Ho,aH:()=>Xt,aL:()=>ws,aO:()=>Ws,aa:()=>Gh,ab:()=>z0,ac:()=>G0,ad:()=>Wh,ae:()=>em,af:()=>tm,ai:()=>Zh,aj:()=>W0,ak:()=>Sr,an:()=>Qg,ao:()=>Nl,aq:()=>kl,ar:()=>Ba,as:()=>_t,at:()=>pt,au:()=>ue,av:()=>me,aw:()=>Yo,ax:()=>or,ay:()=>Pt,az:()=>le,b:()=>Zu,c:()=>ql,d:()=>no,e:()=>tc,f:()=>rc,g:()=>sc,h:()=>ic,i:()=>jl,j:()=>ym,k:()=>Ds,l:()=>Gl,m:()=>rd,o:()=>lc,p:()=>Ee,r:()=>tw,s:()=>Bo,u:()=>di});var h=k(5861),V=k(2090),O=k(6881),ne=k(7582),ge=k(1877),ae=k(4859);const Ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new ge.Yd("@firebase/auth");function Fe(v,...f){Me.logLevel<=ge.in.ERROR&&Me.error(`Auth (${O.SDK_VERSION}): ${v}`,...f)}function me(v,...f){throw Ne(v,...f)}function le(v,...f){return Ne(v,...f)}function ve(v,f,m){const w=Object.assign(Object.assign({},qe()),{[f]:m});return new V.LL("auth","Firebase",w).create(f,{appName:v.name})}function Oe(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&me(v,"argument-error"),ve(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(v,...f){if("string"!=typeof v){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return Ke.create(v,...f)}function Y(v,f,...m){if(!v)throw Ne(f,...m)}function Ze(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Fe(f),new Error(f)}function _t(v,f){v||Ze(f)}function Ge(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function $t(){return"http:"===nt()||"https:"===nt()}function nt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class oe{constructor(f,m){this.shortDelay=f,this.longDelay=m,_t(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Bs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($t()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function de(v,f){_t(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class ye{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new oe(3e4,6e4);function we(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Xe(v,f,m,w){return un.apply(this,arguments)}function un(){return(un=(0,h.Z)(function*(v,f,m,w,T={}){return ct(v,T,(0,h.Z)(function*(){let x={},G={};w&&("GET"===f?G=w:x={body:JSON.stringify(w)});const ee=(0,V.xO)(Object.assign({key:v.config.apiKey},G)).slice(1),Se=yield v._getAdditionalHeaders();return Se["Content-Type"]="application/json",v.languageCode&&(Se["X-Firebase-Locale"]=v.languageCode),ye.fetch()(dn(v,v.config.apiHost,m,ee),Object.assign({method:f,headers:Se,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ct(v,f,m){return lt.apply(this,arguments)}function lt(){return(lt=(0,h.Z)(function*(v,f,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Le),f);try{const T=new Lr(v),x=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const G=yield x.json();if("needConfirmation"in G)throw Nn(v,"account-exists-with-different-credential",G);if(x.ok&&!("errorMessage"in G))return G;{const ee=x.ok?G.errorMessage:G.error.message,[Se,Ue]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw Nn(v,"credential-already-in-use",G);if("EMAIL_EXISTS"===Se)throw Nn(v,"email-already-in-use",G);if("USER_DISABLED"===Se)throw Nn(v,"user-disabled",G);const st=w[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw ve(v,st,Ue);me(v,st)}}catch(T){if(T instanceof V.ZR)throw T;me(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Wt(v,f,m,w){return tn.apply(this,arguments)}function tn(){return(tn=(0,h.Z)(function*(v,f,m,w,T={}){const x=yield Xe(v,f,m,w,T);return"mfaPendingCredential"in x&&me(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function dn(v,f,m,w){const T=`${f}${m}?${w}`;return v.config.emulator?de(v.config,T):`${v.config.apiScheme}://${T}`}class Lr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(le(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(v,f,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const T=le(v,f,w);return T.customData._tokenResponse=m,T}function Wn(){return(Wn=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function rt(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function In(){return(In=(0,h.Z)(function*(v,f=!1){const m=(0,V.m9)(v),w=yield m.getIdToken(f),T=Ir(w);Y(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,G=x?.sign_in_provider;return{claims:T,token:w,authTime:rt(Vr(T.auth_time)),issuedAtTime:rt(Vr(T.iat)),expirationTime:rt(Vr(T.exp)),signInProvider:G||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function Vr(v){return 1e3*Number(v)}function Ir(v){const[f,m,w]=v.split(".");if(void 0===f||void 0===m||void 0===w)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,V.tV)(m);return T?JSON.parse(T):(Fe("Failed to decode base64 JWT payload"),null)}catch(T){return Fe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function zt(v,f){return at.apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof V.ZR&&function bt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}class Cn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class tr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=rt(this.lastLoginAt),this.creationTime=rt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Dn(v){return Ur.apply(this,arguments)}function Ur(){return Ur=(0,h.Z)(function*(v){var f;const m=v.auth,w=yield v.getIdToken(),T=yield zt(v,function $s(v,f){return wn.apply(this,arguments)}(m,{idToken:w}));Y(T?.users.length,m,"internal-error");const x=T.users[0];v._notifyReloadListener(x);const G=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?function ai(v){return v.map(f=>{var{providerId:m}=f,w=(0,ne._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(x.providerUserInfo):[],ee=function Ft(v,f){return[...v.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}(v.providerData,G),st=!!v.isAnonymous&&!(v.email&&x.passwordHash||ee?.length),St={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ee,metadata:new tr(x.createdAt,x.lastLoginAt),isAnonymous:st};Object.assign(v,St)}),Ur.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(v){const f=(0,V.m9)(v);yield Dn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(v,f){const m=yield ct(v,{},(0,h.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=v.config,G=dn(v,T,"/v1/token",`key=${x}`),ee=yield v._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(G,{method:"POST",headers:ee,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Y(f.idToken,"internal-error"),Y(typeof f.idToken<"u","internal-error"),Y(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Zt(v){const f=Ir(v);return Y(f,"internal-error"),Y(typeof f.exp<"u","internal-error"),Y(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,h.Z)(function*(){return Y(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:G}=yield function Lt(v,f){return ms.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(T,x,Number(G))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:T,expirationTime:x}=m,G=new Rt;return w&&(Y("string"==typeof w,"internal-error",{appName:f}),G.refreshToken=w),T&&(Y("string"==typeof T,"internal-error",{appName:f}),G.accessToken=T),x&&(Y("number"==typeof x,"internal-error",{appName:f}),G.expirationTime=x),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Rt,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function $n(v,f){Y("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class On{constructor(f){var{uid:m,auth:w,stsTokenManager:T}=f,x=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new tr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,h.Z)(function*(){const w=yield zt(m,m.stsTokenManager.getToken(m.auth,f));return Y(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Bi(v){return In.apply(this,arguments)}(this,f)}reload(){return function hr(v){return nr.apply(this,arguments)}(this)}_assign(f){this!==f&&(Y(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new On(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),m&&(yield Dn(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,h.Z)(function*(){const m=yield f.getIdToken();return yield zt(f,function Er(v,f){return Wn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,T,x,G,ee,Se,Ue,st;const St=null!==(w=m.displayName)&&void 0!==w?w:void 0,_r=null!==(T=m.email)&&void 0!==T?T:void 0,us=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,Ts=null!==(G=m.photoURL)&&void 0!==G?G:void 0,eu=null!==(ee=m.tenantId)&&void 0!==ee?ee:void 0,xi=null!==(Se=m._redirectEventId)&&void 0!==Se?Se:void 0,ad=null!==(Ue=m.createdAt)&&void 0!==Ue?Ue:void 0,dc=null!==(st=m.lastLoginAt)&&void 0!==st?st:void 0,{uid:tu,emailVerified:Ss,isAnonymous:hc,providerData:fc,stsTokenManager:ea}=m;Y(tu&&ea,f,"internal-error");const pc=Rt.fromJSON(this.name,ea);Y("string"==typeof tu,f,"internal-error"),$n(St,f.name),$n(_r,f.name),Y("boolean"==typeof Ss,f,"internal-error"),Y("boolean"==typeof hc,f,"internal-error"),$n(us,f.name),$n(Ts,f.name),$n(eu,f.name),$n(xi,f.name),$n(ad,f.name),$n(dc,f.name);const ta=new On({uid:tu,auth:f,email:_r,emailVerified:Ss,displayName:St,isAnonymous:hc,photoURL:Ts,phoneNumber:us,tenantId:eu,stsTokenManager:pc,createdAt:ad,lastLoginAt:dc});return fc&&Array.isArray(fc)&&(ta.providerData=fc.map(As=>Object.assign({},As))),xi&&(ta._redirectEventId=xi),ta}static _fromIdTokenResponse(f,m,w=!1){return(0,h.Z)(function*(){const T=new Rt;T.updateFromServerResponse(m);const x=new On({uid:m.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield Dn(x),x})()}}const Cr=new Map;function jn(v){_t(v instanceof Function,"Expected a class definition");let f=Cr.get(v);return f?(_t(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Cr.set(v,f),f)}const ui=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var T=this;return(0,h.Z)(function*(){T.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=w.storage[m];return void 0===T?null:T})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function Kr(v,f,m){return`firebase:${v}:${f}:${m}`}class U{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:T,name:x}=this.auth;this.fullUserKey=Kr(this.userKey,T.apiKey,x),this.fullPersistenceKey=Kr("persistence",T.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?On._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,h.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new U(jn(ui),f,w);const T=(yield Promise.all(m.map(function(){var Ue=(0,h.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let x=T[0]||jn(ui);const G=Kr(w,f.config.apiKey,f.name);let ee=null;for(const Ue of m)try{const st=yield Ue._get(G);if(st){const St=On._fromJSON(f,st);Ue!==x&&(ee=St),x=Ue;break}}catch{}const Se=T.filter(Ue=>Ue._shouldAllowMigration);return x._shouldAllowMigration&&Se.length?(x=Se[0],ee&&(yield x._set(G,ee.toJSON())),yield Promise.all(m.map(function(){var Ue=(0,h.Z)(function*(st){if(st!==x)try{yield st._remove(G)}catch{}});return function(st){return Ue.apply(this,arguments)}}())),new U(x,f,w)):new U(x,f,w)})()}}function F(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(j(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(R(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(We(f))return"Blackberry";if(vt(f))return"Webos";if(P(f))return"Safari";if((f.includes("chrome/")||M(f))&&!f.includes("edge/"))return"Chrome";if(ue(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function R(v=(0,V.z$)()){return/firefox\//i.test(v)}function P(v=(0,V.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function M(v=(0,V.z$)()){return/crios\//i.test(v)}function j(v=(0,V.z$)()){return/iemobile/i.test(v)}function ue(v=(0,V.z$)()){return/android/i.test(v)}function We(v=(0,V.z$)()){return/blackberry/i.test(v)}function vt(v=(0,V.z$)()){return/webos/i.test(v)}function pt(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Pt(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function At(v=(0,V.z$)()){return pt(v)||ue(v)||vt(v)||We(v)||/windows phone/i.test(v)||j(v)}function js(v,f=[]){let m;switch(v){case"Browser":m=F((0,V.z$)());break;case"Worker":m=`${F((0,V.z$)())}-${v}`;break;default:m=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${w}`}function K(){return(K=(0,h.Z)(function*(v){return(yield Xe(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function De(v,f){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(v,f){return Xe(v,"GET","/v2/recaptchaConfig",we(v,f))})).apply(this,arguments)}function Et(v){return void 0!==v&&void 0!==v.getResponse}function Vt(v){return void 0!==v&&void 0!==v.enterprise}class ut{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Gt(v){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=T=>{const x=le("internal-error");x.customData=T,m(x)},w.type="text/javascript",w.charset="UTF-8",function Jt(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function pr(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Hg="NO_RECAPTCHA";class Io{constructor(f){this.type="recaptcha-enterprise",this.auth=Xt(f)}verify(f="verify",m=!1){var w=this;return(0,h.Z)(function*(){function x(){return x=(0,h.Z)(function*(ee){if(!m){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Se=(0,h.Z)(function*(Ue,st){De(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(St=>{if(void 0!==St.recaptchaKey){const _r=new ut(St);return null==ee.tenantId?ee._agentRecaptchaConfig=_r:ee._tenantRecaptchaConfigs[ee.tenantId]=_r,Ue(_r.siteKey)}st(new Error("recaptcha Enterprise site key undefined"))}).catch(St=>{st(St)})});return function(Ue,st){return Se.apply(this,arguments)}}())}),x.apply(this,arguments)}function G(ee,Se,Ue){const st=window.grecaptcha;Vt(st)?st.enterprise.ready(()=>{st.enterprise.execute(ee,{action:f}).then(St=>{Se(St)}).catch(()=>{Se(Hg)})}):Ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Se)=>{(function T(ee){return x.apply(this,arguments)})(w.auth).then(Ue=>{if(!m&&Vt(window.grecaptcha))G(Ue,ee,Se);else{if(typeof window>"u")return void Se(new Error("RecaptchaVerifier is only supported in browser"));Gt("https://www.google.com/recaptcha/enterprise.js?render="+Ue).then(()=>{G(Ue,ee,Se)}).catch(st=>{Se(st)})}}).catch(Ue=>{Se(Ue)})})})()}}function Zn(v,f,m){return ze.apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(v,f,m,w=!1){const T=new Io(v);let x;try{x=yield T.verify(m)}catch{x=yield T.verify(m,!0)}const G=Object.assign({},f);return Object.assign(G,w?{captchaResp:x}:{captchaResponse:x}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class Nt{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=x=>new Promise((G,ee)=>{try{G(f(x))}catch(Se){ee(Se)}});w.onAbort=m,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===f)return;const w=[];try{for(const T of m.queue)yield T(f),T.onAbort&&w.push(T.onAbort)}catch(T){w.reverse();for(const x of w)try{x()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class gn{constructor(f,m,w,T){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=w,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new es(this),this.idTokenSubscription=new es(this),this.beforeStateQueue=new Nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=jn(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,x;if(!w._deleted&&(w.persistenceManager=yield U.create(w,f),!w._deleted)){if(null!==(T=w._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(x=w.currentUser)||void 0===x?void 0:x.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,h.Z)(function*(){var w;const T=yield m.assertedPersistence.getCurrentUser();let x=T,G=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ee=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Se=x?._redirectEventId,Ue=yield m.tryRedirectSignIn(f);(!ee||ee===Se)&&Ue?.user&&(x=Ue.user,G=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if(G)try{yield m.beforeStateQueue.runMiddleware(x)}catch(ee){x=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ee))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return Y(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,h.Z)(function*(){try{yield Dn(f)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function re(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){const w=f?(0,V.m9)(f):null;return w&&Y(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return f&&Y(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(jn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.Z)(function*(){const m=yield De(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new ut(m);null==f.tenantId?f._agentRecaptchaConfig=w:f._tenantRecaptchaConfigs[f.tenantId]=w,w.emailPasswordEnabled&&new Io(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,h.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(m);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&jn(f)||m._popupRedirectResolver;Y(w,m,"argument-error"),m.redirectPersistenceManager=yield U.create(m,[jn(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,h.Z)(function*(){var w,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,h.Z)(function*(){if(f===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,T){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),G=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(G,this,"internal-error"),G.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,w,T):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=js(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(w["X-Firebase-Client"]=T);const x=yield f._getAppCheckToken();return x&&(w["X-Firebase-AppCheck"]=x),w})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var m;const w=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return w?.error&&function _e(v,...f){Me.logLevel<=ge.in.WARN&&Me.warn(`Auth (${O.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Xt(v){return(0,V.m9)(v)}class es{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pn(v,f,m){const w=Xt(v);Y(w._canInitEmulator,w,"emulator-config-failed"),Y(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!m?.disableWarnings,x=ba(f),{host:G,port:ee}=function Hs(v){const f=ba(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const x=T[1];return{host:x,port:Ot(w.substr(x.length+1))}}{const[x,G]=w.split(":");return{host:x,port:Ot(G)}}}(f);w.config.emulator={url:`${x}//${G}${null===ee?"":`:${ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ee,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function ku(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ba(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Ot(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class ci{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Ze("not implemented")}_getIdTokenResponse(f){return Ze("not implemented")}_linkToIdToken(f,m){return Ze("not implemented")}_getReauthenticationResolver(f){return Ze("not implemented")}}function Ta(v,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:resetPassword",we(v,f))})).apply(this,arguments)}function rr(v,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:update",we(v,f))})).apply(this,arguments)}function Do(v,f){return wl.apply(this,arguments)}function wl(){return(wl=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithPassword",we(v,f))})).apply(this,arguments)}function an(v,f){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:sendOobCode",we(v,f))})).apply(this,arguments)}function Fu(){return(Fu=(0,h.Z)(function*(v,f){return an(v,f)})).apply(this,arguments)}function bo(v,f){return To.apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(v,f){return an(v,f)})).apply(this,arguments)}function $i(v,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(v,f){return an(v,f)})).apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(v,f){return an(v,f)})).apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithEmailLink",we(v,f))})).apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithEmailLink",we(v,f))})).apply(this,arguments)}class br extends ci{constructor(f,m,w,T=null){super("password",w),this._email=f,this._password=m,this._tenantId=T}static _fromEmailAndPassword(f,m){return new br(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new br(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,h.Z)(function*(){var w;switch(m.signInMethod){case"password":const T={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=f._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const x=yield Zn(f,T,"signInWithPassword");return Do(f,x)}return Do(f,T).catch(function(){var x=(0,h.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield Zn(f,T,"signInWithPassword");return Do(f,ee)}return Promise.reject(G)});return function(G){return x.apply(this,arguments)}}());case"emailLink":return function bi(v,f){return Sa.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:me(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return rr(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Aa(v,f){return So.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ns(v,f){return Th.apply(this,arguments)}function Th(){return(Th=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithIdp",we(v,f))})).apply(this,arguments)}class ji extends ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ji(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):me("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=m,x=(0,ne._T)(m,["providerId","signInMethod"]);if(!w||!T)return null;const G=new ji(w,T);return G.idToken=x.idToken||void 0,G.accessToken=x.accessToken||void 0,G.secret=x.secret,G.nonce=x.nonce,G.pendingToken=x.pendingToken||null,G}_getIdTokenResponse(f){return ns(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ns(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ns(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,V.xO)(m)}return f}}function Sh(){return(Sh=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:sendVerificationCode",we(v,f))})).apply(this,arguments)}function Ah(){return(Ah=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithPhoneNumber",we(v,f))})).apply(this,arguments)}function Mh(){return(Mh=(0,h.Z)(function*(v,f){const m=yield Wt(v,"POST","/v1/accounts:signInWithPhoneNumber",we(v,f));if(m.temporaryProof)throw Nn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const xh={USER_NOT_FOUND:"user-not-found"};function Wg(){return(Wg=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithPhoneNumber",we(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),xh)})).apply(this,arguments)}class Ma extends ci{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ma({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ma({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Gg(v,f){return Ah.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function $0(v,f){return Mh.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Rh(v,f){return Wg.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:T}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:x}=f;return w||m||T||x?new Ma({verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:x}):null}}class Ao{constructor(f){var m,w,T,x,G,ee;const Se=(0,V.zd)((0,V.pd)(f)),Ue=null!==(m=Se.apiKey)&&void 0!==m?m:null,st=null!==(w=Se.oobCode)&&void 0!==w?w:null,St=function qg(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Se.mode)&&void 0!==T?T:null);Y(Ue&&st&&St,"argument-error"),this.apiKey=Ue,this.operation=St,this.code=st,this.continueUrl=null!==(x=Se.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(G=Se.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ee=Se.tenantId)&&void 0!==ee?ee:null}static parseLink(f){const m=function Zg(v){const f=(0,V.zd)((0,V.pd)(v)).link,m=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||m||f||v}(f);try{return new Ao(m)}catch{return null}}}let Ph=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return br._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const T=Ao.parseLink(w);return Y(T,"argument-error"),br._fromEmailAndCode(m,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Gs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Mo extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Hi extends Mo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return Y("providerId"in m&&"signInMethod"in m,"argument-error"),ji._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Y(f.idToken||f.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Hi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Hi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:x,nonce:G,providerId:ee}=f;if(!w&&!T&&!m&&!x||!ee)return null;try{return new Hi(ee)._credential({idToken:m,accessToken:w,nonce:G,pendingToken:x})}catch{return null}}}let j0=(()=>{class v extends Mo{constructor(){super("facebook.com")}static credential(m){return ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Nh=(()=>{class v extends Mo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:T}=m;if(!w&&!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Oh=(()=>{class v extends Mo{constructor(){super("github.com")}static credential(m){return ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ws extends ci{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ns(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ns(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ns(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:x}=m;return w&&T&&x&&w===T?new Ws(w,x):null}static _create(f,m){return new Ws(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lu extends Gs{constructor(f){Y(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Lu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Lu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Ws.fromJSON(f);return Y(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Ws._create(w,m)}catch{return null}}}let Fh=(()=>{class v extends Mo{constructor(){super("twitter.com")}static credential(m,w){return ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=m;if(!w||!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function xa(v,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signUp",we(v,f))})).apply(this,arguments)}class mn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,T=!1){return(0,h.Z)(function*(){const x=yield On._fromIdTokenResponse(f,w,T),G=Il(w);return new mn({user:x,providerId:G,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=Il(w);return new mn({user:f,providerId:T,_tokenResponse:w,operationType:m})})()}}function Il(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Lh(v){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(v){var f;const m=Xt(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new mn({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield xa(m,{returnSecureToken:!0}),T=yield mn._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class qs extends V.ZR{constructor(f,m,w,T){var x;super(m.code,m.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,qs.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,T){return new qs(f,m,w,T)}}function Pa(v,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?qs._fromErrorAndOperation(v,x,f,w):x})}function sr(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Qg(v,f){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,h.Z)(function*(v,f){const m=(0,V.m9)(v);yield Uu(!0,m,f);const{providerUserInfo:w}=yield function oi(v,f){return Ci.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),T=sr(w||[]);return m.providerData=m.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Vu.apply(this,arguments)}function Zs(v,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,h.Z)(function*(v,f,m=!1){const w=yield zt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return mn._forOperation(v,"link",w)})).apply(this,arguments)}function Uu(v,f,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(v,f,m){yield Dn(f);const T=!1===v?"provider-already-linked":"no-such-provider";Y(sr(f.providerData).has(m)===v,f.auth,T)})).apply(this,arguments)}function Vh(v,f){return rs.apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(v,f,m=!1){const{auth:w}=v,T="reauthenticate";try{const x=yield zt(v,Pa(w,T,f,v),m);Y(x.idToken,w,"internal-error");const G=Ir(x.idToken);Y(G,w,"internal-error");const{sub:ee}=G;return Y(v.uid===ee,w,"user-mismatch"),mn._forOperation(v,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&me(w,"user-mismatch"),x}})).apply(this,arguments)}function Cl(v,f){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(v,f,m=!1){const w="signIn",T=yield Pa(v,w,f),x=yield mn._fromIdTokenResponse(v,w,T);return m||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Dt(v,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,h.Z)(function*(v,f){return Cl(Xt(v),f)})).apply(this,arguments)}function H0(v,f){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,h.Z)(function*(v,f){const m=(0,V.m9)(v);return yield Uu(!1,m,f.providerId),Zs(m,f)})).apply(this,arguments)}function Uh(v,f){return bl.apply(this,arguments)}function bl(){return(bl=(0,h.Z)(function*(v,f){return Vh((0,V.m9)(v),f)})).apply(this,arguments)}function $h(){return($h=(0,h.Z)(function*(v,f){return Wt(v,"POST","/v1/accounts:signInWithCustomToken",we(v,f))})).apply(this,arguments)}function Jg(v,f){return se.apply(this,arguments)}function se(){return se=(0,h.Z)(function*(v,f){const m=Xt(v),w=yield function Bh(v,f){return $h.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),T=yield mn._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(T.user),T}),se.apply(this,arguments)}class Ht{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Tl._fromServerResponse(f,m):"totpInfo"in m?Sl._fromServerResponse(f,m):me(f,"internal-error")}}class Tl extends Ht{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Tl(m)}}class Sl extends Ht{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new Sl(m)}}function bn(v,f,m){var w;Y((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Y(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Y(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(Y(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Xg(v,f,m){return Ro.apply(this,arguments)}function Ro(){return Ro=(0,h.Z)(function*(v,f,m){var w;const T=Xt(v),x={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const G=yield Zn(T,x,"getOobCode",!0);m&&bn(T,G,m),yield bo(T,G)}else m&&bn(T,x,m),yield bo(T,x).catch(function(){var G=(0,h.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Se=yield Zn(T,x,"getOobCode",!0);m&&bn(T,Se,m),yield bo(T,Se)}});return function(ee){return G.apply(this,arguments)}}())}),Ro.apply(this,arguments)}function zi(v,f,m){return $u.apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(v,f,m){yield Ta((0,V.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function jh(v,f){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,h.Z)(function*(v,f){yield function zs(v,f){return Di.apply(this,arguments)}((0,V.m9)(v),{oobCode:f})}),Hh.apply(this,arguments)}function zh(v,f){return ju.apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(v,f){const m=(0,V.m9)(v),w=yield Ta(m,{oobCode:f}),T=w.requestType;switch(Y(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(w.mfaInfo,m,"internal-error");default:Y(w.email,m,"internal-error")}let x=null;return w.mfaInfo&&(x=Ht._fromServerResponse(Xt(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Tr(v,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(v,f){const{data:m}=yield zh((0,V.m9)(v),f);return m.email})).apply(this,arguments)}function Po(v,f,m){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,h.Z)(function*(v,f,m){var w;const T=Xt(v),x={returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Ue=yield Zn(T,x,"signUpPassword");G=xa(T,Ue)}else G=xa(T,x).catch(function(){var Ue=(0,h.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const St=yield Zn(T,x,"signUpPassword");return xa(T,St)}return Promise.reject(st)});return function(st){return Ue.apply(this,arguments)}}());const ee=yield G.catch(Ue=>Promise.reject(Ue)),Se=yield mn._fromIdTokenResponse(T,"signIn",ee);return yield T._updateCurrentUser(Se.user),Se}),Ks.apply(this,arguments)}function _s(v,f,m){return Dt((0,V.m9)(v),Ph.credential(f,m))}function Gh(v,f,m){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,h.Z)(function*(v,f,m){var w;const T=Xt(v),x={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function G(ee,Se){Y(Se.handleCodeInApp,T,"argument-error"),Se&&bn(T,ee,Se)}if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ee=yield Zn(T,x,"getOobCode",!0);G(ee,m),yield $i(T,ee)}else G(x,m),yield $i(T,x).catch(function(){var ee=(0,h.Z)(function*(Se){if("auth/missing-recaptcha-token"!==Se.code)return Promise.reject(Se);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ue=yield Zn(T,x,"getOobCode",!0);G(Ue,m),yield $i(T,Ue)}});return function(Se){return ee.apply(this,arguments)}}())}),Oa.apply(this,arguments)}function z0(v,f){return"EMAIL_SIGNIN"===Ao.parseLink(f)?.operation}function G0(v,f,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v),T=Ph.credentialWithLink(f,m||Ge());return Y(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Dt(w,T)})).apply(this,arguments)}function Al(){return(Al=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:createAuthUri",we(v,f))})).apply(this,arguments)}function Wh(v,f){return qh.apply(this,arguments)}function qh(){return qh=(0,h.Z)(function*(v,f){const w={identifier:f,continueUri:$t()?Ge():"http://localhost"},{signinMethods:T}=yield function Hu(v,f){return Al.apply(this,arguments)}((0,V.m9)(v),w);return T||[]}),qh.apply(this,arguments)}function em(v,f){return zu.apply(this,arguments)}function zu(){return zu=(0,h.Z)(function*(v,f){const m=(0,V.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&bn(m.auth,T,f);const{email:x}=yield function El(v,f){return Fu.apply(this,arguments)}(m.auth,T);x!==v.email&&(yield v.reload())}),zu.apply(this,arguments)}function tm(v,f,m){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&bn(w.auth,x,m);const{email:G}=yield function U0(v,f){return Dr.apply(this,arguments)}(w.auth,x);G!==v.email&&(yield v.reload())}),Ml.apply(this,arguments)}function xl(){return(xl=(0,h.Z)(function*(v,f){return Xe(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zh(v,f){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,h.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,V.m9)(v),x={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},G=yield zt(w,function nm(v,f){return xl.apply(this,arguments)}(w.auth,x));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ee=w.providerData.find(({providerId:Se})=>"password"===Se);ee&&(ee.displayName=w.displayName,ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)}),Rl.apply(this,arguments)}function W0(v,f){return vs((0,V.m9)(v),f,null)}function Sr(v,f){return vs((0,V.m9)(v),null,f)}function vs(v,f,m){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(v,f,m){const{auth:w}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const G=yield zt(v,rr(w,x));yield v._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Fa{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class rm extends Fa{constructor(f,m,w,T){super(f,m,w),this.username=T}}class Z0 extends Fa{constructor(f,m){super(f,"facebook.com",m)}}class K0 extends rm{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Y0 extends Fa{constructor(f,m){super(f,"google.com",m)}}class Pl extends rm{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Nl(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function q0(v){var f,m;if(!v)return null;const{providerId:w}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const G=null===(m=null===(f=Ir(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(G)return new Fa(x,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new Z0(x,T);case"github.com":return new K0(x,T);case"google.com":return new Y0(x,T);case"twitter.com":return new Pl(x,T,v.screenName||null);case"custom":case"anonymous":return new Fa(x,null);default:return new Fa(x,w,T)}}(m)}class Qs{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new Qs("enroll",f,m)}static _fromMfaPendingCredential(f){return new Qs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Qs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return Qs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ol{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Xt(f),T=m.customData._serverResponse,x=(T.mfaInfo||[]).map(ee=>Ht._fromServerResponse(w,ee));Y(T.mfaPendingCredential,w,"internal-error");const G=Qs._fromMfaPendingCredential(T.mfaPendingCredential);return new Ol(G,x,function(){var ee=(0,h.Z)(function*(Se){const Ue=yield Se._process(w,G);delete T.mfaInfo,delete T.mfaPendingCredential;const st=Object.assign(Object.assign({},T),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(m.operationType){case"signIn":const St=yield mn._fromIdTokenResponse(w,m.operationType,st);return yield w._updateCurrentUser(St.user),St;case"reauthenticate":return Y(m.user,w,"internal-error"),mn._forOperation(m.user,m.operationType,st);default:me(w,"internal-error")}});return function(Se){return ee.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,h.Z)(function*(){return m.signInResolver(f)})()}}function kl(v,f){var m;const w=(0,V.m9)(v),T=f;return Y(f.customData.operationType,w,"argument-error"),Y(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Ol._fromError(w,T)}class Oo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Ht._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Oo(f)}getSession(){var f=this;return(0,h.Z)(function*(){return Qs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,h.Z)(function*(){const T=f,x=yield w.getSession(),G=yield zt(w.user,T._process(w.user.auth,x,m));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(f){var m=this;return(0,h.Z)(function*(){const w="string"==typeof f?f:f.uid,T=yield m.user.getIdToken();try{const x=yield zt(m.user,function Js(v,f){return Xe(v,"POST","/v2/accounts/mfaEnrollment:withdraw",we(v,f))}(m.user.auth,{idToken:T,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:G})=>G!==w),yield m.user._updateTokensIfNecessary(x),yield m.user.reload()}catch(x){throw x}})()}}const Ua=new WeakMap;function Ba(v){const f=(0,V.m9)(v);return Ua.has(f)||Ua.set(f,Oo._fromUser(f)),Ua.get(f)}const qu="__sak";class $a{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zu=(()=>{class v extends $a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ll(){const v=(0,V.z$)();return P(v)||pt(v)}()&&function fr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=At(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),x=this.localCache[w];T!==x&&m(w,x,T)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((ee,Se,Ue)=>{this.notifyListeners(ee,Ue)});const T=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(T);if(m.newValue!==ee)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!w)return}const x=()=>{const ee=this.storage.getItem(T);!w&&this.localCache[T]===ee||this.notifyListeners(T,ee)},G=this.storage.getItem(T);!function hn(){return(0,V.w1)()&&10===document.documentMode}()||G===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const x of Array.from(T))x(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var T=()=>super._set,x=this;return(0,h.Z)(function*(){yield T().call(x,m,w),x.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,T=this;return(0,h.Z)(function*(){const x=yield w().call(T,m);return T.localCache[m]=JSON.stringify(x),x})()}_remove(m){var w=()=>super._remove,T=this;return(0,h.Z)(function*(){yield w().call(T,m),delete T.localCache[m]})()}}return v.type="LOCAL",v})(),Br=(()=>{class v extends $a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let Ku=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(x=>x.isListeningto(m));if(w)return w;const T=new v(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const T=m,{eventId:x,eventType:G,data:ee}=T.data,Se=w.handlersMap[G];if(!Se?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:G});const Ue=Array.from(Se).map(function(){var St=(0,h.Z)(function*(_r){return _r(T.origin,ee)});return function(_r){return St.apply(this,arguments)}}()),st=yield function Vl(v){return Promise.all(v.map(function(){var f=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Ue);T.ports[0].postMessage({status:"done",eventId:x,eventType:G,response:st})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ws(v="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return v+m}class Ul{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var T=this;return(0,h.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let G,ee;return new Promise((Se,Ue)=>{const st=ws("",20);x.port1.start();const St=setTimeout(()=>{Ue(new Error("unsupported_event"))},w);ee={messageChannel:x,onMessage(_r){const us=_r;if(us.data.eventId===st)switch(us.data.status){case"ack":clearTimeout(St),G=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Se(us.data.response);break;default:clearTimeout(St),clearTimeout(G),Ue(new Error("invalid_response"))}}},T.handlers.add(ee),x.port1.addEventListener("message",ee.onMessage),T.target.postMessage({eventType:f,eventId:st,data:m},[x.port2])}).finally(()=>{ee&&T.removeMessageHandler(ee)})})()}}function yn(){return window}function Yu(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function za(){return(za=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rf="firebaseLocalStorageDb",ko=1,is="firebaseLocalStorage",om="fbase_key";class Xs{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Qu(v,f){return v.transaction([is],f?"readwrite":"readonly").objectStore(is)}function Bl(){const v=indexedDB.open(rf,ko);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(is,{keyPath:om})}catch(T){m(T)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(is)?f(w):(w.close(),yield function Fo(){const v=indexedDB.deleteDatabase(rf);return new Xs(v).toPromise()}(),f(yield Bl()))}))})}function $l(v,f,m){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,h.Z)(function*(v,f,m){const w=Qu(v,!0).put({[om]:f,value:m});return new Xs(w).toPromise()})).apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(v,f){const m=Qu(v,!1).get(f),w=yield new Xs(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Wa(v,f){const m=Qu(v,!0).delete(f);return new Xs(m).toPromise()}const jl=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Bl()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const x=yield w._openDb();return yield m(x)}catch(x){if(T++>3)throw x;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Yu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Ku._getInstance(function nf(){return Yu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(T,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(T,x){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,T;if(m.activeServiceWorker=yield function ef(){return za.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ul(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);x&&null!==(w=x[0])&&void 0!==w&&w.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function tf(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Bl();return yield $l(m,qu,"1"),yield Wa(m,qu),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(x=>$l(x,m,w)),T.localCache[m]=w,T.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=yield w._withRetries(x=>function am(v,f){return Ga.apply(this,arguments)}(x,m));return w.localCache[m]=T,T})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(T=>Wa(T,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(G=>{const ee=Qu(G,!1).getAll();return new Xs(ee).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:G,value:ee}of w)x.add(G),JSON.stringify(m.localCache[G])!==JSON.stringify(ee)&&(m.notifyListeners(G,ee),T.push(G));for(const G of Object.keys(m.localCache))m.localCache[G]&&!x.has(G)&&(m.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const x of Array.from(T))x(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Hl=1e12;class ew{constructor(f){this.auth=f,this.counter=Hl,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new uf(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Hl;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Hl))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(f||Hl))||void 0===w||w.execute(),""})()}}class uf{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;Y(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cm(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lm=pr("rcb"),qD=new oe(3e4,6e4);class qa{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=yn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return Y(function KD(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&Et(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((w,T)=>{const x=yn().setTimeout(()=>{T(le(f,"network-request-failed"))},qD.get());yn()[lm]=()=>{yn().clearTimeout(x),delete yn()[lm];const ee=yn().grecaptcha;if(!ee||!Et(ee))return void T(le(f,"internal-error"));const Se=ee.render;ee.render=(Ue,st)=>{const St=Se(Ue,st);return this.counter++,St},this.hostLanguage=m,w(ee)},Gt(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:lm,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),T(le(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=yn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class YD{load(f){return(0,h.Z)(function*(){return new ew(f)})()}clearedOneInstance(){}}const zn="recaptcha",cf={theme:"light",type:"image"};class Xu{constructor(f,m=Object.assign({},cf),w){this.parameters=m,this.type=zn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xt(w),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;Y(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new YD:new qa,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(x=>{const G=ee=>{ee&&(f.tokenChangeListeners.delete(G),x(ee))};f.tokenChangeListeners.add(G),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=yn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){Y($t()&&!Yu(),f.auth,"internal-error"),yield function dm(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function ie(v){return K.apply(this,arguments)}(f.auth);Y(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qr{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ma._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Bo(v,f,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(v,f,m){const w=Xt(v),T=yield Wl(w,f,(0,V.m9)(m));return new Qr(T,x=>Dt(w,x))})).apply(this,arguments)}function Gl(v,f,m){return $o.apply(this,arguments)}function $o(){return($o=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v);yield Uu(!1,w,"phone");const T=yield Wl(w.auth,f,(0,V.m9)(m));return new Qr(T,x=>H0(w,x))})).apply(this,arguments)}function tw(v,f,m){return hm.apply(this,arguments)}function hm(){return(hm=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v),T=yield Wl(w.auth,f,(0,V.m9)(m));return new Qr(T,x=>Uh(w,x))})).apply(this,arguments)}function Wl(v,f,m){return lf.apply(this,arguments)}function lf(){return lf=(0,h.Z)(function*(v,f,m){var w;const T=yield m.verify();try{let x;if(Y("string"==typeof T,v,"argument-error"),Y(m.type===zn,v,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const G=x.session;if("phoneNumber"in x)return Y("enroll"===G.type,v,"internal-error"),(yield function Fl(v,f){return Xe(v,"POST","/v2/accounts/mfaEnrollment:start",we(v,f))}(v,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Y("signin"===G.type,v,"internal-error");const ee=(null===(w=x.multiFactorHint)||void 0===w?void 0:w.uid)||x.multiFactorUid;return Y(ee,v,"missing-multi-factor-info"),(yield function sf(v,f){return Xe(v,"POST","/v2/accounts/mfaSignIn:start",we(v,f))}(v,{mfaPendingCredential:G.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function B0(v,f){return Sh.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:T});return G}}finally{m._reset()}}),lf.apply(this,arguments)}function di(v,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,h.Z)(function*(v,f){yield Zs((0,V.m9)(v),f)})).apply(this,arguments)}let Ti=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Xt(m)}verifyPhoneNumber(m,w){return Wl(this.auth,m,(0,V.m9)(w))}static credential(m,w){return Ma._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:T}=m;return w&&T?Ma._fromTokenResponse(w,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Je(v,f){return f?jn(f):(Y(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Si extends ci{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ns(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ns(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ns(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Ai(v){return Cl(v.auth,new Si(v),v.bypassAuthState)}function fm(v){const{auth:f,user:m}=v;return Y(m,f,"internal-error"),Vh(m,new Si(v),v.bypassAuthState)}function ec(v){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(v){const{auth:f,user:m}=v;return Y(m,f,"internal-error"),Zs(m,new Si(v),v.bypassAuthState)})).apply(this,arguments)}class df{constructor(f,m,w,T,x=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,h.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(w,T){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:x,tenantId:G,error:ee,type:Se}=f;if(ee)return void m.reject(ee);const Ue={auth:m.auth,requestUri:w,sessionId:T,tenantId:G||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Se)(Ue))}catch(st){m.reject(st)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ai;case"linkViaPopup":case"linkViaRedirect":return ec;case"reauthViaPopup":case"reauthViaRedirect":return fm;default:me(this.auth,"internal-error")}}resolve(f){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pm=new oe(2e3,1e4);function ql(v,f,m){return jo.apply(this,arguments)}function jo(){return(jo=(0,h.Z)(function*(v,f,m){const w=Xt(v);Oe(v,f,Gs);const T=Je(w,m);return new Zl(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function tc(v,f,m){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v);Oe(w.auth,f,Gs);const T=Je(w.auth,m);return new Zl(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function no(v,f,m){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v);Oe(w.auth,f,Gs);const T=Je(w.auth,m);return new Zl(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let Zl=(()=>{class v extends df{constructor(m,w,T,x,G){super(m,w,x,G),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return Y(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){_t(1===m.filter.length,"Popup operations only handle one event");const w=ws();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(le(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,T;this.pollId=null!==(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(le(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,pm.get())};m()}}return v.currentPopupAction=null,v})();const hf="pendingRedirect",Gi=new Map;class Za extends df{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=Gi.get(m.auth._key());if(!w){try{const x=(yield function Kn(v,f){return Kl.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(x)}catch(T){w=()=>Promise.reject(T)}Gi.set(m.auth._key(),w)}return m.bypassAuthState||Gi.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Kl(){return(Kl=(0,h.Z)(function*(v,f){const m=Ka(f),w=gm(v);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(m));return yield w._remove(m),T})).apply(this,arguments)}function nc(v,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(v,f){return gm(v)._set(Ka(f),"true")})).apply(this,arguments)}function Ho(){Gi.clear()}function zo(v,f){Gi.set(v._key(),f)}function gm(v){return jn(v._redirectPersistence)}function Ka(v){return Kr(hf,v.config.apiKey,v.name)}function rc(v,f,m){return function mm(v,f,m){return Yl.apply(this,arguments)}(v,f,m)}function Yl(){return(Yl=(0,h.Z)(function*(v,f,m){const w=Xt(v);Oe(v,f,Gs),yield w._initializationPromise;const T=Je(w,m);return yield nc(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function ic(v,f,m){return function Ya(v,f,m){return Jr.apply(this,arguments)}(v,f,m)}function Jr(){return(Jr=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v);Oe(w.auth,f,Gs),yield w.auth._initializationPromise;const T=Je(w.auth,m);yield nc(T,w.auth);const x=yield Xr(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function sc(v,f,m){return function yr(v,f,m){return Go.apply(this,arguments)}(v,f,m)}function Go(){return(Go=(0,h.Z)(function*(v,f,m){const w=(0,V.m9)(v);Oe(w.auth,f,Gs),yield w.auth._initializationPromise;const T=Je(w.auth,m);yield Uu(!1,w,f.providerId),yield nc(T,w.auth);const x=yield Xr(w);return T._openRedirect(w.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function ym(v,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(v,f){return yield Xt(v)._initializationPromise,ro(v,f,!1)})).apply(this,arguments)}function ro(v,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(v,f,m=!1){const w=Xt(v),T=Je(w,f),G=yield new Za(w,T,m).execute();return G&&!m&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,f)),G})).apply(this,arguments)}function Xr(v){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(v){const f=ws(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class ff{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function io(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ss(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!ss(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(le(this.auth,T))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oc(f))}saveEventToCache(f){this.cachedEventUids.add(oc(f)),this.lastProcessedEventTime=Date.now()}}function oc(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function ss({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function or(v){return os.apply(this,arguments)}function os(){return(os=(0,h.Z)(function*(v,f={}){return Xe(v,"GET","/v1/projects",f)})).apply(this,arguments)}const nw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qa=/^https?/;function qo(){return(qo=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield or(v);for(const m of f)try{if(pf(m))return}catch{}me(v,"unauthorized-domain")})).apply(this,arguments)}function pf(v){const f=Ge(),{protocol:m,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const G=new URL(v);return""===G.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&G.hostname===w}if(!Qa.test(m))return!1;if(nw.test(v))return w===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const gf=new oe(3e4,6e4);function Ja(){const v=yn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Is=null;const Zo=new oe(5e3,15e3),mf="__/auth/iframe",Jl="emulator/auth/iframe",Wi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _f(v){const f=v.config;Y(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?de(f,Jl):`https://${v.config.authDomain}/${mf}`,w={apiKey:f.apiKey,appName:v.name,v:O.SDK_VERSION},T=yf.get(v.config.apiHost);T&&(w.eid=T);const x=v._getFrameworks();return x.length&&(w.fw=x.join(",")),`${m}?${(0,V.xO)(w).slice(1)}`}function vf(){return vf=(0,h.Z)(function*(v){const f=yield function _m(v){return Is=Is||function gt(v){return new Promise((f,m)=>{var w,T,x;function G(){Ja(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ja(),m(le(v,"network-request-failed"))},timeout:gf.get()})}if(null!==(T=null===(w=yn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(x=yn().gapi)||void 0===x||!x.load){const ee=pr("iframefcb");return yn()[ee]=()=>{gapi.load?G():m(le(v,"network-request-failed"))},Gt(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Se=>m(Se))}G()}}).catch(f=>{throw Is=null,f})}(v),Is}(v),m=yn().gapi;return Y(m,v,"internal-error"),f.open({where:document.body,url:_f(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wi,dontclear:!0},w=>new Promise(function(){var T=(0,h.Z)(function*(x,G){yield w.restyle({setHideOnLeave:!1});const ee=le(v,"network-request-failed"),Se=yn().setTimeout(()=>{G(ee)},Zo.get());function Ue(){yn().clearTimeout(Se),x(w)}w.ping(Ue).then(Ue,()=>{G(ee)})});return function(x,G){return T.apply(this,arguments)}}()))}),vf.apply(this,arguments)}const ar={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sn=500,Ko=600,wf="_blank",uc="http://localhost";class Yn{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ef="__/auth/handler",If="emulator/auth/handler",td=encodeURIComponent("fac");function Yo(v,f,m,w,T,x){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,h.Z)(function*(v,f,m,w,T,x){Y(v.config.authDomain,v,"auth-domain-config-required"),Y(v.config.apiKey,v,"invalid-api-key");const G={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:O.SDK_VERSION,eventId:T};if(f instanceof Gs){f.setDefaultLanguage(v.languageCode),G.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(G.customParameters=JSON.stringify(f.getCustomParameters()));for(const[st,St]of Object.entries(x||{}))G[st]=St}if(f instanceof Mo){const st=f.getScopes().filter(St=>""!==St);st.length>0&&(G.scopes=st.join(","))}v.tenantId&&(G.tid=v.tenantId);const ee=G;for(const st of Object.keys(ee))void 0===ee[st]&&delete ee[st];const Se=yield v._getAppCheckToken(),Ue=Se?`#${td}=${encodeURIComponent(Se)}`:"";return`${function Ut({config:v}){return v.emulator?de(v,If):`https://${v.authDomain}/${Ef}`}(v)}?${(0,V.xO)(ee).slice(1)}${Ue}`})).apply(this,arguments)}const Cs="webStorageSupport",Ds=class vm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Br,this._completeRedirectFn=ro,this._overrideRedirectResult=zo}_openPopup(f,m,w,T){var x=this;return(0,h.Z)(function*(){var G;_t(null===(G=x.eventManagers[f._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ee=yield Yo(f,m,w,Ge(),T);return function Xa(v,f,m,w=Sn,T=Ko){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ee="";const Se=Object.assign(Object.assign({},ar),{width:w.toString(),height:T.toString(),top:x,left:G}),Ue=(0,V.z$)().toLowerCase();m&&(ee=M(Ue)?wf:m),R(Ue)&&(f=f||uc,Se.scrollbars="yes");const st=Object.entries(Se).reduce((_r,[us,Ts])=>`${_r}${us}=${Ts},`,"");if(function wt(v=(0,V.z$)()){var f;return pt(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ue)&&"_self"!==ee)return function ed(v,f){const m=document.createElement("a");m.href=v,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",ee),new Yn(null);const St=window.open(f||"",ee,st);Y(St,v,"popup-blocked");try{St.focus()}catch{}return new Yn(St)}(f,ee,ws())})()}_openRedirect(f,m,w,T){var x=this;return(0,h.Z)(function*(){return yield x._originValidation(f),function Ha(v){yn().location.href=v}(yield Yo(f,m,w,Ge(),T)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:T,promise:x}=this.eventManagers[m];return T?Promise.resolve(T):(_t(x,"If manager is not set, promise should be"),x)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,h.Z)(function*(){const w=yield function Xl(v){return vf.apply(this,arguments)}(f),T=new ff(f);return w.register("authEvent",x=>(Y(x?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:T},m.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Cs,{type:Cs},T=>{var x;const G=null===(x=T?.[0])||void 0===x?void 0:x[Cs];void 0!==G&&m(!!G),me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ac(v){return qo.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return At()||P()||pt()}};class nd{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return Ze("unexpected MultiFactorSessionType")}}}class as extends nd{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new as(f)}_finalizeEnroll(f,m,w){return function Wu(v,f){return Xe(v,"POST","/v2/accounts/mfaEnrollment:finalize",we(v,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Uo(v,f){return Xe(v,"POST","/v2/accounts/mfaSignIn:finalize",we(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rd=(()=>{class v{constructor(){}static assertion(m){return as._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var oo="@firebase/auth";class bs{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{f(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const od=(0,V.Pz)("authIdTokenMaxAge")||300;let Df=null;const wm=v=>function(){var f=(0,h.Z)(function*(m){const w=m&&(yield m.getIdTokenResult()),T=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(T&&T>od)return;const x=w?.token;Df!==x&&(Df=x,yield fetch(v,{method:x?"POST":"DELETE",headers:x?{Authorization:`Bearer ${x}`}:{}}))});return function(m){return f.apply(this,arguments)}}();function lc(v=(0,O.getApp)()){const f=(0,O._getProvider)(v,"auth");if(f.isInitialized())return f.getImmediate();const m=function gr(v,f){const m=(0,O._getProvider)(v,"auth");if(m.isInitialized()){const T=m.getImmediate(),x=m.getOptions();if((0,V.vZ)(x,f??{}))return T;me(T,"already-initialized")}return m.initialize({options:f})}(v,{popupRedirectResolver:Ds,persistence:[jl,Zu,Br]}),w=(0,V.Pz)("authTokenSyncURL");if(w){const x=wm(w);(function La(v,f,m){(0,V.m9)(v).beforeAuthStateChanged(f,m)})(m,x,()=>x(m.currentUser)),function Gu(v,f,m,w){(0,V.m9)(v).onIdTokenChanged(f,m,w)}(m,G=>x(G))}const T=(0,V.q4)("auth");return T&&pn(m,`http://${T}`),m}!function sd(v){(0,O._registerComponent)(new ae.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),x=f.getProvider("app-check-internal"),{apiKey:G,authDomain:ee}=w.options;Y(G&&!G.includes(":"),"invalid-api-key",{appName:w.name});const Se={apiKey:G,authDomain:ee,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:js(v)},Ue=new gn(w,T,x,Se);return function ts(v,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(jn);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,f?.popupRedirectResolver)}(Ue,m),Ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ae.wA("auth-internal",f=>{const m=Xt(f.getProvider("auth").getImmediate());return new bs(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(oo,"0.23.2",function Xo(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(oo,"0.23.2","esm2017")}("Browser")},2090:(mt,Te,k)=>{k.d(Te,{$s:()=>jn,BH:()=>ve,G6:()=>de,L:()=>Pe,LL:()=>un,P0:()=>Fe,Pz:()=>le,Sg:()=>Oe,UG:()=>Ze,US:()=>ae,ZB:()=>q,ZR:()=>Xe,aH:()=>me,b$:()=>$t,eu:()=>Le,hl:()=>ye,jU:()=>_t,m9:()=>Kr,ne:()=>zt,pd:()=>Ir,q4:()=>_e,r3:()=>oi,ru:()=>Ge,tV:()=>H,uI:()=>Y,vZ:()=>rt,w1:()=>Bs,xO:()=>In,xb:()=>$s,z$:()=>Ne,zI:()=>Ce,zd:()=>Vr});const ne=function(U){const F=[];let R=0;for(let P=0;P<U.length;P++){let M=U.charCodeAt(P);M<128?F[R++]=M:M<2048?(F[R++]=M>>6|192,F[R++]=63&M|128):55296==(64512&M)&&P+1<U.length&&56320==(64512&U.charCodeAt(P+1))?(M=65536+((1023&M)<<10)+(1023&U.charCodeAt(++P)),F[R++]=M>>18|240,F[R++]=M>>12&63|128,F[R++]=M>>6&63|128,F[R++]=63&M|128):(F[R++]=M>>12|224,F[R++]=M>>6&63|128,F[R++]=63&M|128)}return F},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,F){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let M=0;M<U.length;M+=3){const j=U[M],ue=M+1<U.length,We=ue?U[M+1]:0,vt=M+2<U.length,pt=vt?U[M+2]:0;let hn=(15&We)<<2|pt>>6,At=63&pt;vt||(At=64,ue||(hn=64)),P.push(R[j>>2],R[(3&j)<<4|We>>4],R[hn],R[At])}return P.join("")},encodeString(U,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(U):this.encodeByteArray(ne(U),F)},decodeString(U,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(U):function(U){const F=[];let R=0,P=0;for(;R<U.length;){const M=U[R++];if(M<128)F[P++]=String.fromCharCode(M);else if(M>191&&M<224){const j=U[R++];F[P++]=String.fromCharCode((31&M)<<6|63&j)}else if(M>239&&M<365){const vt=((7&M)<<18|(63&U[R++])<<12|(63&U[R++])<<6|63&U[R++])-65536;F[P++]=String.fromCharCode(55296+(vt>>10)),F[P++]=String.fromCharCode(56320+(1023&vt))}else{const j=U[R++],ue=U[R++];F[P++]=String.fromCharCode((15&M)<<12|(63&j)<<6|63&ue)}}return F.join("")}(this.decodeStringToByteArray(U,F))},decodeStringToByteArray(U,F){this.init_();const R=F?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let M=0;M<U.length;){const j=R[U.charAt(M++)],We=M<U.length?R[U.charAt(M)]:0;++M;const pt=M<U.length?R[U.charAt(M)]:64;++M;const wt=M<U.length?R[U.charAt(M)]:64;if(++M,null==j||null==We||null==pt||null==wt)throw new Re;P.push(j<<2|We>>4),64!==pt&&(P.push(We<<4&240|pt>>2),64!==wt&&P.push(pt<<6&192|wt))}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(U){return function(U){const F=ne(U);return ae.encodeByteArray(F,!0)}(U).replace(/\./g,"")},H=function(U){try{return ae.decodeString(U,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function q(U,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return F}for(const R in F)!F.hasOwnProperty(R)||!ke(R)||(U[R]=q(U[R],F[R]));return U}function ke(U){return"__proto__"!==U}const Me=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=U&&H(U[1]);return F&&JSON.parse(F)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},_e=U=>{var F,R;return null===(R=null===(F=Me())||void 0===F?void 0:F.emulatorHosts)||void 0===R?void 0:R[U]},Fe=U=>{const F=_e(U);if(!F)return;const R=F.lastIndexOf(":");if(R<=0||R+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const P=parseInt(F.substring(R+1),10);return"["===F[0]?[F.substring(1,R-1),P]:[F.substring(0,R),P]},me=()=>{var U;return null===(U=Me())||void 0===U?void 0:U.config},le=U=>{var F;return null===(F=Me())||void 0===F?void 0:F[`_${U}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,R)=>{this.resolve=F,this.reject=R})}wrapCallback(F){return(R,P)=>{R?this.reject(R):this.resolve(P),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(R):F(R,P))}}}function Oe(U,F){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const P=F||"demo-project",M=U.iat||0,j=U.sub||U.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${P}`,aud:P,iat:M,exp:M+3600,auth_time:M,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},U);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(ue)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function Ze(){var U;const F=null===(U=Me())||void 0===U?void 0:U.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _t(){return"object"==typeof self&&self.self===self}function Ge(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function $t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Bs(){const U=Ne();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function de(){return!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ye(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise((U,F)=>{try{let R=!0;const P="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(P);M.onsuccess=()=>{M.result.close(),R||self.indexedDB.deleteDatabase(P),U(!0)},M.onupgradeneeded=()=>{R=!1},M.onerror=()=>{var j;F((null===(j=M.error)||void 0===j?void 0:j.message)||"")}}catch(R){F(R)}})}function Ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Xe extends Error{constructor(F,R,P){super(R),this.code=F,this.customData=P,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}}class un{constructor(F,R,P){this.service=F,this.serviceName=R,this.errors=P}create(F,...R){const P=R[0]||{},M=`${this.service}/${F}`,j=this.errors[F],ue=j?function ct(U,F){return U.replace(lt,(R,P)=>{const M=F[P];return null!=M?String(M):`<${P}?>`})}(j,P):"Error";return new Xe(M,`${this.serviceName}: ${ue} (${M}).`,P)}}const lt=/\{\$([^}]+)}/g;function oi(U,F){return Object.prototype.hasOwnProperty.call(U,F)}function $s(U){for(const F in U)if(Object.prototype.hasOwnProperty.call(U,F))return!1;return!0}function rt(U,F){if(U===F)return!0;const R=Object.keys(U),P=Object.keys(F);for(const M of R){if(!P.includes(M))return!1;const j=U[M],ue=F[M];if(En(j)&&En(ue)){if(!rt(j,ue))return!1}else if(j!==ue)return!1}for(const M of P)if(!R.includes(M))return!1;return!0}function En(U){return null!==U&&"object"==typeof U}function In(U){const F=[];for(const[R,P]of Object.entries(U))Array.isArray(P)?P.forEach(M=>{F.push(encodeURIComponent(R)+"="+encodeURIComponent(M))}):F.push(encodeURIComponent(R)+"="+encodeURIComponent(P));return F.length?"&"+F.join("&"):""}function Vr(U){const F={};return U.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[M,j]=P.split("=");F[decodeURIComponent(M)]=decodeURIComponent(j)}}),F}function Ir(U){const F=U.indexOf("?");if(!F)return"";const R=U.indexOf("#",F);return U.substring(F,R>0?R:void 0)}function zt(U,F){const R=new at(U,F);return R.subscribe.bind(R)}class at{constructor(F,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{F(this)}).catch(P=>{this.error(P)})}next(F){this.forEachObserver(R=>{R.next(F)})}error(F){this.forEachObserver(R=>{R.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,R,P){let M;if(void 0===F&&void 0===R&&void 0===P)throw new Error("Missing Observer.");M=function Cn(U,F){if("object"!=typeof U||null===U)return!1;for(const R of F)if(R in U&&"function"==typeof U[R])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:R,complete:P},void 0===M.next&&(M.next=tr),void 0===M.error&&(M.error=tr),void 0===M.complete&&(M.complete=tr);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),j}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,F)}sendOne(F,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{R(this.observers[F])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tr(){}const Rt=1e3,$n=2,On=144e5,Cr=.5;function jn(U,F=Rt,R=$n){const P=F*Math.pow(R,U),M=Math.round(Cr*P*(Math.random()-.5)*2);return Math.min(On,P+M)}function Kr(U){return U&&U._delegate?U._delegate:U}},7454:(mt,Te,k)=>{var h=k(4650);let V=null;function O(){return V}class ge{}const ae=new h.OlP("DocumentToken");let Re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const Pe=new h.OlP("Location Initialized");let H=(()=>{class n extends Re{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){$()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){$()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function q(){return new H((0,h.LFG)(ae))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let Ke=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Me)},providedIn:"root"}),n})();const X=new h.OlP("appBaseHref");let Me=(()=>{class n extends Ke{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+qe(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+qe(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Re),h.LFG(X,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_e=(()=>{class n extends Ke{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+qe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+qe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Re),h.LFG(X,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ae(ve(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function le(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=ke,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(h.LFG(Ke))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function me(){return new Fe((0,h.LFG)(Ke))}()},providedIn:"root"}),n})();function ve(n){return n.replace(/\/index.html$/,"")}function Io(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class gr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ts=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new gr(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),pn(g,i)}});for(let i=0,u=r.length;i<u;i++){const g=r.get(i).context;g.index=i,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{pn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function pn(n,e){n.context.$implicit=e.item}let Hs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ot,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ku("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ku("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ot{constructor(){this.$implicit=null,this.ngIf=null}}function ku(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class El{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Fu{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const bo=new Fu,To=new El;let $i=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return bo;if((0,h.F4k)(t))return To;throw function li(n,e){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ao="server";function Mo(n){return n===Ao}let Oh=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Yg((0,h.LFG)(ae),window)}),n})();class Yg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function kh(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ws(this.window.history)||Ws(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ws(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Fh{}class Yh extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gu extends Yh{static makeCurrent(){!function ne(n){V||(V=n)}(new Gu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Va(){return La=La||document.querySelector("base"),La?La.getAttribute("href"):null}();return null==t?null:function Q0(n){Ys=Ys||document.createElement("a"),Ys.setAttribute("href",n);const e=Ys.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){La=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Io(document.cookie,e)}}let Ys,La=null;const J0=new h.OlP("TRANSITION_ID"),Jh=[{provide:h.ip1,useFactory:function Qh(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[J0,ae,h.zs3],multi:!0}];let Ol=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const kl=new h.OlP("EventManagerPlugins");let Fl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kl),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Wu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Xh=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),No=(()=>{class n extends Xh{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Js={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oo=/%COMP%/g,ja=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Zu(n,e){return e.flat(100).map(t=>t.replace(Oo,n))}function sm(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Br=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Vl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Yu?i.applyToHost(t):i instanceof Ha&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const c=this.eventManager,g=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:u=new Yu(c,g,r,this.appId,_);break;case h.ifc.ShadowDom:return new yn(c,g,t,r);default:u=new Ha(c,g,r,_)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fl),h.LFG(No),h.LFG(h.AFp),h.LFG(ja))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Vl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Js[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ul(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ul(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Js[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Js[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,sm(r)):this.eventManager.addEventListener(e,t,sm(r))}}function Ul(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class yn extends Vl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Zu(i.id,i.styles);for(const c of u){const g=document.createElement("style");g.textContent=c,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ha extends Vl{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Zu(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Yu extends Ha{constructor(e,t,r,i,u){const c=i+"-"+r.id;super(e,t,r,u,c),this.contentAttr=function X0(n){return"_ngcontent-%COMP%".replace(Oo,n)}(c),this.hostAttr=function im(n){return"_nghost-%COMP%".replace(Oo,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let ef=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const za=["alt","control","meta","shift"],tf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rf=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),c="code."),za.forEach(I=>{const D=r.indexOf(I);D>-1&&(r.splice(D,1),c+=I+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=tf[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),za.forEach(c=>{c!==i&&(0,nf[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const am=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Fo(){Gu.makeCurrent()},multi:!0},{provide:ae,useFactory:function $l(){return(0,h.RDi)(document),document},deps:[]}]),Ga=new h.OlP(""),Wa=[{provide:h.rWj,useClass:class Qs{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const g=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],eo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Bl(){return new h.qLn},deps:[]},{provide:kl,useClass:ef,multi:!0,deps:[ae,h.R0b,h.Lbi]},{provide:kl,useClass:rf,multi:!0,deps:[ae]},{provide:Br,useClass:Br,deps:[Fl,No,h.AFp,ja]},{provide:h.FYo,useExisting:Br},{provide:Xh,useExisting:No},{provide:No,useClass:No,deps:[ae]},{provide:Fl,useClass:Fl,deps:[kl,h.R0b]},{provide:Fh,useClass:Ol,deps:[]},[]];let Vo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:J0,useExisting:h.AFp},Jh]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ga,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...eo,...Wa],imports:[qg,h.hGG]}),n})(),um=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Uo(){return new um((0,h.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var sn=k(8996),Ti=k(7669);function Je(...n){const e=(0,Ti.yG)(n);return(0,sn.D)(n,e)}var Si=k(7579);class Ai extends Si.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ec=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ar=k(9751);const{isArray:df}=Array,{getPrototypeOf:pm,prototype:ql,keys:jo}=Object;function tc(n){if(1===n.length){const e=n[0];if(df(e))return{args:e,keys:null};if(function to(n){return n&&"object"==typeof n&&pm(n)===ql}(e)){const t=jo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var no=k(4671),tt=k(4004);const{isArray:Zl}=Array;function Gi(n){return(0,tt.U)(e=>function hf(n,e){return Zl(e)?n(...e):n(e)}(n,e))}function Za(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Kn=k(5403),Kl=k(9672);function nc(...n){const e=(0,Ti.yG)(n),t=(0,Ti.jO)(n),{args:r,keys:i}=tc(n);if(0===r.length)return(0,sn.D)([],e);const u=new Ar.y(function Es(n,e,t=no.y){return r=>{Ho(e,()=>{const{length:i}=n,u=new Array(i);let c=i,g=i;for(let _=0;_<i;_++)Ho(e,()=>{const I=(0,sn.D)(n[_],e);let D=!1;I.subscribe((0,Kn.x)(r,S=>{u[_]=S,D||(D=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Za(i,c):no.y));return t?u.pipe(Gi(t)):u}function Ho(n,e,t){n?(0,Kl.f)(t,n,e):e()}var zo=k(8189);function Ka(...n){return function gm(){return(0,zo.J)(1)}()((0,sn.D)(n,(0,Ti.yG)(n)))}var rc=k(8421);function mm(n){return new Ar.y(e=>{(0,rc.Xf)(n()).subscribe(e)})}var Yl=k(9635),ic=k(576);function Ya(n,e){const t=(0,ic.m)(n)?n:()=>n,r=i=>i.error(t());return new Ar.y(e?i=>e.schedule(r,0,i):r)}var Jr=k(515),sc=k(727),yr=k(4482);function Go(){return(0,yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ym extends Ar.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sc.w0.EMPTY)}return e}refCount(){return Go()(this)}}function Tn(n,e){return(0,yr.e)((t,r)=>{let i=null,u=0,c=!1;const g=()=>c&&!i&&r.complete();t.subscribe((0,Kn.x)(r,_=>{i?.unsubscribe();let I=0;const D=u++;(0,rc.Xf)(n(_,D)).subscribe(i=(0,Kn.x)(r,S=>r.next(e?e(_,S,D,I++):S),()=>{i=null,g()}))},()=>{c=!0,g()}))})}function ro(n){return n<=0?()=>Jr.E:(0,yr.e)((e,t)=>{let r=0;e.subscribe((0,Kn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wo(...n){const e=(0,Ti.yG)(n);return(0,yr.e)((t,r)=>{(e?Ka(n,t,e):Ka(n,t)).subscribe(r)})}function Xr(n,e){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,Kn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Gn=k(5577);function Ql(n){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ff(n=oc){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function oc(){return new ec}function ss(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xr((i,u)=>n(i,u,r)):no.y,ro(1),t?Ql(e):ff(()=>new ec))}function io(n,e){return(0,ic.m)(e)?(0,Gn.z)(n,e,1):(0,Gn.z)(n,1)}function or(n,e,t){const r=(0,ic.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,yr.e)((i,u)=>{var c;null===(c=r.subscribe)||void 0===c||c.call(r);let g=!0;i.subscribe((0,Kn.x)(u,_=>{var I;null===(I=r.next)||void 0===I||I.call(r,_),u.next(_)},()=>{var _;g=!1,null===(_=r.complete)||void 0===_||_.call(r),u.complete()},_=>{var I;g=!1,null===(I=r.error)||void 0===I||I.call(r,_),u.error(_)},()=>{var _,I;g&&(null===(_=r.unsubscribe)||void 0===_||_.call(r)),null===(I=r.finalize)||void 0===I||I.call(r)}))}):no.y}function os(n){return(0,yr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Kn.x)(t,void 0,void 0,c=>{u=(0,rc.Xf)(n(c,os(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Qa(n,e){return(0,yr.e)(function nw(n,e,t,r,i){return(u,c)=>{let g=t,_=e,I=0;u.subscribe((0,Kn.x)(c,D=>{const S=I++;_=g?n(_,D,S):(g=!0,D),r&&c.next(_)},i&&(()=>{g&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}function ac(n){return n<=0?()=>Jr.E:(0,yr.e)((e,t)=>{let r=[];e.subscribe((0,Kn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xr((i,u)=>n(i,u,r)):no.y,ac(1),t?Ql(e):ff(()=>new ec))}function Ja(n){return(0,yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const gt="primary",Is=Symbol("RouteTitle");class _m{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zo(n){return new _m(n)}function mf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))i[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!yf(n[i],e[i]))return!1;return!0}function yf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function _f(n){return Array.prototype.concat.apply([],n)}function Xl(n){return n.length>0?n[n.length-1]:null}function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Sn(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,sn.D)(Promise.resolve(n)):Je(n)}const Ko=!1,wf={exact:function ed(n,e,t){if(!Ds(n.segments,e.segments)||!Yo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ed(n.children[r],e.children[r],t))return!1;return!0},subset:If},uc={exact:function Xa(n,e){return Wi(n,e)},subset:function Ef(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yf(n[t],e[t]))},ignored:()=>!0};function Yn(n,e,t){return wf[t.paths](n.root,e.root,t.matrixParams)&&uc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function If(n,e,t){return td(n,e,e.segments,t)}function td(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ds(i,t)||e.hasChildren()||!Yo(i,t,r))}if(n.segments.length===t.length){if(!Ds(n.segments,t)||!Yo(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!If(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ds(n.segments,i)&&Yo(n.segments,i,r)&&n.children[gt])&&td(n.children[gt],e,u,r)}}function Yo(n,e,t){return e.every((r,i)=>uc[t](n[i].parameters,r.parameters))}class Mi{constructor(e=new Ut([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zo(this.queryParams)),this._queryParamMap}toString(){return cc.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qo(this)}}class Cs{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zo(this.parameters)),this._parameterMap}toString(){return Cf(this)}}function Ds(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let as=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new rd},providedIn:"root"}),n})();class rd{parse(e){const t=new T(e);return new Mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Jo(e.root,!0)}`,r=function Df(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${oo(t)}=${oo(i)}`).join("&"):`${oo(t)}=${oo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function id(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cc=new rd;function Qo(n){return n.segments.map(e=>Cf(e)).join("/")}function Jo(n,e){if(!n.hasChildren())return Qo(n);if(e){const t=n.children[gt]?Jo(n.children[gt],!1):"",r=[];return ar(n.children,(i,u)=>{u!==gt&&r.push(`${u}:${Jo(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nd(n,e){let t=[];return ar(n.children,(r,i)=>{i===gt&&(t=t.concat(e(r,i)))}),ar(n.children,(r,i)=>{i!==gt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===gt?[Jo(n.children[gt],!1)]:[`${i}:${Jo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[gt]?`${Qo(n)}/${t[0]}`:`${Qo(n)}/(${t.join("//")})`}}function so(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oo(n){return so(n).replace(/%3B/gi,";")}function bs(n){return so(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xo(n){return decodeURIComponent(n)}function sd(n){return Xo(n.replace(/\+/g,"%20"))}function Cf(n){return`${bs(n.path)}${function od(n){return Object.keys(n).map(e=>`;${bs(e)}=${bs(n[e])}`).join("")}(n.parameters)}`}const wm=/^[^\/()?;=#]+/;function lc(n){const e=n.match(wm);return e?e[0]:""}const v=/^[^=?&#]+/,m=/^[^&#]+/;class T{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[gt]=new Ut(e,t)),r}parseSegment(){const e=lc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,Ko);return this.capture(e),new Cs(Xo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=lc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=lc(this.remaining);i&&(r=i,this.capture(r))}e[Xo(t)]=Xo(r)}parseQueryParam(e){const t=function f(n){const e=n.match(v);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function w(n){const e=n.match(m);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=sd(t),u=sd(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,Ko);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=gt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[gt]:new Ut([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,Ko)}}function x(n){return n.segments.length>0?new Ut([],{[gt]:n}):n}function G(n){const e={};for(const r of Object.keys(n.children)){const u=G(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ee(n){if(1===n.numberOfChildren&&n.children[gt]){const e=n.children[gt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function Se(n){return n instanceof Mi}const Ue=!1;function us(n,e,t,r,i){if(0===t.length)return xi(e.root,e.root,e.root,r,i);const u=function tu(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return ar(u.outlets,(_,I)=>{g[I]="string"==typeof _?_.split("/"):_}),[...i,{outlets:g}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,u]},[]);return new dc(t,e,r)}(t);return u.toRoot()?xi(e.root,e.root,new Ut([],{}),r,i):function c(_){const I=function fc(n,e,t,r){if(n.isAbsolute)return new Ss(e.root,!0,0);if(-1===r)return new Ss(t,t===e.root,0);return function ea(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new h.vHH(4005,Ue&&"Invalid number of '../'");i=r.segments.length}return new Ss(r,!1,i-u)}(t,r+(Ts(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),D=I.processChildren?As(I.segmentGroup,I.index,u.commands):ta(I.segmentGroup,I.index,u.commands);return xi(e.root,I.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function Ts(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eu(n){return"object"==typeof n&&null!=n&&n.outlets}function xi(n,e,t,r,i){let c,u={};r&&ar(r,(_,I)=>{u[I]=Array.isArray(_)?_.map(D=>`${D}`):`${_}`}),c=n===e?t:ad(n,e,t);const g=x(G(c));return new Mi(g,u,i)}function ad(n,e,t){const r={};return ar(n.children,(i,u)=>{r[u]=i===e?t:ad(i,e,t)}),new Ut(n.segments,r)}class dc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ts(r[0]))throw new h.vHH(4003,Ue&&"Root segment cannot have matrix parameters");const i=r.find(eu);if(i&&i!==Xl(r))throw new h.vHH(4004,Ue&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ss{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ta(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return As(n,e,t);const r=function Em(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],g=t[r];if(eu(g))break;const _=`${g}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!Im(_,I,c))return u;r+=2}else{if(!Im(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ut(n.segments.slice(0,r.pathIndex),{});return u.children[gt]=new Ut(n.segments.slice(r.pathIndex),n.children),As(u,0,i)}return r.match&&0===i.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?ud(n,e,t):r.match?As(n,0,i):ud(n,e,t)}function As(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function pc(n){return eu(n[0])?n[0].outlets:{[gt]:n}}(t),i={};if(!r[gt]&&n.children[gt]&&1===n.numberOfChildren&&0===n.children[gt].segments.length){const u=As(n.children[gt],e,t);return new Ut(n.segments,u.children)}return ar(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=ta(n.children[c],e,u))}),ar(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Ut(n.segments,i)}}function ud(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(eu(u)){const _=cd(u.outlets);return new Ut(r,_)}if(0===i&&Ts(t[0])){r.push(new Cs(n.segments[e].path,rw(t[0]))),i++;continue}const c=eu(u)?u.outlets[gt]:`${u}`,g=i<t.length-1?t[i+1]:null;c&&g&&Ts(g)?(r.push(new Cs(c,rw(g))),i+=2):(r.push(new Cs(c,{})),i++)}return new Ut(r,{})}function cd(n){const e={};return ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ud(new Ut([],{}),0,t))}),e}function rw(n){const e={};return ar(n,(t,r)=>e[r]=`${t}`),e}function Im(n,e,t){return n==t.path&&Wi(e,t.parameters)}const ld="imperative";class Ms{constructor(e,t){this.id=e,this.url=t}}class Cm extends Ms{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class na extends Ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dd extends Ms{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nu extends Ms{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class hd extends Ms{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gc extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QD extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JD extends Ms{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wP extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XD extends Ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dm{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bm{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sw{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let tb=(()=>{class n{createUrlTree(t,r,i,u,c,g){return us(t||r.root,i,u,c,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),rb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return tb.\u0275fac(e)},providedIn:"root"}),n})();class uw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=xs(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xs(e,this._root).map(t=>t.value)}}function Sm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sm(n,t);if(r)return r}return null}function xs(n,e){if(n===e.value)return[e];for(const t of e.children){const r=xs(n,t);if(r.length)return r.unshift(e),r}return[]}class Ri{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function mc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ib extends uw{constructor(e,t){super(e),this.snapshot=t,Am(this,e)}toString(){return this.snapshot.toString()}}function sb(n,e){const t=function EP(n,e){const c=new Tf([],{},{},"",{},gt,e,null,n.root,-1,{});return new lw("",new Ri(c,[]))}(n,e),r=new Ai([new Cs("",{})]),i=new Ai({}),u=new Ai({}),c=new Ai({}),g=new Ai(""),_=new fd(r,i,c,g,u,gt,e,t.root);return _.snapshot=t.root,new ib(new Ri(_,[]),t)}class fd{constructor(e,t,r,i,u,c,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=g,this.title=this.data?.pipe((0,tt.U)(I=>I[Is]))??Je(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,tt.U)(e=>Zo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,tt.U)(e=>Zo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ob(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function cw(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Tf{get title(){return this.data?.[Is]}constructor(e,t,r,i,u,c,g,_,I,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=g,this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lw extends uw{constructor(e,t){super(t),this.url=e,Am(this,t)}toString(){return dw(this._root)}}function Am(n,e){e.value._routerState=n,e.children.forEach(t=>Am(n,t))}function dw(n){const e=n.children.length>0?` { ${n.children.map(dw).join(", ")} } `:"";return`${n.value}${e}`}function pd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wi(e.params,t.params)||n.params.next(t.params),function Jl(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function cs(n,e){const t=Wi(n.params,e.params)&&function vm(n,e){return Ds(n,e)&&n.every((t,r)=>Wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||cs(n.parent,e.parent))}function yc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function hw(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return yc(n,r,i);return yc(n,r)})}(n,e,t);return new Ri(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>yc(n,g)),c}}const r=function fw(n){return new fd(new Ai(n.url),new Ai(n.params),new Ai(n.queryParams),new Ai(n.fragment),new Ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>yc(n,u));return new Ri(r,i)}}const pw="ngNavigationCancelingError";function ab(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Se(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ub(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ub(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pw]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Sf(n){return Af(n)&&Se(n.url)}function Af(n){return n&&n[pw]}class IP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Mf,this.attachRef=null}}let Mf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new IP,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const md=!1;let Mm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Mf),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,md);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,md);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,md);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,md);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new cb(t,g,i.injector);if(r&&function lb(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(c);this.activated=i.createComponent(I,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class cb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fd?this.route:e===Mf?this.childContexts:this.parent.get(e,t)}}let xm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Mm],encapsulation:2}),n})();function Rm(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function xf(n){const e=n.children&&n.children.map(xf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==gt&&(t.component=xm),t}function qi(n){return n.outlet||gt}function mw(n,e){const t=n.filter(r=>qi(r)===e);return t.push(...n.filter(r=>qi(r)!==e)),t}function yd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yw{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=mc(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),ar(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=mc(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=mc(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=mc(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new sw(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(pd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),pd(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=yd(i.snapshot),_=g?.get(h._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=g,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class pb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Om{constructor(e,t){this.component=e,this.route=t}}function _d(n,e,t){const r=n._root;return _c(r,e?e._root:null,t,[r.value])}function ru(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function _c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=mc(e);return n.children.forEach(c=>{(function _w(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function gb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ds(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ds(n.url,e.url)||!Wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cs(n,e)||!Wi(n.queryParams,e.queryParams);default:return!cs(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new pb(r)):(u.data=c.data,u._resolvedData=c._resolvedData),_c(n,e,u.component?g?g.children:null:t,r,i),_&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new Om(g.outlet.component,c))}else c&&vd(e,g,i),i.canActivateChecks.push(new pb(r)),_c(n,null,u.component?g?g.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),ar(u,(c,g)=>vd(c,t.getContext(g),i)),i}function vd(n,e,t){const r=mc(n),i=n.value;ar(r,(u,c)=>{vd(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Om(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vc(n){return"function"==typeof n}function ao(n){return n instanceof ec||"EmptyError"===n?.name}const Rf=Symbol("INITIAL_VALUE");function ra(){return Tn(n=>nc(n.map(e=>e.pipe(ro(1),Wo(Rf)))).pipe((0,tt.U)(e=>{for(const t of e)if(!0!==t){if(t===Rf)return Rf;if(!1===t||t instanceof Mi)return t}return!0}),Xr(e=>e!==Rf),ro(1)))}function $m(n){return(0,Yl.z)(or(e=>{if(Se(e))throw ab(0,e)}),(0,tt.U)(e=>!0===e))}const jm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Iw(n,e,t,r,i){const u=Hm(n,e,t);return u.matched?function wc(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(c=>{const g=ru(c,n);return Sn(function Vm(n){return n&&vc(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(ra(),$m()):Je(!0)}(r=Rm(e,r),e,t).pipe((0,tt.U)(c=>!0===c?u:{...jm})):Je(u)}function Hm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...jm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mf)(t,n,e);if(!i)return{...jm};const u={};ar(i.posParams,(g,_)=>{u[_]=g.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Ec(n,e,t,r){if(t.length>0&&function Ib(n,e,t){return t.some(r=>zm(n,e,r)&&qi(r)!==gt)}(n,t,r)){const u=new Ut(e,function Cw(n,e,t,r){const i={};i[gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&qi(u)!==gt){const c=new Ut([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[qi(u)]=c}return i}(n,e,r,new Ut(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Dw(n,e,t){return t.some(r=>zm(n,e,r))}(n,t,r)){const u=new Ut(n.segments,function Eb(n,e,t,r,i){const u={};for(const c of r)if(zm(n,t,c)&&!i[qi(c)]){const g=new Ut([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[qi(c)]=g}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Ut(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function zm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bw(n,e,t,r){return!!(qi(n)===r||r!==gt&&zm(e,t,n))&&("**"===n.path||Hm(e,n,t).matched)}function Ic(n,e,t){return 0===e.length&&!n.children[t]}const Of=!1;class uo{constructor(e){this.segmentGroup=e||null}}class Cc{constructor(e){this.urlTree=e}}function wd(n){return Ya(new uo(n))}function Gm(n){return Ya(new Cc(n))}class Tw{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Ec(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,gt).pipe((0,tt.U)(u=>this.createUrlTree(G(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(os(u=>{if(u instanceof Cc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof uo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,gt).pipe((0,tt.U)(i=>this.createUrlTree(G(i),e.queryParams,e.fragment))).pipe(os(i=>{throw i instanceof uo?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Of)}createUrlTree(e,t,r){const i=x(e);return new Mi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,tt.U)(u=>new Ut([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,sn.D)(i).pipe(io(u=>{const c=r.children[u],g=mw(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,tt.U)(_=>({segment:_,outlet:u})))}),Qa((u,c)=>(u[c.outlet]=c.segment,u),{}),qo())}expandSegment(e,t,r,i,u,c){return(0,sn.D)(r).pipe(io(g=>this.expandSegmentAgainstRoute(e,t,r,g,i,u,c).pipe(os(I=>{if(I instanceof uo)return Je(null);throw I}))),ss(g=>!!g),os((g,_)=>{if(ao(g))return Ic(t,i,u)?Je(new Ut([],{})):wd(t);throw g}))}expandSegmentAgainstRoute(e,t,r,i,u,c,g){return bw(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):wd(t):wd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gm(u):this.lineralizeSegments(r,u).pipe((0,Gn.z)(c=>{const g=new Ut(c,{});return this.expandSegment(e,g,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:g,consumedSegments:_,remainingSegments:I,positionalParamSegments:D}=Hm(t,i,u);if(!g)return wd(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?Gm(S):this.lineralizeSegments(i,S).pipe((0,Gn.z)(L=>this.expandSegment(e,t,r,L.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=Rm(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,tt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Ut(i,{})))):Je(new Ut(i,{}))):Iw(t,r,i,e).pipe(Tn(({matched:c,consumedSegments:g,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Gn.z)(D=>{const S=D.injector??e,L=D.routes,{segmentGroup:B,slicedSegments:J}=Ec(t,g,_,L),fe=new Ut(B.segments,B.children);if(0===J.length&&fe.hasChildren())return this.expandChildren(S,L,fe).pipe((0,tt.U)(ot=>new Ut(g,ot)));if(0===L.length&&0===J.length)return Je(new Ut(g,{}));const pe=qi(r)===u;return this.expandSegment(S,fe,L,J,pe?gt:u,!0).pipe((0,tt.U)(Qe=>new Ut(g.concat(Qe.segments),Qe.children)))})):wd(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function wb(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(c=>{const g=ru(c,n);return Sn(function Fm(n){return n&&vc(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(ra(),$m())}(e,t,r).pipe((0,Gn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(or(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Db(n){return Ya(ub(Of,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[gt])return e.redirectTo,Ya(new h.vHH(4e3,Of));i=i.children[gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Mi(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ar(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[u]=t[g]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return ar(t.children,(g,_)=>{c[_]=this.createSegmentGroup(e,g,r,i)}),new Ut(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Of);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Wm{}class Ed{constructor(e,t,r,i,u,c,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.urlSerializer=g}recognize(){const e=Ec(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,gt).pipe((0,tt.U)(t=>{if(null===t)return null;const r=new Tf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ri(r,t),u=new lw(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=ob(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,sn.D)(Object.keys(r.children)).pipe(io(i=>{const u=r.children[i],c=mw(t,i);return this.processSegmentGroup(e,c,u,i)}),Qa((i,u)=>i&&u?(i.push(...u),i):null),function pf(n,e=!1){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,Kn.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),Ql(null),qo(),(0,tt.U)(i=>{if(null===i)return null;const u=Aw(i);return function Sb(n){n.sort((e,t)=>e.value.outlet===gt?-1:t.value.outlet===gt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,sn.D)(t).pipe(io(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),ss(c=>!!c),os(c=>{if(ao(c))return Ic(r,i,u)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!bw(t,r,i,u))return Je(null);let c;if("**"===t.path){const g=i.length>0?Xl(i).parameters:{},_=xw(r)+i.length;c=Je({snapshot:new Tf(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rs(t),qi(t),t.component??t._loadedComponent??null,t,Mw(r),_,Rw(t)),consumedSegments:[],remainingSegments:[]})}else c=Iw(r,t,i,e).pipe((0,tt.U)(({matched:g,consumedSegments:_,remainingSegments:I,parameters:D})=>{if(!g)return null;const S=xw(r)+_.length;return{snapshot:new Tf(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rs(t),qi(t),t.component??t._loadedComponent??null,t,Mw(r),S,Rw(t)),consumedSegments:_,remainingSegments:I}}));return c.pipe(Tn(g=>{if(null===g)return Je(null);const{snapshot:_,consumedSegments:I,remainingSegments:D}=g;e=t._injector??e;const S=t._loadedInjector??e,L=function Ab(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:J}=Ec(r,I,D,L.filter(pe=>void 0===pe.redirectTo));if(0===J.length&&B.hasChildren())return this.processChildren(S,L,B).pipe((0,tt.U)(pe=>null===pe?null:[new Ri(_,pe)]));if(0===L.length&&0===J.length)return Je([new Ri(_,[])]);const fe=qi(t)===u;return this.processSegment(S,L,B,J,fe?gt:u).pipe((0,tt.U)(pe=>null===pe?null:[new Ri(_,pe)]))}))}}function Mb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Aw(n){const e=[],t=new Set;for(const r of n){if(!Mb(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Aw(r.children);e.push(new Ri(r.value,i))}return e.filter(r=>!t.has(r))}function Mw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Rs(n){return n.data||{}}function Rw(n){return n.resolve||{}}function Zm(n){return"string"==typeof n.title||null===n.title}function Km(n){return Tn(e=>{const t=n(e);return t?(0,sn.D)(t).pipe((0,tt.U)(()=>e)):Je(e)})}const Dc=new h.OlP("ROUTES");let Qm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Sn(t.loadComponent()).pipe((0,tt.U)(Ow),or(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ja(()=>{this.componentLoaders.delete(t)})),i=new ym(r,()=>new Si.x).pipe(Go());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,tt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,I,D=!1;Array.isArray(g)?I=g:(_=g.create(t).injector,I=_f(_.get(Dc,[],h.XFs.Self|h.XFs.Optional)));return{routes:I.map(xf),injector:_}}),Ja(()=>{this.childrenLoaders.delete(r)})),c=new ym(u,()=>new Si.x).pipe(Go());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Sn(t()).pipe((0,tt.U)(Ow),(0,Gn.z)(r=>r instanceof h.YKP||Array.isArray(r)?Je(r):(0,sn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ow(n){return function ls(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ff=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Si.x,this.configLoader=(0,h.f3M)(Qm),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(as),this.rootContexts=(0,h.f3M)(Mf),this.navigationId=0,this.afterPreactivation=()=>Je(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new eb(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Dm(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ai({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ld,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xr(r=>0!==r.id),(0,tt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Tn(r=>{let i=!1,u=!1;return Je(r).pipe(or(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Tn(c=>{const g=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new nu(c.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),Jr.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return kw(c.source)&&(t.browserUrlTree=c.extractedUrl),Je(c).pipe(Tn(D=>{const S=this.transitions?.getValue();return this.events.next(new Cm(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),S!==this.transitions?.getValue()?Jr.E:Promise.resolve(D)}),function Sw(n,e,t,r){return Tn(i=>function bb(n,e,t,r,i){return new Tw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,tt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),or(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function Rb(n,e,t,r,i){return(0,Gn.z)(u=>function qm(n,e,t,r,i,u,c="emptyOnly"){return new Ed(n,e,t,r,i,c,u).recognize().pipe(Tn(g=>null===g?function Tb(n){return new Ar.y(e=>e.error(n))}(new Wm):Je(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,tt.U)(c=>({...u,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),or(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(L,D)}t.browserUrlTree=D.urlAfterRedirects}const S=new gc(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:S,source:L,restoredState:B,extras:J}=c,fe=new Cm(D,this.urlSerializer.serialize(S),L,B);this.events.next(fe);const pe=sb(S,this.rootComponentType).snapshot;return Je(r={...c,targetSnapshot:pe,urlAfterRedirects:S,extras:{...J,skipLocationChange:!1,replaceUrl:!1}})}{const D="";return this.events.next(new nu(c.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),Jr.E}}),or(c=>{const g=new QD(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(g)}),(0,tt.U)(c=>r={...c,guards:_d(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function Pf(n,e){return(0,Gn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Je({...t,guardsResult:!0}):function _b(n,e,t,r){return(0,sn.D)(n).pipe((0,Gn.z)(i=>function vb(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(g=>{const _=yd(e)??i,I=ru(g,_);return Sn(function mb(n){return n&&vc(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(ss())})).pipe(ra()):Je(!0)}(i.component,i.route,t,e,r)),ss(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Gn.z)(g=>g&&function vw(n){return"boolean"==typeof n}(g)?function Um(n,e,t,r){return(0,sn.D)(e).pipe(io(i=>Ka(function iu(n,e){return null!==n&&e&&e(new iw(n)),Je(!0)}(i.route.parent,r),function Nf(n,e){return null!==n&&e&&e(new bm(n)),Je(!0)}(i.route,r),function Bm(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function km(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>mm(()=>Je(c.guards.map(_=>{const I=yd(c.node)??t,D=ru(_,I);return Sn(function Lm(n){return n&&vc(n.canActivateChild)}(D)?D.canActivateChild(r,n):I.runInContext(()=>D(r,n))).pipe(ss())})).pipe(ra())));return Je(u).pipe(ra())}(n,i.path,t),function Ew(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(u=>mm(()=>{const c=yd(e)??t,g=ru(u,c);return Sn(function bP(n){return n&&vc(n.canActivate)}(g)?g.canActivate(e,n):c.runInContext(()=>g(e,n))).pipe(ss())}));return Je(i).pipe(ra())}(n,i.route,t))),ss(i=>!0!==i,!0))}(r,u,n,e):Je(g)),(0,tt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,c=>this.events.next(c)),or(c=>{if(r.guardsResult=c.guardsResult,Se(c.guardsResult))throw ab(0,c.guardsResult);const g=new JD(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(g)}),Xr(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),Km(c=>{if(c.guards.canActivateChecks.length)return Je(c).pipe(or(g=>{const _=new wP(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Tn(g=>{let _=!1;return Je(g).pipe(function TP(n,e){return(0,Gn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let u=0;return(0,sn.D)(i).pipe(io(c=>function SP(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!Zm(i)&&(u[Is]=i.title),function Pw(n,e,t,r){const i=function AP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const u={};return(0,sn.D)(i).pipe((0,Gn.z)(c=>function Nw(n,e,t,r){const i=yd(e)??r,u=ru(n,i);return Sn(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(ss(),or(g=>{u[c]=g}))),ac(1),function gf(n){return(0,tt.U)(()=>n)}(u),os(c=>ao(c)?Jr.E:Ya(c)))}(u,n,e,r).pipe((0,tt.U)(c=>(n._resolvedData=c,n.data=ob(n,t).resolve,i&&Zm(i)&&(n.data[Is]=i.title),null)))}(c.route,r,n,e)),or(()=>u++),ac(1),(0,Gn.z)(c=>u===i.length?Je(t):Jr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),or({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),or(g=>{const _=new XD(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),Km(c=>{const g=_=>{const I=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(_.routeConfig).pipe(or(D=>{_.component=D}),(0,tt.U)(()=>{})));for(const D of _.children)I.push(...g(D));return I};return nc(g(c.targetSnapshot.root)).pipe(Ql(),ro(1))}),Km(()=>this.afterPreactivation()),(0,tt.U)(c=>{const g=function gd(n,e,t){const r=yc(n,e._root,t?t._root:void 0);return new ib(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:g}}),or(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,tt.U)(r=>(new yw(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),ro(1),or({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new na(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Ja(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),os(c=>{if(u=!0,Af(c)){Sf(c)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new dd(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(g),Sf(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||kw(r.source)};t.scheduleNavigation(_,ld,null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new hd(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(c))}catch(_){r.reject(_)}}return Jr.E}))}))}cancelNavigationTransition(t,r,i){const u=new dd(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kw(n){return n!==ld}let Fw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===gt);return r}getResolvedTitleForRoute(t){return t.data[Is]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Pb)},providedIn:"root"}),n})(),Pb=(()=>{class n extends Fw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(um))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ob)},providedIn:"root"}),n})();class Nb{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ob=(()=>{class n extends Nb{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tt=new h.OlP("",{providedIn:"root",factory:()=>({})});let Vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Uw)},providedIn:"root"}),n})(),Uw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fb(n){throw n}function Lb(n,e,t){return e.parse("/")}const Bw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Tt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Fb,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Lb,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(Vw),this.routeReuseStrategy=(0,h.f3M)(Lw),this.urlCreationStrategy=(0,h.f3M)(rb),this.titleStrategy=(0,h.f3M)(Fw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=_f((0,h.f3M)(Dc,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(Ff),this.urlSerializer=(0,h.f3M)(as),this.location=(0,h.f3M)(Fe),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sb(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ld,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,c,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(xf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:_}=r,I=_?this.currentUrlTree.fragment:c;let D=null;switch(g){case"merge":D={...this.currentUrlTree.queryParams,...u};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=u||null}return null!==D&&(D=this.removeEmptyProps(D)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,D,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Se(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,ld,null,r)}navigate(t,r={skipLocationChange:!1}){return function Ub(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Bw}:!1===r?{...Vb}:r,Se(t))return Yn(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Yn(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let g,_,I,D;return c?(g=c.resolve,_=c.reject,I=c.promise):I=new Promise((S,L)=>{g=S,_=L}),D="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vf=(()=>{class n{constructor(t,r,i,u,c,g){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.locationStrategy=g,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Si.x;const _=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(I=>{I instanceof na&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mr),h.Y36(fd),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ke))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),Bb=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,u,c){this.router=t,this.element=r,this.renderer=i,this.cdr=u,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof na&&this.update()})}ngAfterContentInit(){Je(this.links.changes,Je(null)).pipe((0,zo.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,sn.D)(t).pipe((0,zo.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function $w(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mr),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Vf,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&h.Suo(i,Vf,5),2&t){let u;h.iGM(u=h.CRH())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class Jm{}let Xm=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Xr(t=>t instanceof na),io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,g=u._loadedInjector??c;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(c,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,sn.D)(i).pipe((0,zo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const u=i.pipe((0,Gn.z)(c=>null===c?Je(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,sn.D)([u,c]).pipe((0,zo.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mr),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Jm),h.LFG(Qm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dd=new h.OlP("");let jw=(()=>{class n{constructor(t,r,i,u,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Cm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof na&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Tm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var Zi=(()=>((Zi=Zi||{})[Zi.COMPLETE=0]="COMPLETE",Zi[Zi.FAILED=1]="FAILED",Zi[Zi.REDIRECTING=2]="REDIRECTING",Zi))();const bd=!1;function su(n,e){return{\u0275kind:n,\u0275providers:e}}const ty=new h.OlP("",{providedIn:"root",factory:()=>!1});function Td(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Mr),i=n.get(Hw);1===n.get(Uf)&&r.initialNavigation(),n.get(zw,null,h.XFs.Optional)?.setUpPreloading(),n.get(Dd,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Hw=new h.OlP(bd?"bootstrap done indicator":"",{factory:()=>new Si.x}),Uf=new h.OlP(bd?"initial navigation":"",{providedIn:"root",factory:()=>1});function zb(){let n=[];return n=bd?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Mr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function ow(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],su(1,n)}const zw=new h.OlP(bd?"router preloader":"");function Gb(n){return su(0,[{provide:zw,useExisting:Xm},{provide:Jm,useExisting:n}])}const Sc=!1,Zb=new h.OlP(Sc?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ny=[Fe,{provide:as,useClass:rd},Mr,Mf,{provide:fd,useFactory:function ey(n){return n.routerState.root},deps:[Mr]},Qm,Sc?{provide:ty,useValue:!0}:[]];function Kb(){return new h.PXZ("Router",Mr)}let Ww=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ny,Sc&&r?.enableTracing?zb().\u0275providers:[],{provide:Dc,multi:!0,useValue:t},{provide:Zb,useFactory:Zw,deps:[[Mr,new h.FiY,new h.tp0]]},{provide:Tt,useValue:r||{}},r?.useHash?{provide:Ke,useClass:_e}:{provide:Ke,useClass:Me},{provide:Dd,useFactory:()=>{const n=(0,h.f3M)(Oh),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Tt),r=(0,h.f3M)(Ff),i=(0,h.f3M)(as);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jw(i,r,n,e,t)}},r?.preloadingStrategy?Gb(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Kb},r?.initialNavigation?Qb(r):[],[{provide:Kw,useFactory:Td},{provide:h.tb,multi:!0,useExisting:Kw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Dc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zb,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[xm]}),n})();function Zw(n){if(Sc&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Qb(n){return["disabled"===n.initialNavigation?su(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Mr);return()=>{e.setUpLocationChangeListener()}}},{provide:Uf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?su(2,[{provide:Uf,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Mr),u=e.get(Hw);(function xP(n,e){n.events.pipe(Xr(t=>t instanceof na||t instanceof dd||t instanceof hd||t instanceof nu),(0,tt.U)(t=>t instanceof na||t instanceof nu?Zi.COMPLETE:t instanceof dd&&(0===t.code||1===t.code)?Zi.REDIRECTING:Zi.FAILED),Xr(t=>t!==Zi.REDIRECTING),ro(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Ff).afterPreactivation=()=>(r(!0),u.closed?Je(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const Kw=new h.OlP(Sc?"Router Initializer":"");class Mc{}class ou{}class Ki{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),i.length>0){const u=t.toLowerCase();this.headers.set(u,i),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ki?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ki;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ki?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(g=>-1===u.indexOf(g)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Yw{encodeKey(e){return ay(e)}encodeValue(e){return ay(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sy=/%(\d[a-f0-9])/gi,oy={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ay(n){return encodeURIComponent(n).replace(sy,(e,t)=>oy[t]??e)}function xc(n){return`${n}`}class ia{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Yw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iy(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,g]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],_=t.get(c)||[];_.push(g),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(xc):[xc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ia({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(xc(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Qw{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function uy(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function cy(n){return typeof Blob<"u"&&n instanceof Blob}function Jw(n){return typeof FormData<"u"&&n instanceof FormData}class xr{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Jb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ki),this.context||(this.context=new Qw),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+c}}else this.params=new ia,this.urlWithParams=t}serializeBody(){return null===this.body?null:uy(this.body)||cy(this.body)||Jw(this.body)||function Xb(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ia?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Jw(this.body)?null:cy(this.body)?this.body.type||null:uy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ia?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,I=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((S,L)=>S.set(L,e.setHeaders[L]),_)),e.setParams&&(I=Object.keys(e.setParams).reduce((S,L)=>S.set(L,e.setParams[L]),I)),new xr(t,r,u,{params:I,headers:_,context:D,reportProgress:g,responseType:i,withCredentials:c})}}var Qn=(()=>((Qn=Qn||{})[Qn.Sent=0]="Sent",Qn[Qn.UploadProgress=1]="UploadProgress",Qn[Qn.ResponseHeader=2]="ResponseHeader",Qn[Qn.DownloadProgress=3]="DownloadProgress",Qn[Qn.Response=4]="Response",Qn[Qn.User=5]="User",Qn))();class ly{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ki,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Xw extends ly{constructor(e={}){super(e),this.type=Qn.ResponseHeader}clone(e={}){return new Xw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Rc extends ly{constructor(e={}){super(e),this.type=Qn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Rc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class dy extends ly{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function hy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let eE=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof xr)u=t;else{let _,I;_=i.headers instanceof Ki?i.headers:new Ki(i.headers),i.params&&(I=i.params instanceof ia?i.params:new ia({fromObject:i.params})),u=new xr(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:I,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Je(u).pipe(io(_=>this.handler.handle(_)));if(t instanceof xr||"events"===i.observe)return c;const g=c.pipe(Xr(_=>_ instanceof Rc));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,tt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,tt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,tt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,tt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ia).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,hy(i,r))}post(t,r,i={}){return this.request("POST",t,hy(i,r))}put(t,r,i={}){return this.request("PUT",t,hy(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function tE(n,e){return e(n)}function nE(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const tT=new h.OlP("HTTP_INTERCEPTORS"),au=new h.OlP("HTTP_INTERCEPTOR_FNS");function nT(){let n=null;return(e,t)=>(null===n&&(n=((0,h.f3M)(tT,{optional:!0})??[]).reduceRight(nE,tE)),n(e,t))}let rE=(()=>{class n extends Mc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(au)));this.chain=r.reduceRight((i,u)=>function eT(n,e,t){return(r,i)=>t.runInContext(()=>e(r,u=>n(u,i)))}(i,u,this.injector),tE)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ou),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fy=/^\)\]\}',?\n/;let aE=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ar.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((B,J)=>i.setRequestHeader(B,J.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&i.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();i.responseType="json"!==B?B:"text"}const u=t.serializeBody();let c=null;const g=()=>{if(null!==c)return c;const B=i.statusText||"OK",J=new Ki(i.getAllResponseHeaders()),fe=function sT(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Xw({headers:J,status:i.status,statusText:B,url:fe}),c},_=()=>{let{headers:B,status:J,statusText:fe,url:pe}=g(),Ve=null;204!==J&&(Ve=typeof i.response>"u"?i.responseText:i.response),0===J&&(J=Ve?200:0);let Qe=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Ve){const ot=Ve;Ve=Ve.replace(fy,"");try{Ve=""!==Ve?JSON.parse(Ve):null}catch(Ct){Ve=ot,Qe&&(Qe=!1,Ve={error:Ct,text:Ve})}}Qe?(r.next(new Rc({body:Ve,headers:B,status:J,statusText:fe,url:pe||void 0})),r.complete()):r.error(new dy({error:Ve,headers:B,status:J,statusText:fe,url:pe||void 0}))},I=B=>{const{url:J}=g(),fe=new dy({error:B,status:i.status||0,statusText:i.statusText||"Unknown Error",url:J||void 0});r.error(fe)};let D=!1;const S=B=>{D||(r.next(g()),D=!0);let J={type:Qn.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(J.total=B.total),"text"===t.responseType&&i.responseText&&(J.partialText=i.responseText),r.next(J)},L=B=>{let J={type:Qn.UploadProgress,loaded:B.loaded};B.lengthComputable&&(J.total=B.total),r.next(J)};return i.addEventListener("load",_),i.addEventListener("error",I),i.addEventListener("timeout",I),i.addEventListener("abort",I),t.reportProgress&&(i.addEventListener("progress",S),null!==u&&i.upload&&i.upload.addEventListener("progress",L)),i.send(u),r.next({type:Qn.Sent}),()=>{i.removeEventListener("error",I),i.removeEventListener("abort",I),i.removeEventListener("load",_),i.removeEventListener("timeout",I),t.reportProgress&&(i.removeEventListener("progress",S),null!==u&&i.upload&&i.upload.removeEventListener("progress",L)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Pc=new h.OlP("XSRF_ENABLED"),Ad=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jf=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class oT{}let uE=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Io(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(h.Lbi),h.LFG(Ad))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function cE(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(Pc)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(oT).getToken(),i=(0,h.f3M)(jf);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Fn=(()=>((Fn=Fn||{})[Fn.Interceptors=0]="Interceptors",Fn[Fn.LegacyInterceptors=1]="LegacyInterceptors",Fn[Fn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Fn[Fn.NoXsrfProtection=3]="NoXsrfProtection",Fn[Fn.JsonpSupport=4]="JsonpSupport",Fn[Fn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Fn))();function sa(n,e){return{\u0275kind:n,\u0275providers:e}}function lo(...n){const e=[eE,aE,rE,{provide:Mc,useExisting:rE},{provide:ou,useExisting:aE},{provide:au,useValue:cE,multi:!0},{provide:Pc,useValue:!0},{provide:oT,useClass:uE}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const Md=new h.OlP("LEGACY_INTERCEPTOR_FN");let Rd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[lo(sa(Fn.LegacyInterceptors,[{provide:Md,useFactory:nT},{provide:au,useExisting:Md,multi:!0}]))]}),n})(),lT=(()=>{class n{constructor(t){this.http=t,this.apiUrl="https://api.spotify.com/v1"}buscarCanciones(t){const i={headers:new Ki({"Content-Type":"application/json",Authorization:"Bearer BQBBTXdkt1wTTj1oKxGjOeA3W_zmqss-3fyJBBHCLKJeEwRfRTg49n9lMnuIRYUAEy0npP9m3WdminfTHzq8uV1H8MbuB6NdzUww3oIiN1YrdcfE63A"})};return this.http.get(`${this.apiUrl}/search?q=${t}&type=track`,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eE))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var W=k(5861),qt=k(6881);(0,qt.registerVersion)("firebase","9.22.2","app");var dt=k(2090),ds=k(4859),Yi=k(1877);const gy=(n,e)=>e.some(t=>n instanceof t);let lE,Hf;const dE=new WeakMap,my=new WeakMap,hE=new WeakMap,yy=new WeakMap,_y=new WeakMap;let vy={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return my.get(n);if("objectStoreNames"===e)return n.objectStoreNames||hE.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function WP(n){return"function"==typeof n?function gE(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pT(){return Hf||(Hf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(wy(this),e),hs(dE.get(this))}:function(...e){return hs(n.apply(wy(this),e))}:function(e,...t){const r=n.call(wy(this),e,...t);return hE.set(r,e.sort?e.sort():[e]),hs(r)}}(n):(n instanceof IDBTransaction&&function pE(n){if(my.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});my.set(n,e)}(n),gy(n,function fT(){return lE||(lE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,vy):n)}function hs(n){if(n instanceof IDBRequest)return function fE(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{t(hs(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",u),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&dE.set(t,n)}).catch(()=>{}),_y.set(e,n),e}(n);if(yy.has(n))return yy.get(n);const e=WP(n);return e!==n&&(yy.set(n,e),_y.set(e,n)),e}const wy=n=>_y.get(n),mT=["get","getKey","getAll","getAllKeys","count"],Ps=["put","add","delete","clear"],uu=new Map;function Rr(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(uu.get(e))return uu.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ps.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mT.includes(t))return;const u=function(){var c=(0,W.Z)(function*(g,..._){const I=this.transaction(g,i?"readwrite":"readonly");let D=I.store;return r&&(D=D.index(_.shift())),(yield Promise.all([D[t](..._),i&&I.done]))[0]});return function(_){return c.apply(this,arguments)}}();return uu.set(e,u),u}!function GP(n){vy=n(vy)}(n=>({...n,get:(e,t,r)=>Rr(e,t)||n.get(e,t,r),has:(e,t)=>!!Rr(e,t)||n.has(e,t)}));const oa="@firebase/installations",Nc="0.6.4",Pi=1e4,zf=`w:${Nc}`,cu="FIS_v2",Oc="https://firebaseinstallations.googleapis.com/v1",kc=36e5,hi=new dt.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lu(n){return n instanceof dt.ZR&&n.code.includes("request-failed")}function aa({projectId:n}){return`${Oc}/projects/${n}/installations`}function Ey(n){return{token:n.token,requestStatus:2,expiresIn:yE(n.expiresIn),creationTime:Date.now()}}function Gf(n,e){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,W.Z)(function*(n,e){const r=(yield e.json()).error;return hi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Iy({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function qf(n){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,W.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function yE(n){return Number(n.replace("s","000"))}function Dy(){return(Dy=(0,W.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=aa(n),i=Iy(n),u=e.getImmediate({optional:!0});if(u){const I=yield u.getHeartbeatsHeader();I&&i.append("x-firebase-client",I)}const g={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:cu,appId:n.appId,sdkVersion:zf})},_=yield qf(()=>fetch(r,g));if(_.ok){const I=yield _.json();return{fid:I.fid||t,registrationStatus:2,refreshToken:I.refreshToken,authToken:Ey(I.authToken)}}throw yield Gf("Create Installation",_)})).apply(this,arguments)}function by(n){return new Promise(e=>{setTimeout(e,n)})}const vT=/^[cdef][\w-]{21}$/,Pd="";function Ty(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function wT(n){return function _T(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return vT.test(t)?t:Pd}catch{return Pd}}function ho(n){return`${n.appName}!${n.appId}`}const fo=new Map;function Kf(n,e){const t=ho(n);Yf(t,e),function vE(n,e){const t=function Qf(){return!ua&&"BroadcastChannel"in self&&(ua=new BroadcastChannel("[Firebase] FID Change"),ua.onmessage=n=>{Yf(n.data.key,n.data.fid)}),ua}();t&&t.postMessage({key:n,fid:e}),function Ay(){0===fo.size&&ua&&(ua.close(),ua=null)}()}(t,e)}function Yf(n,e){const t=fo.get(n);if(t)for(const r of t)r(e)}let ua=null;const wE="firebase-installations-database",My=1,ca="firebase-installations-store";let xy=null;function Jf(){return xy||(xy=function gT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:u}={}){const c=indexedDB.open(n,e),g=hs(c);return r&&c.addEventListener("upgradeneeded",_=>{r(hs(c.result),_.oldVersion,_.newVersion,hs(c.transaction))}),t&&c.addEventListener("blocked",()=>t()),g.then(_=>{u&&_.addEventListener("close",()=>u()),i&&_.addEventListener("versionchange",()=>i())}).catch(()=>{}),g}(wE,My,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ca)}})),xy}function Nd(n,e){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,W.Z)(function*(n,e){const t=ho(n),i=(yield Jf()).transaction(ca,"readwrite"),u=i.objectStore(ca),c=yield u.get(t);return yield u.put(e,t),yield i.done,(!c||c.fid!==e.fid)&&Kf(n,e.fid),e})).apply(this,arguments)}function ep(n){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,W.Z)(function*(n){const e=ho(n),r=(yield Jf()).transaction(ca,"readwrite");yield r.objectStore(ca).delete(e),yield r.done})).apply(this,arguments)}function Od(n,e){return Py.apply(this,arguments)}function Py(){return(Py=(0,W.Z)(function*(n,e){const t=ho(n),i=(yield Jf()).transaction(ca,"readwrite"),u=i.objectStore(ca),c=yield u.get(t),g=e(c);return void 0===g?yield u.delete(t):yield u.put(g,t),yield i.done,g&&(!c||c.fid!==g.fid)&&Kf(n,g.fid),g})).apply(this,arguments)}function tp(n){return kd.apply(this,arguments)}function kd(){return kd=(0,W.Z)(function*(n){let e;const t=yield Od(n.appConfig,r=>{const i=function EE(n){return Oy(n||{fid:Ty(),registrationStatus:0})}(r),u=function IE(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(hi.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function CE(n,e){return np.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:DE(n)}:{installationEntry:e}}(n,i);return e=u.registrationPromise,u.installationEntry});return t.fid===Pd?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),kd.apply(this,arguments)}function np(){return np=(0,W.Z)(function*(n,e){try{const t=yield function yT(n,e){return Dy.apply(this,arguments)}(n,e);return Nd(n.appConfig,t)}catch(t){throw lu(t)&&409===t.customData.serverCode?yield ep(n.appConfig):yield Nd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),np.apply(this,arguments)}function DE(n){return rp.apply(this,arguments)}function rp(){return(rp=(0,W.Z)(function*(n){let e=yield Ny(n.appConfig);for(;1===e.registrationStatus;)yield by(100),e=yield Ny(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield tp(n);return r||t}return e})).apply(this,arguments)}function Ny(n){return Od(n,e=>{if(!e)throw hi.create("installation-not-found");return Oy(e)})}function Oy(n){return function ip(n){return 1===n.registrationStatus&&n.registrationTime+Pi<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function ky(){return(ky=(0,W.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function IT(n,{fid:e}){return`${aa(n)}/${e}/authTokens:generate`}(n,t),i=function Cy(n,{refreshToken:e}){const t=Iy(n);return t.append("Authorization",function _E(n){return`${cu} ${n}`}(e)),t}(n,t),u=e.getImmediate({optional:!0});if(u){const I=yield u.getHeartbeatsHeader();I&&i.append("x-firebase-client",I)}const g={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:zf,appId:n.appId}})},_=yield qf(()=>fetch(r,g));if(_.ok)return Ey(yield _.json());throw yield Gf("Generate Auth Token",_)})).apply(this,arguments)}function Fd(n){return po.apply(this,arguments)}function po(){return po=(0,W.Z)(function*(n,e=!1){let t;const r=yield Od(n.appConfig,u=>{if(!TE(u))throw hi.create("not-registered");const c=u.authToken;if(!e&&function CT(n){return 2===n.requestStatus&&!function SE(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+kc}(n)}(c))return u;if(1===c.requestStatus)return t=function Fy(n,e){return Ly.apply(this,arguments)}(n,e),u;{if(!navigator.onLine)throw hi.create("app-offline");const g=function DT(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(u);return t=function qP(n,e){return bE.apply(this,arguments)}(n,g),g}});return t?yield t:r.authToken}),po.apply(this,arguments)}function Ly(){return(Ly=(0,W.Z)(function*(n,e){let t=yield sp(n.appConfig);for(;1===t.authToken.requestStatus;)yield by(100),t=yield sp(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Fd(n,e):r})).apply(this,arguments)}function sp(n){return Od(n,e=>{if(!TE(e))throw hi.create("not-registered");return function ur(n){return 1===n.requestStatus&&n.requestTime+Pi<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function bE(){return bE=(0,W.Z)(function*(n,e){try{const t=yield function la(n,e){return ky.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Nd(n.appConfig,r),t}catch(t){if(!lu(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Nd(n.appConfig,r)}else yield ep(n.appConfig);throw t}}),bE.apply(this,arguments)}function TE(n){return void 0!==n&&2===n.registrationStatus}function Vy(){return(Vy=(0,W.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield tp(e);return r?r.catch(console.error):Fd(e).catch(console.error),t.fid})).apply(this,arguments)}function op(){return op=(0,W.Z)(function*(n,e=!1){const t=n;return yield function TT(n){return ap.apply(this,arguments)}(t),(yield Fd(t,e)).token}),op.apply(this,arguments)}function ap(){return(ap=(0,W.Z)(function*(n){const{registrationPromise:e}=yield tp(n);e&&(yield e)})).apply(this,arguments)}function cp(n){return hi.create("missing-app-config-values",{valueName:n})}const lp="installations",MT=n=>{const e=n.getProvider("app").getImmediate(),t=function YP(n){if(!n||!n.options)throw cp("App Configuration");if(!n.name)throw cp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw cp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,qt._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},xT=n=>{const e=n.getProvider("app").getImmediate(),t=(0,qt._getProvider)(e,lp).getImmediate();return{getId:()=>function AE(n){return Vy.apply(this,arguments)}(t),getToken:i=>function bT(n){return op.apply(this,arguments)}(t,i)}};(function Os(){(0,qt._registerComponent)(new ds.wA(lp,MT,"PUBLIC")),(0,qt._registerComponent)(new ds.wA("installations-internal",xT,"PRIVATE"))})(),(0,qt.registerVersion)(oa,Nc),(0,qt.registerVersion)(oa,Nc,"esm2017");const Ni="@firebase/remote-config",fi=new dt.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kE{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,W.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const u=yield t.client.fetch(e),c=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===u.status&&c.push(t.storage.setLastSuccessfulFetchResponse(u)),yield Promise.all(c),u})()}}function FE(n=navigator){return n.languages&&n.languages[0]||n.language}class LE{constructor(e,t,r,i,u,c){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=u,this.appId=c}fetch(e){var t=this;return(0,W.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,g={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},_={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:FE()},I={method:"POST",headers:g,body:JSON.stringify(_)},D=fetch(c,I),S=new Promise((Ve,Qe)=>{e.signal.addEventListener(()=>{const ot=new Error("The operation was aborted.");ot.name="AbortError",Qe(ot)})});let L;try{yield Promise.race([D,S]),L=yield D}catch(Ve){let Qe="fetch-client-network";throw"AbortError"===Ve?.name&&(Qe="fetch-timeout"),fi.create(Qe,{originalErrorMessage:Ve?.message})}let B=L.status;const J=L.headers.get("ETag")||void 0;let fe,pe;if(200===L.status){let Ve;try{Ve=yield L.json()}catch(Qe){throw fi.create("fetch-client-parse",{originalErrorMessage:Qe?.message})}fe=Ve.entries,pe=Ve.state}if("INSTANCE_STATE_UNSPECIFIED"===pe?B=500:"NO_CHANGE"===pe?B=304:("NO_TEMPLATE"===pe||"EMPTY_CONFIG"===pe)&&(fe={}),304!==B&&200!==B)throw fi.create("fetch-status",{httpStatus:B});return{status:B,eTag:J,config:fe}})()}}class UT{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,W.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,W.Z)(function*(){yield function VE(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),u=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(u),r(fi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const u=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),u}catch(u){if(!function UE(n){if(!(n instanceof dt.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u))throw u;const c={throttleEndTimeMillis:Date.now()+(0,dt.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(c),i.attemptFetch(e,c)}})()}}class jT{constructor(e,t,r,i,u){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pp(n,e){const t=n.target.error||void 0;return fi.create(e,{originalErrorMessage:t&&t?.message})}const du="app_namespace_store";class WT{constructor(e,t,r,i=function GT(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(pp(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(du,{keyPath:"compositeKey"})}}catch(t){e(fi.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,W.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,u)=>{const g=r.transaction([du],"readonly").objectStore(du),_=t.createCompositeKey(e);try{const I=g.get(_);I.onerror=D=>{u(pp(D,"storage-get"))},I.onsuccess=D=>{const S=D.target.result;i(S?S.value:void 0)}}catch(I){u(fi.create("storage-get",{originalErrorMessage:I?.message}))}})})()}set(e,t){var r=this;return(0,W.Z)(function*(){const i=yield r.openDbPromise;return new Promise((u,c)=>{const _=i.transaction([du],"readwrite").objectStore(du),I=r.createCompositeKey(e);try{const D=_.put({compositeKey:I,value:t});D.onerror=S=>{c(pp(S,"storage-set"))},D.onsuccess=()=>{u()}}catch(D){c(fi.create("storage-set",{originalErrorMessage:D?.message}))}})})()}delete(e){var t=this;return(0,W.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,u)=>{const g=r.transaction([du],"readwrite").objectStore(du),_=t.createCompositeKey(e);try{const I=g.delete(_);I.onerror=D=>{u(pp(D,"storage-delete"))},I.onsuccess=()=>{i()}}catch(I){u(fi.create("storage-delete",{originalErrorMessage:I?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class qT{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,W.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),u=yield t;u&&(e.lastFetchStatus=u);const c=yield r;c&&(e.lastSuccessfulFetchTimestampMillis=c);const g=yield i;g&&(e.activeConfig=g)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function KT(){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,W.Z)(function*(){if(!(0,dt.hl)())return!1;try{return yield(0,dt.eu)()}catch{return!1}})).apply(this,arguments)}!function ZT(){(0,qt._registerComponent)(new ds.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw fi.create("registration-window");if(!(0,dt.hl)())throw fi.create("indexed-db-unavailable");const{projectId:u,apiKey:c,appId:g}=r.options;if(!u)throw fi.create("registration-project-id");if(!c)throw fi.create("registration-api-key");if(!g)throw fi.create("registration-app-id");const _=new WT(g,r.name,t=t||"firebase"),I=new qT(_),D=new Yi.Yd(Ni);D.logLevel=Yi.in.ERROR;const S=new LE(i,qt.SDK_VERSION,t,u,c,g),L=new UT(S,_),B=new kE(L,_,I,D),J=new jT(r,B,I,_,D);return function RE(n){const e=(0,dt.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(J),J},"PUBLIC").setMultipleInstances(!0)),(0,qt.registerVersion)(Ni,"0.4.4"),(0,qt.registerVersion)(Ni,"0.4.4","esm2017")}();const YT=(n,e)=>e.some(t=>n instanceof t);let BE,zy;const Gy=new WeakMap,gp=new WeakMap,Wy=new WeakMap,mp=new WeakMap,yp=new WeakMap;let _p={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return gp.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Wy.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function JT(n){return"function"==typeof n?function QT(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jE(){return zy||(zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(GE(this),e),pi(Gy.get(this))}:function(...e){return pi(n.apply(GE(this),e))}:function(e,...t){const r=n.call(GE(this),e,...t);return Wy.set(r,e.sort?e.sort():[e]),pi(r)}}(n):(n instanceof IDBTransaction&&function zE(n){if(gp.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});gp.set(n,e)}(n),YT(n,function $E(){return BE||(BE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,_p):n)}function pi(n){if(n instanceof IDBRequest)return function HE(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{t(pi(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",u),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Gy.set(t,n)}).catch(()=>{}),yp.set(e,n),e}(n);if(mp.has(n))return mp.get(n);const e=JT(n);return e!==n&&(mp.set(n,e),yp.set(e,n)),e}const GE=n=>yp.get(n);function vp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:u}={}){const c=indexedDB.open(n,e),g=pi(c);return r&&c.addEventListener("upgradeneeded",_=>{r(pi(c.result),_.oldVersion,_.newVersion,pi(c.transaction))}),t&&c.addEventListener("blocked",()=>t()),g.then(_=>{u&&_.addEventListener("close",()=>u()),i&&_.addEventListener("versionchange",()=>i())}).catch(()=>{}),g}function WE(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),pi(t).then(()=>{})}const qE=["get","getKey","getAll","getAllKeys","count"],ZE=["put","add","delete","clear"],KE=new Map;function yt(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(KE.get(e))return KE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=ZE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!qE.includes(t))return;const u=function(){var c=(0,W.Z)(function*(g,..._){const I=this.transaction(g,i?"readwrite":"readonly");let D=I.store;return r&&(D=D.index(_.shift())),(yield Promise.all([D[t](..._),i&&I.done]))[0]});return function(_){return c.apply(this,arguments)}}();return KE.set(e,u),u}!function hu(n){_p=n(_p)}(n=>({...n,get:(e,t,r)=>yt(e,t)||n.get(e,t,r),has:(e,t)=>!!yt(e,t)||n.has(e,t)}));const XT="/firebase-messaging-sw.js",eS="/firebase-cloud-messaging-push-scope",YE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bc="https://fcmregistrations.googleapis.com/v1",QE="google.c.a.c_id",wp="google.c.a.c_l",Ep="google.c.a.ts",Ln="google.c.a.e";var fu=(()=>{return(n=fu||(fu={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",fu;var n})();function ks(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tS(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let u=0;u<r.length;++u)i[u]=r.charCodeAt(u);return i}const Ip="fcm_token_details_db",JE=5,qy="fcm_token_object_Store";function Zy(){return Zy=(0,W.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(u=>u.name).includes(Ip))return null;let e=null;return(yield vp(Ip,JE,{upgrade:(r=(0,W.Z)(function*(i,u,c,g){var _;if(u<2||!i.objectStoreNames.contains(qy))return;const I=g.objectStore(qy),D=yield I.index("fcmSenderId").get(n);if(yield I.clear(),D)if(2===u){const S=D;if(!S.auth||!S.p256dh||!S.endpoint)return;e={token:S.fcmToken,createTime:null!==(_=S.createTime)&&void 0!==_?_:Date.now(),subscriptionOptions:{auth:S.auth,p256dh:S.p256dh,endpoint:S.endpoint,swScope:S.swScope,vapidKey:"string"==typeof S.vapidKey?S.vapidKey:ks(S.vapidKey)}}}else if(3===u){const S=D;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:ks(S.auth),p256dh:ks(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:ks(S.vapidKey)}}}else if(4===u){const S=D;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:ks(S.auth),p256dh:ks(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:ks(S.vapidKey)}}}}),function(u,c,g,_){return r.apply(this,arguments)})})).close(),yield WE(Ip),yield WE("fcm_vapid_details_db"),yield WE("undefined"),function nS(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Zy.apply(this,arguments)}const rS="firebase-messaging-database",Vd=1,pu="firebase-messaging-store";let Ky=null;function Yy(){return Ky||(Ky=vp(rS,Vd,{upgrade:(n,e)=>{0===e&&n.createObjectStore(pu)}})),Ky}function Ud(n){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,W.Z)(function*(n){const e=mu(n),r=yield(yield Yy()).transaction(pu).objectStore(pu).get(e);if(r)return r;{const i=yield function XE(n){return Zy.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Dp(n,i),i}}),Cp.apply(this,arguments)}function Dp(n,e){return bp.apply(this,arguments)}function bp(){return(bp=(0,W.Z)(function*(n,e){const t=mu(n),i=(yield Yy()).transaction(pu,"readwrite");return yield i.objectStore(pu).put(e,t),yield i.done,e})).apply(this,arguments)}function gu(){return(gu=(0,W.Z)(function*(n){const e=mu(n),r=(yield Yy()).transaction(pu,"readwrite");yield r.objectStore(pu).delete(e),yield r.done})).apply(this,arguments)}function mu({appConfig:n}){return n.appId}const Pr=new dt.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oS(n,e){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,W.Z)(function*(n,e){const t=yield Jy(n),r=aS(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(Qy(n.appConfig),i)).json()}catch(c){throw Pr.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(u.error)throw Pr.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw Pr.create("token-subscribe-no-token");return u.token})).apply(this,arguments)}function Sp(){return(Sp=(0,W.Z)(function*(n,e){const t=yield Jy(n),r=aS(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(`${Qy(n.appConfig)}/${e.token}`,i)).json()}catch(c){throw Pr.create("token-update-failed",{errorInfo:c?.toString()})}if(u.error)throw Pr.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw Pr.create("token-update-no-token");return u.token})).apply(this,arguments)}function tI(n,e){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,W.Z)(function*(n,e){const r={method:"DELETE",headers:yield Jy(n)};try{const u=yield(yield fetch(`${Qy(n.appConfig)}/${e}`,r)).json();if(u.error)throw Pr.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(i){throw Pr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function Qy({projectId:n}){return`${Bc}/projects/${n}/registrations`}function Jy(n){return nI.apply(this,arguments)}function nI(){return(nI=(0,W.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function aS({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==YE&&(i.web.applicationPubKey=r),i}const XP=6048e5;function Mp(){return Mp=(0,W.Z)(function*(n){const e=yield function cS(n,e){return t_.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ks(e.getKey("auth")),p256dh:ks(e.getKey("p256dh"))},r=yield Ud(n.firebaseDependencies);if(r){if(function lS(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+XP?function uS(n,e){return xp.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield tI(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return $c(n.firebaseDependencies,t)}return $c(n.firebaseDependencies,t)}),Mp.apply(this,arguments)}function Xy(){return Xy=(0,W.Z)(function*(n){const e=yield Ud(n.firebaseDependencies);e&&(yield tI(n.firebaseDependencies,e.token),yield function iS(n){return gu.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Xy.apply(this,arguments)}function xp(){return xp=(0,W.Z)(function*(n,e){try{const t=yield function eI(n,e){return Sp.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Dp(n.firebaseDependencies,r),t}catch(t){throw yield function Bd(n){return Xy.apply(this,arguments)}(n),t}}),xp.apply(this,arguments)}function $c(n,e){return e_.apply(this,arguments)}function e_(){return(e_=(0,W.Z)(function*(n,e){const r={token:yield oS(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Dp(n,r),r.token})).apply(this,arguments)}function t_(){return(t_=(0,W.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tS(e)})})).apply(this,arguments)}function dS(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function hS(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const u=e.notification.icon;u&&(n.notification.icon=u)}(e,n),function rI(n,e){e.data&&(n.data=e.data)}(e,n),function fS(n,e){var t,r,i,u,c;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const g=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(u=e.notification)||void 0===u?void 0:u.click_action;g&&(n.fcmOptions.link=g);const _=null===(c=e.fcmOptions)||void 0===c?void 0:c.analytics_label;_&&(n.fcmOptions.analyticsLabel=_)}(e,n),e}function jc(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Rp(n){return Pr.create("missing-app-config-values",{valueName:n})}jc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mS{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function gS(n){if(!n||!n.options)throw Rp("App Configuration Object");if(!n.name)throw Rp("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Rp(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function n_(n){return r_.apply(this,arguments)}function r_(){return(r_=(0,W.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(XT,{scope:eS}),n.swRegistration.update().catch(()=>{})}catch(e){throw Pr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function i_(){return(i_=(0,W.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield n_(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Pr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function o_(){return(o_=(0,W.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=YE)})).apply(this,arguments)}function Pp(){return Pp=(0,W.Z)(function*(n,e){if(!navigator)throw Pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pr.create("permission-blocked");return yield function s_(n,e){return o_.apply(this,arguments)}(n,e?.vapidKey),yield function iI(n,e){return i_.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function eN(n){return Mp.apply(this,arguments)}(n)}),Pp.apply(this,arguments)}function u_(){return(u_=(0,W.Z)(function*(n,e,t){const r=function _S(n){switch(n){case fu.NOTIFICATION_CLICKED:return"notification_open";case fu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[QE],message_name:t[wp],message_time:t[Ep],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function l_(){return l_=(0,W.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===fu.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(dS(t)):n.onMessageHandler.next(dS(t)));const r=t.data;(function pS(n){return"object"==typeof n&&!!n&&QE in n})(r)&&"1"===r[Ln]&&(yield function yS(n,e,t){return u_.apply(this,arguments)}(n,t.messageType,r))}),l_.apply(this,arguments)}const d_="@firebase/messaging",vS=n=>{const e=new mS(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function c_(n,e){return l_.apply(this,arguments)}(e,t)),e},wS=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function a_(n,e){return Pp.apply(this,arguments)}(e,r)}};function oI(){return h_.apply(this,arguments)}function h_(){return(h_=(0,W.Z)(function*(){try{yield(0,dt.eu)()}catch{return!1}return typeof window<"u"&&(0,dt.hl)()&&(0,dt.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ES(){(0,qt._registerComponent)(new ds.wA("messaging",vS,"PUBLIC")),(0,qt._registerComponent)(new ds.wA("messaging-internal",wS,"PRIVATE")),(0,qt.registerVersion)(d_,"0.12.4"),(0,qt.registerVersion)(d_,"0.12.4","esm2017")}();const Np="analytics",bS="firebase_id",g_="origin",m_=6e4,uI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$d="https://www.googletagmanager.com/gtag/js",vr=new Yi.Yd("@firebase/analytics"),Nr=new dt.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function SS(n){if(!n.startsWith($d)){const e=Nr.create("invalid-gtag-resource",{gtagURL:n});return vr.warn(e.message),""}return n}function y_(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Op(){return(Op=(0,W.Z)(function*(n,e,t,r,i,u){const c=r[i];try{if(c)yield e[c];else{const _=(yield y_(t)).find(I=>I.measurementId===i);_&&(yield e[_.appId])}}catch(g){vr.error(g)}n("config",i,u)})).apply(this,arguments)}function v_(){return(v_=(0,W.Z)(function*(n,e,t,r,i){try{let u=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const g=yield y_(t);for(const _ of c){const I=g.find(S=>S.measurementId===_),D=I&&e[I.appId];if(!D){u=[];break}u.push(D)}}0===u.length&&(u=Object.values(e)),yield Promise.all(u),n("event",r,i||{})}catch(u){vr.error(u)}})).apply(this,arguments)}const E_=30,I_=new class hI{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function fI(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function C_(){return(C_=(0,W.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:fI(r)},u=uI.replace("{app-id}",t),c=yield fetch(u,i);if(200!==c.status&&304!==c.status){let g="";try{const _=yield c.json();null!==(e=_.error)&&void 0!==e&&e.message&&(g=_.error.message)}catch{}throw Nr.create("config-fetch-failed",{httpStatus:c.status,responseMessage:g})}return c.json()})).apply(this,arguments)}function D_(){return(D_=(0,W.Z)(function*(n,e=I_,t){const{appId:r,apiKey:i,measurementId:u}=n.options;if(!r)throw Nr.create("no-app-id");if(!i){if(u)return{measurementId:u,appId:r};throw Nr.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new NS;return setTimeout((0,W.Z)(function*(){g.abort()}),void 0!==t?t:m_),b_({appId:r,apiKey:i,measurementId:u},c,g,e)})).apply(this,arguments)}function b_(n,e,t){return pI.apply(this,arguments)}function pI(){return pI=(0,W.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=I_){var u;const{appId:c,measurementId:g}=n;try{yield function gI(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),u=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(u),r(Nr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(_){if(g)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:c,measurementId:g};throw _}try{const _=yield function xS(n){return C_.apply(this,arguments)}(n);return i.deleteThrottleMetadata(c),_}catch(_){const I=_;if(!function PS(n){if(!(n instanceof dt.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(I)){if(i.deleteThrottleMetadata(c),g)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${I?.message}]`),{appId:c,measurementId:g};throw _}const D=503===Number(null===(u=I?.customData)||void 0===u?void 0:u.httpStatus)?(0,dt.$s)(t,i.intervalMillis,E_):(0,dt.$s)(t,i.intervalMillis),S={throttleEndTimeMillis:Date.now()+D,backoffCount:t+1};return i.setThrottleMetadata(c,S),vr.debug(`Calling attemptFetch again in ${D} millis`),b_(n,S,r,i)}}),pI.apply(this,arguments)}class NS{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let mI,yu;function T_(){return(T_=(0,W.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const u=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:u}))}})).apply(this,arguments)}function kp(){return(kp=(0,W.Z)(function*(){if(!(0,dt.hl)())return vr.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,dt.eu)()}catch(n){return vr.warn(Nr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Fp(){return Fp=(0,W.Z)(function*(n,e,t,r,i,u,c){var g;const _=function RS(n){return D_.apply(this,arguments)}(n);_.then(B=>{t[B.measurementId]=B.appId,n.options.measurementId&&B.measurementId!==n.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${B.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(B=>vr.error(B)),e.push(_);const I=function yI(){return kp.apply(this,arguments)}().then(B=>{if(B)return r.getId()}),[D,S]=yield Promise.all([_,I]);(function lI(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($d)&&t.src.includes(n))return t;return null})(u)||function cI(n,e){const t=function Hc(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:SS}),r=document.createElement("script"),i=`${$d}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(u,D.measurementId),yu&&(i("consent","default",yu),function P_(n){yu=n}(void 0)),i("js",new Date);const L=null!==(g=c?.config)&&void 0!==g?g:{};return L[g_]="firebase",L.update=!0,null!=S&&(L[bS]=S),i("config",D.measurementId,L),mI&&(i("set",mI),function N_(n){mI=n}(void 0)),D.measurementId}),Fp.apply(this,arguments)}class BS{constructor(e){this.app=e}_delete(){return delete go[this.app.options.appId],Promise.resolve()}}let go={},O_=[];const vI={};let EI,gi,Lp="dataLayer",wI="gtag",k_=!1;function $S(n,e,t){!function Fs(){const n=[];if((0,dt.ru)()&&n.push("This is a browser extension environment."),(0,dt.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Nr.create("invalid-analytics-context",{errorInfo:e});vr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Nr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Nr.create("no-api-key");vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=go[r])throw Nr.create("already-exists",{id:r});if(!k_){!function AS(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Lp);const{wrappedGtag:u,gtagCore:c}=function MS(n,e,t,r,i){let u=function(...c){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(u=window[i]),window[i]=function w_(n,e,t,r){function u(){return u=(0,W.Z)(function*(c,...g){try{if("event"===c){const[_,I]=g;yield function __(n,e,t,r,i){return v_.apply(this,arguments)}(n,e,t,_,I)}else if("config"===c){const[_,I]=g;yield function rN(n,e,t,r,i,u){return Op.apply(this,arguments)}(n,e,t,r,_,I)}else if("consent"===c){const[_]=g;n("consent","update",_)}else if("get"===c){const[_,I,D]=g;n("get",_,I,D)}else if("set"===c){const[_]=g;n("set",_)}else n(c,...g)}catch(_){vr.error(_)}}),u.apply(this,arguments)}return function i(c){return u.apply(this,arguments)}}(u,n,e,t),{gtagCore:u,wrappedGtag:window[i]}}(go,O_,vI,Lp,wI);gi=u,EI=c,k_=!0}return go[r]=function _I(n,e,t,r,i,u,c){return Fp.apply(this,arguments)}(n,O_,vI,e,EI,Lp,t),new BS(n)}function jS(){return F_.apply(this,arguments)}function F_(){return(F_=(0,W.Z)(function*(){if((0,dt.ru)()||!(0,dt.zI)()||!(0,dt.hl)())return!1;try{return yield(0,dt.eu)()}catch{return!1}})).apply(this,arguments)}const Vp="@firebase/analytics";!function DI(){(0,qt._registerComponent)(new ds.wA(Np,(e,{options:t})=>$S(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,qt._registerComponent)(new ds.wA("analytics-internal",function n(e){try{const t=e.getProvider(Np).getImmediate();return{logEvent:(r,i,u)=>function V_(n,e,t,r){n=(0,dt.m9)(n),function OS(n,e,t,r,i){return T_.apply(this,arguments)}(gi,go[n.app.options.appId],e,t,r).catch(i=>vr.error(i))}(t,r,i,u)}}catch(t){throw Nr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,qt.registerVersion)(Vp,"0.10.0"),(0,qt.registerVersion)(Vp,"0.10.0","esm2017")}();class U_ extends sc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Gc={setInterval(n,e,...t){const{delegate:r}=Gc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Gc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var WS=k(8737);class bI extends U_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,u=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(u,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return Gc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Gc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(u){r=!0,i=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,WS.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const B_={now:()=>(B_.delegate||Date).now(),delegate:void 0};class Wc{constructor(e,t=Wc.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Wc.now=B_.now;class Bp extends Wc{constructor(e,t=Wc.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const ZS=new class TI extends Bp{}(class qS extends bI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),$_=new Bp(bI);var qc=k(9468),_u=k(5363);const $p=new h.GfV("7.6.1"),jp="__angularfire_symbol__analyticsIsSupportedValue",j_="__angularfire_symbol__analyticsIsSupported",Or="__angularfire_symbol__remoteConfigIsSupportedValue",ha="__angularfire_symbol__remoteConfigIsSupported",H_="__angularfire_symbol__messagingIsSupportedValue",z_="__angularfire_symbol__messagingIsSupported";function vu(n,e,t){if(e){if(1===e.length)return e[0];const u=e.filter(c=>c.app===t);if(1===u.length)return u[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[j_]||(globalThis[j_]=jS().then(n=>globalThis[jp]=n).catch(()=>globalThis[jp]=!1)),globalThis[z_]||(globalThis[z_]=oI().then(n=>globalThis[H_]=n).catch(()=>globalThis[H_]=!1)),globalThis[ha]||(globalThis[ha]=KT().then(n=>globalThis[Or]=n).catch(()=>globalThis[Or]=!1));const G_=(n,e)=>{const t=e?[e]:(0,qt.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r};function fa(){}class MI{constructor(e,t=ZS){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(c){i.runGuarded(()=>{e.apply(this,[c])})},t,r)}}class xI{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fa,{},fa,fa)),t.pipe(or({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hd=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new MI(Zone.current)),this.insideAngular=t.run(()=>new MI(Zone.current,$_)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wu(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function mo(n){return wu().ngZone.run(()=>n())}function $r(n){return wu(),function W_(n){return function(t){return(t=t.lift(new xI(n.ngZone))).pipe((0,qc.R)(n.outsideAngular),(0,_u.Q)(n.insideAngular))}}(wu())(n)}const uN=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),mo(()=>n.apply(void 0,r))},yo=(n,e)=>function(){let t;const r=arguments;for(let u=0;u<arguments.length;u++)"function"==typeof r[u]&&(e&&(t||(t=mo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fa,{},fa,fa)))),r[u]=uN(r[u],t));const i=function QS(n){return wu().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Ar.y){const u=wu();return i.pipe((0,qc.R)(u.outsideAngular),(0,_u.Q)(u.insideAngular))}return mo(()=>i)}return i instanceof Ar.y?i.pipe($r):i instanceof Promise?mo(()=>new Promise((u,c)=>i.then(g=>mo(()=>u(g)),g=>mo(()=>c(g))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:mo(()=>i)};class Zc{constructor(e){return e}}class Hp{constructor(){return(0,qt.getApps)()}}const zp=new h.OlP("angularfire2._apps"),q_={provide:Zc,useFactory:function eA(n){return n&&1===n.length?n[0]:new Zc((0,qt.getApp)())},deps:[[new h.FiY,zp]]},cN={provide:Hp,deps:[[new h.FiY,zp]]};function tA(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Zc(r)}}let lN=(()=>{class n{constructor(t){(0,qt.registerVersion)("angularfire",$p.full,"core"),(0,qt.registerVersion)("angularfire",$p.full,"app"),(0,qt.registerVersion)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[q_,cN]}),n})();function nA(n,...e){return{ngModule:lN,providers:[{provide:zp,useFactory:tA(n),multi:!0,deps:[h.R0b,h.zs3,Hd,...e]}]}}const RI=yo(qt.initializeApp,!0),Z_=new Map,PI={activated:!1,tokenObservers:[]},NI={initialized:!1,enabled:!1};function Vn(n){return Z_.get(n)||Object.assign({},PI)}function Gd(){return NI}const Gp="https://content-firebaseappcheck.googleapis.com/v1",aA="exchangeDebugToken",uA={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class pN{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,W.Z)(function*(){t.stop();try{t.pending=new dt.BH,yield function gN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const jr=new dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LI(n){if(!Vn(n).activated)throw jr.create("use-before-activation",{appName:n.name})}function Eu(n,e){return UI.apply(this,arguments)}function UI(){return(UI=(0,W.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(S){throw jr.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw jr.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(S){throw jr.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(_[1]),D=Date.now();return{token:g.token,expireTimeMillis:D+I,issuedAtTimeMillis:D}})).apply(this,arguments)}function Q_(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Gp}/projects/${t}/apps/${r}:${aA}?key=${i}`,body:{debug_token:e}}}const $I="firebase-app-check-database",yN=1,Iu="firebase-app-check-store";let qp=null;function jI(n,e){return HI.apply(this,arguments)}function HI(){return(HI=(0,W.Z)(function*(n,e){const r=(yield function cA(){return qp||(qp=new Promise((n,e)=>{try{const t=indexedDB.open($I,yN);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(jr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Iu,{keyPath:"compositeKey"})}}catch(t){e(jr.create("storage-open",{originalErrorMessage:t?.message}))}}),qp)}()).transaction(Iu,"readwrite"),u=r.objectStore(Iu).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var I;g(jr.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const Wd=new Yi.Yd("@firebase/app-check");function X_(n,e){return(0,dt.hl)()?function lA(n,e){return jI(function GI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZI(){return Gd().enabled}function Oi(){return ev.apply(this,arguments)}function ev(){return(ev=(0,W.Z)(function*(){const n=Gd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const pA={error:"UNKNOWN_ERROR"};function vN(n){return dt.US.encodeString(JSON.stringify(n),!1)}function ei(n){return nv.apply(this,arguments)}function nv(){return(nv=(0,W.Z)(function*(n,e=!1){const t=n.app;LI(t);const r=Vn(t);let u,i=r.token;if(i&&!Cu(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Cu(_)?i=_:yield X_(t,void 0))}if(!e&&i&&Cu(i))return{token:i.token};let g,c=!1;if(ZI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Eu(Q_(t,yield Oi()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield X_(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Vn(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Wd.warn(_.message):Wd.error(_),u=_}return i?u?g=Cu(i)?{token:i.token,internalError:u}:ov(u):(g={token:i.token},r.token=i,yield X_(t,i)):g=ov(u),c&&function YI(n,e){const t=Vn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g})).apply(this,arguments)}function Yp(n){return rv.apply(this,arguments)}function rv(){return(rv=(0,W.Z)(function*(n){const e=n.app;LI(e);const{provider:t}=Vn(e);if(ZI()){const r=yield Oi(),{token:i}=yield Eu(Q_(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function qd(n,e){const t=Vn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function sv(n){const{app:e}=n,t=Vn(e);let r=t.tokenRefresher;r||(r=function KI(n){const{app:e}=n;return new pN((0,W.Z)(function*(){let r;if(r=Vn(e).token?yield ei(n,!0):yield ei(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Vn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},uA.RETRIAL_MIN_WAIT,uA.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Cu(n){return n.expireTimeMillis-Date.now()>0}function ov(n){return{token:vN(pA),error:n}}class gA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vn(this.app);for(const t of e)qd(this.app,t.next);return Promise.resolve()}}const fv="app-check-internal";!function bA(){(0,qt._registerComponent)(new ds.wA("app-check",n=>function QI(n,e){return new gA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fv).initialize()})),(0,qt._registerComponent)(new ds.wA(fv,n=>function mA(n){return{getToken:e=>ei(n,e),getLimitedUseToken:()=>Yp(n),addTokenListener:e=>function iv(n,e,t,r){const{app:i}=n,u=Vn(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Cu(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),sv(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>sv(n))}(n,"INTERNAL",e),removeTokenListener:e=>qd(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qt.registerVersion)("@firebase/app-check","0.8.0")}();class eg{constructor(){return G_("app-check")}}typeof window<"u"&&window;var Du=k(1389);class Zd{constructor(e){return e}}class ng{constructor(){return G_("auth")}}const Kd=new h.OlP("angularfire2.auth-instances");function rg(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Zd(r)}}const MN={provide:ng,deps:[[new h.FiY,Kd]]},xN={provide:Zd,useFactory:function mv(n,e){const t=vu("auth",n,e);return t&&new Zd(t)},deps:[[new h.FiY,Kd],Zc]};let RN=(()=>{class n{constructor(){(0,qt.registerVersion)("angularfire",$p.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xN,MN]}),n})();function PN(n,...e){return{ngModule:RN,providers:[{provide:Kd,useFactory:rg(n),multi:!0,deps:[h.R0b,h.zs3,Hd,Hp,[new h.FiY,eg],...e]}]}}const UN=yo(Du.o,!0);var He,_n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={},OA=OA||{},kt=_n||self;function cC(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function yv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var kA="closure_uid_"+(1e9*Math.random()>>>0),SV=0;function AV(n,e,t){return n.call.apply(n.bind,arguments)}function MV(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return(mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?AV:MV).apply(null,arguments)}function lC(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[i].apply(r,c)}}function Kc(){this.s=this.s,this.o=this.o}Kc.prototype.s=!1,Kc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function TV(n){Object.prototype.hasOwnProperty.call(n,kA)&&n[kA]||(n[kA]=++SV)}(this)},Kc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function FA(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function qN(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(cC(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function yi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yi.prototype.h=function(){this.defaultPrevented=!0};var RV=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",()=>{},e),kt.removeEventListener("test",()=>{},e)}catch{}return n}();function _v(n){return/^[\s\xa0]*$/.test(n)}function dC(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function ga(n){return-1!=dC().indexOf(n)}function LA(n){return LA[" "](n),n}LA[" "]=function(){};var UA,n,NV=ga("Opera"),ig=ga("Trident")||ga("MSIE"),ZN=ga("Edge"),VA=ZN||ig,KN=ga("Gecko")&&!(-1!=dC().toLowerCase().indexOf("webkit")&&!ga("Edge"))&&!(ga("Trident")||ga("MSIE"))&&!ga("Edge"),OV=-1!=dC().toLowerCase().indexOf("webkit")&&!ga("Edge");function YN(){var n=kt.document;return n?n.documentMode:void 0}e:{var BA="",$A=(n=dC(),KN?/rv:([^\);]+)(\)|;)/.exec(n):ZN?/Edge\/([\d\.]+)/.exec(n):ig?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):OV?/WebKit\/(\S+)/.exec(n):NV?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($A&&(BA=$A?$A[1]:""),ig){var jA=YN();if(null!=jA&&jA>parseFloat(BA)){UA=String(jA);break e}}UA=BA}var kV=kt.document&&ig&&(YN()||parseInt(UA,10))||void 0;function vv(n,e){if(yi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(KN){e:{try{LA(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FV[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vv.$.h.call(this)}}Hr(vv,yi);var FV={2:"touch",3:"pen",4:"mouse"};vv.prototype.h=function(){vv.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var wv="closure_listenable_"+(1e6*Math.random()|0),LV=0;function VV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++LV,this.fa=this.ia=!1}function hC(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function zA(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function JN(n){const e={};for(const t in n)e[t]=n[t];return e}const XN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function e1(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<XN.length;u++)t=XN[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function fC(n){this.src=n,this.g={},this.h=0}function GA(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=WN(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(hC(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function WA(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}fC.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=WA(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new VV(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var qA="closure_lm_"+(1e6*Math.random()|0),ZA={};function t1(n,e,t,r,i){if(r&&r.once)return r1(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)t1(n,e[u],t,r,i);return null}return t=JA(t),n&&n[wv]?n.O(e,t,yv(r)?!!r.capture:!!r,i):n1(n,e,t,!1,r,i)}function n1(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=yv(i)?!!i.capture:!!i,g=YA(n);if(g||(n[qA]=g=new fC(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function BV(){const e=$V;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)RV||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(s1(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function r1(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)r1(n,e[u],t,r,i);return null}return t=JA(t),n&&n[wv]?n.P(e,t,yv(r)?!!r.capture:!!r,i):n1(n,e,t,!0,r,i)}function i1(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)i1(n,e[u],t,r,i);else r=yv(r)?!!r.capture:!!r,t=JA(t),n&&n[wv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=WA(u=n.g[e],t,r,i))&&(hC(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=YA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=WA(e,t,r,i)),(t=-1<n?e[n]:null)&&KA(t))}function KA(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[wv])GA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(s1(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YA(e))?(GA(t,n),0==t.h&&(t.src=null,e[qA]=null)):hC(n)}}}function s1(n){return n in ZA?ZA[n]:ZA[n]="on"+n}function $V(n,e){if(n.fa)n=!0;else{e=new vv(e,this);var t=n.listener,r=n.la||n.src;n.ia&&KA(n),n=t.call(r,e)}return n}function YA(n){return(n=n[qA])instanceof fC?n:null}var QA="__closure_events_fn_"+(1e9*Math.random()>>>0);function JA(n){return"function"==typeof n?n:(n[QA]||(n[QA]=function(e){return n.handleEvent(e)}),n[QA])}function zr(){Kc.call(this),this.i=new fC(this),this.S=this,this.J=null}function ti(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new yi(e,n);else if(e instanceof yi)e.target=e.target||n;else{var i=e;e1(e=new yi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=pC(c,r,!0,e)&&i}if(i=pC(c=e.g=n,r,!0,e)&&i,i=pC(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=pC(c=e.g=t[u],r,!1,e)&&i}function pC(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var g=c.listener,_=c.la||c.src;c.ia&&GA(n.i,c),i=!1!==g.call(_,r)&&i}}return i&&!r.defaultPrevented}Hr(zr,Kc),zr.prototype[wv]=!0,zr.prototype.removeEventListener=function(n,e,t,r){i1(this,n,e,t,r)},zr.prototype.N=function(){if(zr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hC(t[r]);delete n.g[e],n.h--}}this.J=null},zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},zr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var XA=kt.JSON.stringify;function HV(){var n=eM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var o1=new class jV{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new GV,n=>n.reset());class GV{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function WV(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function qV(n){kt.setTimeout(()=>{throw n},0)}let Ev,Iv=!1,eM=new class zV{constructor(){this.h=this.g=null}add(e,t){const r=o1.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},a1=()=>{const n=kt.Promise.resolve(void 0);Ev=()=>{n.then(ZV)}};var ZV=()=>{for(var n;n=HV();){try{n.h.call(n.g)}catch(t){qV(t)}var e=o1;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Iv=!1};function gC(n,e){zr.call(this),this.h=n||1,this.g=e||kt,this.j=mi(this.qb,this),this.l=Date.now()}function tM(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function nM(n,e,t){if("function"==typeof n)t&&(n=mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function u1(n){n.g=nM(()=>{n.g=null,n.i&&(n.i=!1,u1(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(gC,zr),(He=gC.prototype).ga=!1,He.T=null,He.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ti(this,"tick"),this.ga&&(tM(this),this.start()))}},He.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.N=function(){gC.$.N.call(this),tM(this),delete this.g};class KV extends Kc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:u1(this)}N(){super.N(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cv(n){Kc.call(this),this.h=n,this.g={}}Hr(Cv,Kc);var c1=[];function l1(n,e,t,r){Array.isArray(t)||(t&&(c1[0]=t.toString()),t=c1);for(var i=0;i<t.length;i++){var u=t1(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function d1(n){zA(n.g,function(e,t){this.g.hasOwnProperty(t)&&KA(e)},n),n.g={}}function mC(){this.g=!0}function sg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function XV(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return XA(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Cv.prototype.N=function(){Cv.$.N.call(this),d1(this)},Cv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mC.prototype.Ea=function(){this.g=!1},mC.prototype.info=function(){};var Yd={},h1=null;function yC(){return h1=h1||new zr}function f1(n){yi.call(this,Yd.Ta,n)}function Dv(n){const e=yC();ti(e,new f1(e))}function p1(n,e){yi.call(this,Yd.STAT_EVENT,n),this.stat=e}function ki(n){const e=yC();ti(e,new p1(e,n))}function g1(n,e){yi.call(this,Yd.Ua,n),this.size=e}function bv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}Yd.Ta="serverreachability",Hr(f1,yi),Yd.STAT_EVENT="statevent",Hr(p1,yi),Yd.Ua="timingevent",Hr(g1,yi);var _C={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},m1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rM(){}function _1(){}rM.prototype.h=null;var oM,Tv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function iM(){yi.call(this,"d")}function sM(){yi.call(this,"c")}function vC(){}function Sv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Cv(this),this.P=eU,this.V=new gC(n=VA?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new v1}function v1(){this.i=null,this.g="",this.h=!1}Hr(iM,yi),Hr(sM,yi),Hr(vC,rM),vC.prototype.g=function(){return new XMLHttpRequest},vC.prototype.i=function(){return{}},oM=new vC;var eU=45e3,aM={},wC={};function uM(n,e,t){n.L=1,n.v=DC(bu(e)),n.s=t,n.S=!0,w1(n,null)}function w1(n,e){n.G=Date.now(),Av(n),n.A=bu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),x1(t.i,"t",r),n.C=0,t=n.l.J,n.h=new v1,n.g=eO(n.l,t?e:null,!n.s),0<n.O&&(n.M=new KV(mi(n.Pa,n,n.g),n.O)),l1(n.U,n.g,"readystatechange",n.nb),e=n.I?JN(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Dv(),function YV(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),_=0;_<g.length;_++){var I=g[_].split("=");if(1<I.length){var D=I[0];I=I[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+I+"&":c+(D+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function E1(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function I1(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=tU(n,t),i==wC){4==e&&(n.o=4,ki(14),r=!1),sg(n.j,n.m,null,"[Incomplete Response]");break}if(i==aM){n.o=4,ki(15),sg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}sg(n.j,n.m,i,null),cM(n,i)}E1(n)&&i!=wC&&i!=aM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),mM(e),e.M=!0,ki(11))):(sg(n.j,n.m,t,"[Invalid Chunked Response]"),Qd(n),Mv(n))}function tU(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?wC:(t=Number(e.substring(t,r)),isNaN(t)?aM:(r+=1)+t>e.length?wC:(e=e.slice(r,r+t),n.C=r+t,e))}function Av(n){n.Y=Date.now()+n.P,C1(n,n.P)}function C1(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bv(mi(n.lb,n),e)}function EC(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function Mv(n){0==n.l.H||n.J||Y1(n.l,n)}function Qd(n){EC(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,tM(n.V),d1(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function cM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||lM(t.i,n)))if(!n.K&&lM(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;xC(t),AC(t)}gM(t),ki(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=bv(mi(t.ib,t),6e3));if(1>=N1(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Xd(t,11)}else if((n.K||t.g==n)&&xC(t),!_v(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.V=I[0],I=I[1],2==t.H)if("c"==I[0]){t.K=I[1],t.pa=I[2];const D=I[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=I[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const J=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var u=r.i;u.g||-1==J.indexOf("spdy")&&-1==J.indexOf("quic")&&-1==J.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(dM(u,u.h),u.h=null))}if(r.F){const fe=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.Da=fe,An(r.I,r.F,fe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=X1(r,r.J?r.pa:null,r.Y),c.K){O1(r.i,c);var g=c,_=r.L;_&&g.setTimeout(_),g.B&&(EC(g),Av(g)),r.g=c}else Z1(r);0<t.j.length&&MC(t)}else"stop"!=I[0]&&"close"!=I[0]||Xd(t,7);else 3==t.H&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Xd(t,7):pM(t):"noop"!=I[0]&&t.h&&t.h.Aa(I),t.A=0)}Dv()}catch{}}function D1(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(cC(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function rU(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(cC(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function nU(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(cC(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(He=Sv.prototype).setTimeout=function(n){this.P=n},He.nb=function(n){n=n.target;const e=this.M;e&&3==ma(n)?e.l():this.Pa(n)},He.Pa=function(n){try{if(n==this.g)e:{const D=ma(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||VA||this.g&&(this.h.h||this.g.ja()||j1(this.g)))){this.J||4!=D||7==e||Dv(),EC(this);var t=this.g.da();this.ca=t;t:if(E1(this)){var r=j1(this.g);n="";var i=r.length,u=4==ma(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qd(this),Mv(this);var c="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function QV(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_v(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,ki(12),Qd(this),Mv(this);break e}sg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cM(this,t)}this.S?(I1(this,D,c),VA&&this.i&&3==D&&(l1(this.U,this.V,"tick",this.mb),this.V.start())):(sg(this.j,this.m,c,null),cM(this,c)),4==D&&Qd(this),this.i&&!this.J&&(4==D?Y1(this.l,this):(this.i=!1,Av(this)))}else(function EU(n){const e={};n=(n.g&&2<=ma(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_v(n[r]))continue;var t=WV(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function UV(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ki(12)):(this.o=0,ki(13)),Qd(this),Mv(this)}}}catch{}},He.mb=function(){if(this.g){var n=ma(this.g),e=this.g.ja();this.C<e.length&&(EC(this),I1(this,n,e),this.i&&4!=n&&Av(this))}},He.cancel=function(){this.J=!0,Qd(this)},He.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function JV(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Dv(),ki(17)),Qd(this),this.o=2,Mv(this)):C1(this,this.Y-n)};var b1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Jd){this.h=n.h,IC(this,n.j),this.s=n.s,this.g=n.g,CC(this,n.m),this.l=n.l;var e=n.i,t=new Pv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),T1(this,t),this.o=n.o}else n&&(e=String(n).match(b1))?(this.h=!1,IC(this,e[1]||"",!0),this.s=xv(e[2]||""),this.g=xv(e[3]||"",!0),CC(this,e[4]),this.l=xv(e[5]||"",!0),T1(this,e[6]||"",!0),this.o=xv(e[7]||"")):(this.h=!1,this.i=new Pv(null,this.h))}function bu(n){return new Jd(n)}function IC(n,e,t){n.j=t?xv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function CC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function T1(n,e,t){e instanceof Pv?(n.i=e,function lU(n,e){e&&!n.j&&(Yc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(A1(this,r),x1(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Rv(e,uU)),n.i=new Pv(e,n.h))}function An(n,e,t){n.i.set(e,t)}function DC(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sU),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sU(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rv(e,S1,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rv(e,S1,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rv(t,"/"==t.charAt(0)?aU:oU,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rv(t,cU)),n.join("")};var S1=/[#\/\?@]/g,oU=/[#\?:]/g,aU=/[#\?]/g,uU=/[#\?@]/g,cU=/#/g;function Pv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yc(n){n.g||(n.g=new Map,n.h=0,n.i&&function iU(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function A1(n,e){Yc(n),e=og(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function M1(n,e){return Yc(n),e=og(n,e),n.g.has(e)}function x1(n,e,t){A1(n,e),0<t.length&&(n.i=null,n.g.set(og(n,e),FA(t)),n.h+=t.length)}function og(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function R1(n){this.l=n||hU,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ka&&kt.g.Ka()&&kt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(He=Pv.prototype).add=function(n,e){Yc(this),this.i=null,n=og(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},He.forEach=function(n,e){Yc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},He.ta=function(){Yc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},He.Z=function(n){Yc(this);let e=[];if("string"==typeof n)M1(this,n)&&(e=e.concat(this.g.get(og(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},He.set=function(n,e){return Yc(this),this.i=null,M1(this,n=og(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},He.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var hU=10;function P1(n){return!!n.h||!!n.g&&n.g.size>=n.j}function N1(n){return n.h?1:n.g?n.g.size:0}function lM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dM(n,e){n.g?n.g.add(e):n.h=e}function O1(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function k1(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return FA(n.i)}R1.prototype.cancel=function(){if(this.i=k1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var fU=class{stringify(n){return kt.JSON.stringify(n,void 0)}parse(n){return kt.JSON.parse(n,void 0)}};function pU(){this.g=new fU}function gU(n,e,t){const r=t||"";try{D1(n,function(i,u){let c=i;yv(i)&&(c=XA(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function bC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Nv(n){this.l=n.fc||null,this.j=n.ob||!1}function TC(n,e){zr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=hM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hr(Nv,rM),Nv.prototype.g=function(){return new TC(this.l,this.j)},Nv.prototype.i=function(n){return function(){return n}}({}),Hr(TC,zr);var hM=0;function F1(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ov(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kv(n)}function kv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(He=TC.prototype).open=function(n,e){if(this.readyState!=hM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kv(this)},He.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||kt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ov(this)),this.readyState=hM},He.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kv(this)),this.g&&(this.readyState=3,kv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;F1(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},He.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ov(this):kv(this),3==this.readyState&&F1(this)}},He.Za=function(n){this.g&&(this.response=this.responseText=n,Ov(this))},He.Ya=function(n){this.g&&(this.response=n,Ov(this))},He.ka=function(){this.g&&Ov(this)},He.setRequestHeader=function(n,e){this.v.append(n,e)},He.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(TC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var yU=kt.JSON.parse;function Jn(n){zr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L1,this.L=this.M=!1}Hr(Jn,zr);var L1="",_U=/^https?$/i,vU=["POST","PUT"];function V1(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,U1(n),SC(n)}function U1(n){n.F||(n.F=!0,ti(n,"complete"),ti(n,"error"))}function B1(n){if(n.h&&typeof OA<"u"&&(!n.C[1]||4!=ma(n)||2!=n.da()))if(n.v&&4==ma(n))nM(n.La,0,n);else if(ti(n,"readystatechange"),4==ma(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(b1)[1]||null;!i&&kt.self&&kt.self.location&&(i=kt.self.location.protocol.slice(0,-1)),r=!_U.test(i?i.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var u=2<ma(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",U1(n)}}finally{SC(n)}}}function SC(n,e){if(n.g){$1(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function $1(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function ma(n){return n.g?n.g.readyState:0}function j1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case L1:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function H1(n){let e="";return zA(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function fM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=H1(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Fv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function z1(n){this.Ga=0,this.j=[],this.l=new mC,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fv("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fv("baseRetryDelayMs",5e3,n),this.hb=Fv("retryDelaySeedMs",1e4,n),this.eb=Fv("forwardChannelMaxRetries",2,n),this.xa=Fv("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new R1(n&&n.concurrentRequestLimit),this.Ja=new pU,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function pM(n){if(G1(n),3==n.H){var e=n.W++,t=bu(n.I);if(An(t,"SID",n.K),An(t,"RID",e),An(t,"TYPE","terminate"),Lv(n,t),(e=new Sv(n,n.l,e)).L=2,e.v=DC(bu(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon)try{t=kt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=eO(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Av(e)}J1(n)}function AC(n){n.g&&(mM(n),n.g.cancel(),n.g=null)}function G1(n){AC(n),n.u&&(kt.clearTimeout(n.u),n.u=null),xC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function MC(n){if(!P1(n.i)&&!n.m){n.m=!0;var e=n.Na;Ev||a1(),Iv||(Ev(),Iv=!0),eM.add(e,n),n.C=0}}function W1(n,e){var t;t=e?e.m:n.W++;const r=bu(n.I);An(r,"SID",n.K),An(r,"RID",t),An(r,"AID",n.V),Lv(n,r),n.o&&n.s&&fM(r,n.o,n.s),t=new Sv(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=q1(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),dM(n.i,t),uM(t,r,e)}function Lv(n,e){n.na&&zA(n.na,function(t,r){An(e,r,t)}),n.h&&D1({},function(t,r){An(e,r,t)})}function q1(n,e,t){t=Math.min(n.j.length,t);var r=n.h?mi(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let I=i[_].g;const D=i[_].map;if(I-=u,0>I)u=Math.max(0,i[_].g-100),g=!1;else try{gU(D,c,"req"+I+"_")}catch{r&&r(D)}}if(g){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Z1(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Ev||a1(),Iv||(Ev(),Iv=!0),eM.add(e,n),n.A=0}}function gM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=bv(mi(n.Ma,n),Q1(n,n.A)),n.A++,0))}function mM(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function K1(n){n.g=new Sv(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=bu(n.wa);An(e,"RID","rpc"),An(e,"SID",n.K),An(e,"AID",n.V),An(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&An(e,"TO",n.qa),An(e,"TYPE","xmlhttp"),Lv(n,e),n.o&&n.s&&fM(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=DC(bu(e)),t.s=null,t.S=!0,w1(t,n)}function xC(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function Y1(n,e){var t=null;if(n.g==e){xC(n),mM(n),n.g=null;var r=2}else{if(!lM(n.i,e))return;t=e.F,O1(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ti(r=yC(),new g1(r,t)),MC(n)}else Z1(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function IU(n,e){return!(N1(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=bv(mi(n.Na,n,e),Q1(n,n.C)),n.C++,0)))}(n,e)||2==r&&gM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xd(n,5);break;case 4:Xd(n,10);break;case 3:Xd(n,6);break;default:Xd(n,2)}}function Q1(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Xd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=mi(n.pb,n);t||(t=new Jd("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||IC(t,"https"),DC(t)),function mU(n,e){const t=new mC;if(kt.Image){const r=new Image;r.onload=lC(bC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lC(bC,t,r,"TestLoadImage: error",!1,e),r.onabort=lC(bC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lC(bC,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ki(2);n.H=0,n.h&&n.h.za(e),J1(n),G1(n)}function J1(n){if(n.H=0,n.ma=[],n.h){const e=k1(n.i);(0!=e.length||0!=n.j.length)&&(qN(n.ma,e),qN(n.ma,n.j),n.i.i.length=0,FA(n.j),n.j.length=0),n.h.ya()}}function X1(n,e,t){var r=t instanceof Jd?bu(t):new Jd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),CC(r,r.m);else{var i=kt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Jd(null);r&&IC(u,r),e&&(u.g=e),i&&CC(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&An(r,t,e),An(r,"VER",n.ra),Lv(n,r),r}function eO(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jn(t&&n.Ha&&!n.va?new Nv({ob:!0}):n.va)).Oa(n.J),e}function tO(){}function RC(){if(ig&&!(10<=Number(kV)))throw Error("Environmental error: no available transport.")}function fs(n,e){zr.call(this),this.g=new z1(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_v(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_v(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ag(this)}function nO(n){iM.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rO(){sM.call(this),this.status=1}function ag(n){this.g=n}function vo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function yM(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=u+((c=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function cn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(He=Jn.prototype).Oa=function(n){this.M=n},He.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oM.g(),this.C=function y1(n){return n.h||(n.h=n.i())}(this.u?this.u:oM),this.g.onreadystatechange=mi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void V1(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=kt.FormData&&n instanceof kt.FormData,!(0<=WN(vU,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{$1(this),0<this.B&&((this.L=function wU(n){return ig&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.ua,this)):this.A=nM(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){V1(this,u)}},He.ua=function(){typeof OA<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},He.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),SC(this))},He.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),SC(this,!0)),Jn.$.N.call(this)},He.La=function(){this.s||(this.G||this.v||this.l?B1(this):this.kb())},He.kb=function(){B1(this)},He.isActive=function(){return!!this.g},He.da=function(){try{return 2<ma(this)?this.g.status:-1}catch{return-1}},He.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},He.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),yU(e)}},He.Ia=function(){return this.m},He.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=z1.prototype).ra=8,He.H=1,He.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Sv(this,this.l,n);let u=this.s;if(this.U&&(u?(u=JN(u),e1(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=q1(this,i,e),An(t=bu(this.I),"RID",n),An(t,"CVER",22),this.F&&An(t,"X-HTTP-Session-Id",this.F),Lv(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(H1(u)))+"&"+e:this.o&&fM(t,this.o,u)),dM(this.i,i),this.bb&&An(t,"TYPE","init"),this.P?(An(t,"$req",e),An(t,"SID","null"),i.aa=!0,uM(i,t,null)):uM(i,t,e),this.H=2}}else 3==this.H&&(n?W1(this,n):0==this.j.length||P1(this.i)||W1(this))},He.Ma=function(){if(this.u=null,K1(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=bv(mi(this.jb,this),n)}},He.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ki(10),AC(this),K1(this))},He.ib=function(){null!=this.v&&(this.v=null,AC(this),gM(this),ki(19))},He.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ki(2)):(this.l.info("Failed to ping google.com"),ki(1))},He.isActive=function(){return!!this.h&&this.h.isActive(this)},(He=tO.prototype).Ba=function(){},He.Aa=function(){},He.za=function(){},He.ya=function(){},He.isActive=function(){return!0},He.Va=function(){},RC.prototype.g=function(n,e){return new fs(n,e)},Hr(fs,zr),fs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ki(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=X1(n,null,n.Y),MC(n)},fs.prototype.close=function(){pM(this.g)},fs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=XA(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&MC(e)},fs.prototype.N=function(){this.g.h=null,delete this.j,pM(this.g),delete this.g,fs.$.N.call(this)},Hr(nO,iM),Hr(rO,sM),Hr(ag,tO),ag.prototype.Ba=function(){ti(this.g,"a")},ag.prototype.Aa=function(n){ti(this.g,new nO(n))},ag.prototype.za=function(n){ti(this.g,new rO)},ag.prototype.ya=function(){ti(this.g,"b")},Hr(vo,function CU(){this.blockSize=-1}),vo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)yM(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){yM(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){yM(this,r),i=0;break}}this.h=i,this.i+=e},vo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var DU={};function _M(n){return-128<=n&&128>n?function PV(n,e){var t=DU;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new cn([0|e],0>e?-1:0)}):new cn([0|n],0>n?-1:0)}function ya(n){if(isNaN(n)||!isFinite(n))return ug;if(0>n)return ni(ya(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=vM;return new cn(e,0)}var vM=4294967296,ug=_M(0),wM=_M(1),sO=_M(16777216);function Tu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ls(n){return-1==n.h}function ni(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new cn(t,~n.h).add(wM)}function PC(n,e){return n.add(ni(e))}function NC(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Vv(n,e){this.g=n,this.h=e}function OC(n,e){if(Tu(e))throw Error("division by zero");if(Tu(n))return new Vv(ug,ug);if(Ls(n))return e=OC(ni(n),e),new Vv(ni(e.g),ni(e.h));if(Ls(e))return e=OC(n,ni(e)),new Vv(ni(e.g),e.h);if(30<n.g.length){if(Ls(n)||Ls(e))throw Error("slowDivide_ only works with positive integers.");for(var t=wM,r=e;0>=r.X(n);)t=oO(t),r=oO(r);var i=cg(t,1),u=cg(r,1);for(r=cg(r,2),t=cg(t,2);!Tu(r);){var c=u.add(r);0>=c.X(n)&&(i=i.add(t),u=c),r=cg(r,1),t=cg(t,1)}return e=PC(n,i.R(e)),new Vv(i,e)}for(i=ug;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=ya(t)).R(e);Ls(c)||0<c.X(n);)c=(u=ya(t-=r)).R(e);Tu(u)&&(u=wM),i=i.add(u),n=PC(n,c)}return new Vv(i,n)}function oO(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new cn(t,n.h)}function cg(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new cn(i,n.h)}(He=cn.prototype).ea=function(){if(Ls(this))return-ni(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:vM+r)*e,e*=vM}return n},He.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Tu(this))return"0";if(Ls(this))return"-"+ni(this).toString(n);for(var e=ya(Math.pow(n,6)),t=this,r="";;){var i=OC(t,e).g,u=((0<(t=PC(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Tu(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},He.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},He.X=function(n){return Ls(n=PC(this,n))?-1:Tu(n)?0:1},He.abs=function(){return Ls(this)?ni(this):this},He.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),c=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(u&=65535)}return new cn(t,-2147483648&t[t.length-1]?-1:0)},He.R=function(n){if(Tu(this)||Tu(n))return ug;if(Ls(this))return Ls(n)?ni(this).R(ni(n)):ni(ni(this).R(n));if(Ls(n))return ni(this.R(ni(n)));if(0>this.X(sO)&&0>n.X(sO))return ya(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,c=65535&this.D(r),g=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=c*_,NC(t,2*r+2*i),t[2*r+2*i+1]+=u*_,NC(t,2*r+2*i+1),t[2*r+2*i+1]+=c*g,NC(t,2*r+2*i+1),t[2*r+2*i+2]+=u*g,NC(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new cn(t,0)},He.gb=function(n){return OC(this,n).h},He.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new cn(t,this.h&n.h)},He.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new cn(t,this.h|n.h)},He.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new cn(t,this.h^n.h)},RC.prototype.createWebChannel=RC.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,_C.NO_ERROR=0,_C.TIMEOUT=8,_C.HTTP_ERROR=6,m1.COMPLETE="complete",_1.EventType=Tv,Tv.OPEN="a",Tv.CLOSE="b",Tv.ERROR="c",Tv.MESSAGE="d",zr.prototype.listen=zr.prototype.O,Jn.prototype.listenOnce=Jn.prototype.P,Jn.prototype.getLastError=Jn.prototype.Sa,Jn.prototype.getLastErrorCode=Jn.prototype.Ia,Jn.prototype.getStatus=Jn.prototype.da,Jn.prototype.getResponseJson=Jn.prototype.Wa,Jn.prototype.getResponseText=Jn.prototype.ja,Jn.prototype.send=Jn.prototype.ha,Jn.prototype.setWithCredentials=Jn.prototype.Oa,vo.prototype.digest=vo.prototype.l,vo.prototype.reset=vo.prototype.reset,vo.prototype.update=vo.prototype.j,cn.prototype.add=cn.prototype.add,cn.prototype.multiply=cn.prototype.R,cn.prototype.modulo=cn.prototype.gb,cn.prototype.compare=cn.prototype.X,cn.prototype.toNumber=cn.prototype.ea,cn.prototype.toString=cn.prototype.toString,cn.prototype.getBits=cn.prototype.D,cn.fromNumber=ya,cn.fromString=function iO(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ni(iO(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ya(Math.pow(e,8)),r=ug,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+u),e);8>u?(u=ya(Math.pow(e,u)),r=r.R(u).add(ya(c))):r=(r=r.R(t)).add(ya(c))}return r};var bU=on.createWebChannelTransport=function(){return new RC},TU=on.getStatEventTarget=function(){return yC()},EM=on.ErrorCode=_C,SU=on.EventType=m1,AU=on.Event=Yd,aO=on.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},MU=on.FetchXmlHttpFactory=Nv,kC=on.WebChannel=_1,xU=on.XhrIo=Jn,RU=on.Md5=vo,lg=on.Integer=cn;const uO="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let dg="9.22.2";const Qc=new Yi.Yd("@firebase/firestore");function IM(){return Qc.logLevel}function be(n,...e){if(Qc.logLevel<=Yi.in.DEBUG){const t=e.map(CM);Qc.debug(`Firestore (${dg}): ${n}`,...t)}}function cr(n,...e){if(Qc.logLevel<=Yi.in.ERROR){const t=e.map(CM);Qc.error(`Firestore (${dg}): ${n}`,...t)}}function Vs(n,...e){if(Qc.logLevel<=Yi.in.WARN){const t=e.map(CM);Qc.warn(`Firestore (${dg}): ${n}`,...t)}}function CM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ye(n="Unexpected state"){const e=`FIRESTORE (${dg}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function ht(n,e){n||Ye()}function je(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class kU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FU{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let c=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new kr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=c;e.enqueueRetryable((0,W.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new kr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new cO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new Gr(e)}}class LU{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class VU{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new LU(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UU{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.T=t.token,new lO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function BU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dO{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BU(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function hg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hO(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Un(0,0))}static max(){return new ft(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Uv{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ye(),void 0===r?r=e.length-t:r>e.length-t&&Ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Uv{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const $U=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Uv{construct(e,t,r){return new Xn(e,t,r)}static isValidIdentifier(e){return $U.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===g?(c=!c,i++):"."!==g||c?(r+=g,i++):(u(),i++)}if(u(),c)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(t)}static emptyPath(){return new Xn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(nn.fromString(e))}static fromName(e){return new Be(nn.fromString(e).popFirst(5))}static empty(){return new Be(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new nn(e.slice()))}}class FC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function DM(n){return n.fields.find(e=>2===e.kind)}function eh(n){return n.fields.filter(e=>2!==e.kind)}FC.UNKNOWN_ID=-1;class LC{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bv(0,ps.min())}}function fO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new ps(i,Be.empty(),e)}function pO(n){return new ps(n.readTime,n.key,-1)}class ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ps(ft.min(),Be.empty(),-1)}static max(){return new ps(ft.max(),Be.empty(),-1)}}function bM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const gO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Jc(n){return TM.apply(this,arguments)}function TM(){return TM=(0,W.Z)(function*(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==gO)throw n;be("LocalStore","Unexpectedly lost primary lease")}),TM.apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,r)=>{t(e)})}static reject(e){return new Q((t,r)=>{r(e)})}static waitFor(e){return new Q((t,r)=>{let i=0,u=0,c=!1;e.forEach(g=>{++i,g.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=Q.resolve(!1);for(const r of e)t=t.next(i=>i?Q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new Q((r,i)=>{const u=e.length,c=new Array(u);let g=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(D=>{c[I]=D,++g,g===u&&r(c)},D=>i(D))}})}static doWhile(e,t){return new Q((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class VC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new kr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new $v(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=SM(r.target.error);this.v.reject(new $v(e,i))}}static open(e,t,r,i){try{return new VC(t,e.transaction(i,r))}catch(u){throw new $v(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GU(t)}}class wo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===wo.S((0,dt.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return be("SimpleDb","Removing database:",e),th(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,dt.hl)())return!1;if(wo.C())return!0;const e=(0,dt.z$)(),t=wo.S(e),r=0<t&&t<10,i=wo.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,W.Z)(function*(){return t.db||(be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new $v(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;i("VersionError"===g.name?new he(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new he(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new $v(e,g))},u.onupgradeneeded=c=>{be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,W.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=VC.open(u.db,e,c?"readonly":"readwrite",r),I=i(_).next(D=>(_.P(),D)).catch(D=>(_.abort(D),Q.reject(D))).toPromise();return I.catch(()=>{}),yield _.R,I}catch(_){const I=_,D="FirebaseError"!==I.name&&g<3;if(be("SimpleDb","Transaction failed with error:",I.message,"Retrying:",D),u.close(),!D)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zU{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return th(this.L.delete())}}class $v extends he{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xc(n){return"IndexedDbTransactionError"===n.name}class GU{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),th(r)}add(e){return be("SimpleDb","ADD",this.store.name,e,e),th(this.store.add(e))}get(e){return th(this.store.get(e)).next(t=>(void 0===t&&(t=null),be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return be("SimpleDb","DELETE",this.store.name,e),th(this.store.delete(e))}count(){return be("SimpleDb","COUNT",this.store.name),th(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(c,g)=>{u.push(g)}).next(()=>u)}{const i=this.store.getAll(r.range);return new Q((u,c)=>{i.onerror=g=>{c(g.target.error)},i.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Q((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,c,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new Q((r,i)=>{t.onerror=u=>{const c=SM(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}W(e,t){const r=[];return new Q((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void i();const _=new zU(g),I=t(g.primaryKey,g.value,_);if(I instanceof Q){const D=I.catch(S=>(_.done(),Q.reject(S)));r.push(D)}_.isDone?i():null===_.K?g.continue():g.continue(_.K)}}).next(()=>Q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function th(n){return new Q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=SM(r.target.error);t(i)}})}let yO=!1;function SM(n){const e=wo.S((0,dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yO||(yO=!0,setTimeout(()=>{throw r},0)),r}}return n}class WU{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){t.task=null;try{be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Xc(r)?be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Jc(r)}yield t.et(6e4)}))}}class qU{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,W.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return Q.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return be("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(g=>{i-=g,r.add(c)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,u)).next(g=>(be("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=pO(u);bM(c,r)>0&&(r=c)}),new ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let gs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function jv(n){return null==n}function Hv(n){return 0===n&&1/n==-1/0}function _O(n){return"number"==typeof n&&Number.isInteger(n)&&!Hv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vO(e)),e=ZU(n.get(t),e);return vO(e)}function ZU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function vO(n){return n+"\x01\x01"}function _a(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&Ye(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let _;0===i.length?_=g:(i+=g,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:Ye()}u=c+2}return new nn(r)}const wO=["userId","batchId"];function UC(n,e){return[n,_i(e)]}function EO(n,e,t){return[n,_i(e),t]}const KU={},YU=["prefixPath","collectionGroup","readTime","documentId"],QU=["prefixPath","collectionGroup","documentId"],JU=["collectionGroup","readTime","prefixPath","documentId"],XU=["canonicalId","targetId"],eB=["targetId","path"],tB=["path","targetId"],nB=["collectionId","parent"],rB=["indexId","uid"],iB=["uid","sequenceNumber"],sB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oB=["indexId","uid","orderedDocumentKey"],aB=["userId","collectionPath","documentId"],uB=["userId","collectionPath","largestBatchId"],cB=["userId","collectionGroup","largestBatchId"],IO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lB=[...IO,"documentOverlays"],CO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DO=CO,dB=[...DO,"indexConfiguration","indexState","indexEntries"];class AM extends mO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=je(n);return wo.M(t.ht,e)}function bO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function el(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vn{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new BC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new BC(this.root,e,this.comparator,!1)}getReverseIterator(){return new BC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new BC(this.root,e,this.comparator,!0)}}class BC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??ri.RED,this.left=i??ri.EMPTY,this.right=u??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ri(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const e=this.left.check();if(e!==this.right.check())throw Ye();return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1,ri.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SO(this.data.getIterator())}getIteratorFrom(e){return new SO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class SO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fg(n){return n.hasNext()?n.getNext():void 0}class Ji{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new Mn(Xn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class AO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AO("Invalid base64 string: "+i):i}}(e);return new Fr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const fB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tl(n){if(ht(!!n),"string"==typeof n){let e=0;const t=fB.exec(n);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Su(n){return"string"==typeof n?Fr.fromBase64String(n):Fr.fromUint8Array(n)}function $C(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jC(n){const e=n.mapValue.fields.__previous_value__;return $C(e)?jC(e):e}function zv(n){const e=tl(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class pB{constructor(e,t,r,i,u,c,g,_,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=I}}class nl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}const rl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},HC={nullValue:"NULL_VALUE"};function il(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$C(n)?4:PO(n)?9007199254740991:10:Ye()}function va(n,e){if(n===e)return!0;const t=il(n);if(t!==il(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zv(n).isEqual(zv(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=tl(r.timestampValue),c=tl(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Su(n.bytesValue).isEqual(Su(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return er(r.geoPointValue.latitude)===er(i.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return er(r.integerValue)===er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=er(r.doubleValue),c=er(i.doubleValue);return u===c?Hv(u)===Hv(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return hg(n.arrayValue.values||[],e.arrayValue.values||[],va);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(bO(u)!==bO(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!va(u[g],c[g])))return!1;return!0}(n,e);default:return Ye()}var i}function Gv(n,e){return void 0!==(n.values||[]).find(t=>va(t,e))}function sl(n,e){if(n===e)return 0;const t=il(n),r=il(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=er(i.integerValue||i.doubleValue),g=er(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return MO(n.timestampValue,e.timestampValue);case 4:return MO(zv(n),zv(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Su(i),g=Su(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),g=u.split("/");for(let _=0;_<c.length&&_<g.length;_++){const I=xt(c[_],g[_]);if(0!==I)return I}return xt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=xt(er(i.latitude),er(u.latitude));return 0!==c?c:xt(er(i.longitude),er(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],g=u.values||[];for(let _=0;_<c.length&&_<g.length;++_){const I=sl(c[_],g[_]);if(I)return I}return xt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===rl.mapValue&&u===rl.mapValue)return 0;if(i===rl.mapValue)return 1;if(u===rl.mapValue)return-1;const c=i.fields||{},g=Object.keys(c),_=u.fields||{},I=Object.keys(_);g.sort(),I.sort();for(let D=0;D<g.length&&D<I.length;++D){const S=xt(g[D],I[D]);if(0!==S)return S;const L=sl(c[g[D]],_[I[D]]);if(0!==L)return L}return xt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw Ye()}}function MO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=tl(n),r=tl(e),i=xt(t.seconds,r.seconds);return 0!==i?i:xt(t.nanos,r.nanos)}function pg(n){return MM(n)}function MM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=tl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Su(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=MM(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of i)c?c=!1:u+=",",u+=`${g}:${MM(r.fields[g])}`;return u+"}"}(n.mapValue):Ye();var e}function nh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xM(n){return!!n&&"integerValue"in n}function Wv(n){return!!n&&"arrayValue"in n}function xO(n){return!!n&&"nullValue"in n}function RO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function GC(n){return!!n&&"mapValue"in n}function qv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return el(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function gB(n){return"nullValue"in n?HC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nh(nl.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ye()}function mB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nh(nl.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rl:Ye()}function NO(n,e){const t=sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function OO(n,e){const t=sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!GC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qv(t)}setAll(e){let t=Xn.emptyPath(),r={},i=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=g.popLast()}c?r[g.lastSegment()]=qv(c):i.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());GC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];GC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){el(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ii(qv(this.value))}}function kO(n){const e=[];return el(n.fields,(t,r)=>{const i=new Xn([t]);if(GC(r)){const u=kO(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Ji(e)}class xn{constructor(e,t,r,i,u,c,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=c,this.documentState=g}static newInvalidDocument(e){return new xn(e,0,ft.min(),ft.min(),ft.min(),ii.empty(),0)}static newFoundDocument(e,t,r,i){return new xn(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new xn(e,2,t,ft.min(),ft.min(),ii.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,ft.min(),ft.min(),ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ol{constructor(e,t){this.position=e,this.inclusive=t}}function FO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Be.comparator(Be.fromName(c.referenceValue),t.key):sl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function LO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!va(n.position[t],e.position[t]))return!1;return!0}class gg{constructor(e,t="asc"){this.field=e,this.dir=t}}function yB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class VO{}class Yt extends VO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _B(e,t,r):"array-contains"===t?new EB(e,r):"in"===t?new zO(e,r):"not-in"===t?new IB(e,r):"array-contains-any"===t?new CB(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new vB(e,r):new wB(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(sl(t,this.value)):null!==t&&il(this.value)===il(t)&&this.matchesComparison(sl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ln extends VO{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ln(e,t)}matches(e){return mg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function mg(n){return"and"===n.op}function RM(n){return"or"===n.op}function PM(n){return UO(n)&&mg(n)}function UO(n){for(const e of n.filters)if(e instanceof ln)return!1;return!0}function NM(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+pg(n.value);if(PM(n))return n.filters.map(e=>NM(e)).join(",");{const e=n.filters.map(t=>NM(t)).join(",");return`${n.op}(${e})`}}function BO(n,e){return n instanceof Yt?(t=n,(r=e)instanceof Yt&&t.op===r.op&&t.field.isEqual(r.field)&&va(t.value,r.value)):n instanceof ln?function(t,r){return r instanceof ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,c)=>i&&BO(u,r.filters[c]),!0)}(n,e):void Ye();var t,r}function $O(n,e){const t=n.filters.concat(e);return ln.create(t,n.op)}function jO(n){return n instanceof Yt?`${(e=n).field.canonicalString()} ${e.op} ${pg(e.value)}`:n instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(jO).join(" ,")+"}"}(n):"Filter";var e}class _B extends Yt{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class vB extends Yt{constructor(e,t){super(e,"in",t),this.keys=HO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wB extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=HO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class EB extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wv(t)&&Gv(t.arrayValue,this.value)}}class zO extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gv(this.value.arrayValue,t)}}class IB extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gv(this.value.arrayValue,t)}}class CB extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gv(this.value.arrayValue,r))}}class DB{constructor(e,t=null,r=[],i=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=g,this.dt=null}}function OM(n,e=null,t=[],r=[],i=null,u=null,c=null){return new DB(n,e,t,r,i,u,c)}function rh(n){const e=je(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),jv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pg(r)).join(",")),e.dt=t}return e.dt}function Zv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LO(n.startAt,e.startAt)&&LO(n.endAt,e.endAt)}function WC(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qC(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function GO(n,e,t){let r=HC,i=!0;for(const u of qC(n,e)){let c=HC,g=!0;switch(u.op){case"<":case"<=":c=gB(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=HC}NO({value:r,inclusive:i},{value:c,inclusive:g})<0&&(r=c,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];NO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function WO(n,e,t){let r=rl,i=!0;for(const u of qC(n,e)){let c=rl,g=!0;switch(u.op){case">=":case">":c=mB(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=rl}OO({value:r,inclusive:i},{value:c,inclusive:g})>0&&(r=c,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];OO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Au{constructor(e,t=null,r=[],i=[],u=null,c="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function qO(n,e,t,r,i,u,c,g){return new Au(n,e,t,r,i,u,c,g)}function yg(n){return new Au(n)}function ZO(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function kM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ZC(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function FM(n){return null!==n.collectionGroup}function ih(n){const e=je(n);if(null===e.wt){e.wt=[];const t=ZC(e),r=kM(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new gg(t)),e.wt.push(new gg(Xn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new gg(Xn.keyField(),u))}}}return e.wt}function Fi(n){const e=je(n);if(!e._t)if("F"===e.limitType)e._t=OM(e.path,e.collectionGroup,ih(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ih(e))t.push(new gg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ol(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ol(e.startAt.position,e.startAt.inclusive):null;e._t=OM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function LM(n,e){e.getFirstInequalityField(),ZC(n);const t=n.filters.concat([e]);return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function KC(n,e,t){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kv(n,e){return Zv(Fi(n),Fi(e))&&n.limitType===e.limitType}function KO(n){return`${rh(Fi(n))}|lt:${n.limitType}`}function VM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>jO(r)).join(", ")}]`),jv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pg(r)).join(",")),`Target(${t})`}(Fi(n))}; limitType=${n.limitType})`}function Yv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Be.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of ih(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const g=FO(i,u,c);return i.inclusive?g<=0:g<0}(t.startAt,ih(t),r)||t.endAt&&!function(i,u,c){const g=FO(i,u,c);return i.inclusive?g>=0:g>0}(t.endAt,ih(t),r)));var t,r}function YO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QO(n){return(e,t)=>{let r=!1;for(const i of ih(n)){const u=bB(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function bB(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(i,u,c){const g=u.data.field(i),_=c.data.field(i);return null!==g&&null!==_?sl(g,_):Ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye()}}class Mu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return TO(this.inner)}size(){return this.innerSize}}const TB=new vn(Be.comparator);function Xi(){return TB}const JO=new vn(Be.comparator);function Qv(...n){let e=JO;for(const t of n)e=e.insert(t.key,t);return e}function XO(n){let e=JO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wa(){return Jv()}function ek(){return Jv()}function Jv(){return new Mu(n=>n.toString(),(n,e)=>n.isEqual(e))}const SB=new vn(Be.comparator),AB=new Mn(Be.comparator);function jt(...n){let e=AB;for(const t of n)e=e.add(t);return e}const MB=new Mn(xt);function UM(){return MB}function tk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hv(e)?"-0":e}}function nk(n){return{integerValue:""+n}}function rk(n,e){return _O(e)?nk(e):tk(n,e)}class YC{constructor(){this._=void 0}}function xB(n,e,t){return n instanceof _g?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$C(i)&&(i=jC(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof sh?sk(n,e):n instanceof oh?ok(n,e):function(r,i){const u=ik(r,i),c=ak(u)+ak(r.gt);return xM(u)&&xM(r.gt)?nk(c):tk(r.serializer,c)}(n,e)}function RB(n,e,t){return n instanceof sh?sk(n,e):n instanceof oh?ok(n,e):t}function ik(n,e){return n instanceof vg?xM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class _g extends YC{}class sh extends YC{constructor(e){super(),this.elements=e}}function sk(n,e){const t=uk(e);for(const r of n.elements)t.some(i=>va(i,r))||t.push(r);return{arrayValue:{values:t}}}class oh extends YC{constructor(e){super(),this.elements=e}}function ok(n,e){let t=uk(e);for(const r of n.elements)t=t.filter(i=>!va(i,r));return{arrayValue:{values:t}}}class vg extends YC{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ak(n){return er(n.integerValue||n.doubleValue)}function uk(n){return Wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xv{constructor(e,t){this.field=e,this.transform=t}}class NB{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function QC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class JC{}function ck(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Eg(n.key,Bn.none()):new wg(n.key,n.data,Bn.none());{const t=n.data,r=ii.empty();let i=new Mn(Xn.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new xu(n.key,r,new Ji(i.toArray()),Bn.none())}}function OB(n,e,t){n instanceof wg?function(r,i,u){const c=r.value.clone(),g=hk(r.fieldTransforms,i,u.transformResults);c.setAll(g),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof xu?function(r,i,u){if(!QC(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=hk(r.fieldTransforms,i,u.transformResults),g=i.data;g.setAll(dk(r)),g.setAll(c),i.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function e0(n,e,t,r){return n instanceof wg?function(i,u,c,g){if(!QC(i.precondition,u))return c;const _=i.value.clone(),I=fk(i.fieldTransforms,g,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof xu?function(i,u,c,g){if(!QC(i.precondition,u))return c;const _=fk(i.fieldTransforms,g,u),I=u.data;return I.setAll(dk(i)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(c=t,QC(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function kB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=ik(r.transform,i||null);null!=u&&(null===t&&(t=ii.empty()),t.set(r.field,u))}return t||null}function lk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hg(t,r,(i,u)=>function PB(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof sh&&r instanceof sh||t instanceof oh&&r instanceof oh?hg(t.elements,r.elements,va):t instanceof vg&&r instanceof vg?va(t.gt,r.gt):t instanceof _g&&r instanceof _g);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class wg extends JC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xu extends JC{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function dk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hk(n,e,t){const r=new Map;ht(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,g=e.data.field(u.field);r.set(u.field,RB(c,g,t[i]))}return r}function fk(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,xB(u,c,e))}return r}class Eg extends JC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BM extends JC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $M{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&OB(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=e0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=e0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ek();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let g=this.applyToLocalView(c,u.mutatedFields);g=t.has(i.key)?null:g;const _=ck(c,g);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&hg(this.mutations,e.mutations,(t,r)=>lk(t,r))&&hg(this.baseMutations,e.baseMutations,(t,r)=>lk(t,r))}}class jM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length);let i=SB;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new jM(e,t,r,i)}}class HM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class LB{constructor(e,t){this.count=e,this.unchangedNames=t}}var wr,rn;function pk(n){switch(n){default:return Ye();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function gk(n){if(void 0===n)return cr("GRPC error has no .code"),te.UNKNOWN;switch(n){case wr.OK:return te.OK;case wr.CANCELLED:return te.CANCELLED;case wr.UNKNOWN:return te.UNKNOWN;case wr.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case wr.INTERNAL:return te.INTERNAL;case wr.UNAVAILABLE:return te.UNAVAILABLE;case wr.UNAUTHENTICATED:return te.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case wr.NOT_FOUND:return te.NOT_FOUND;case wr.ALREADY_EXISTS:return te.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return te.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case wr.ABORTED:return te.ABORTED;case wr.OUT_OF_RANGE:return te.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return te.UNIMPLEMENTED;case wr.DATA_LOSS:return te.DATA_LOSS;default:return Ye()}}(rn=wr||(wr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class zM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return XC}static getOrCreateInstance(){return null===XC&&(XC=new zM),XC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let XC=null;function mk(){return new TextEncoder}const VB=new lg([4294967295,4294967295],0);function yk(n){const e=mk().encode(n),t=new RU;return t.update(e),new Uint8Array(t.digest())}function _k(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new lg([t,r],0),new lg([i,u],0)]}class GM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new t0(`Invalid padding: ${t}`);if(r<0)throw new t0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new t0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new t0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=lg.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(lg.fromNumber(r)));return 1===i.compare(VB)&&(i=new lg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=yk(e),[r,i]=_k(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new GM(u,i,t);return r.forEach(g=>c.insert(g)),c}insert(e){if(0===this.It)return;const t=yk(e),[r,i]=_k(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class t0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class n0{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,r0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n0(ft.min(),i,new vn(xt),Xi(),jt())}}class r0{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new r0(r,t,jt(),jt(),jt())}}class eD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class vk{constructor(e,t){this.targetId=e,this.Vt=t}}class wk{constructor(e,t,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ek{constructor(){this.St=0,this.Dt=Ck(),this.Ct=Fr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=jt(),t=jt(),r=jt();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye()}}),new r0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Ck()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class UB{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Xi(),this.zt=Ik(),this.Wt=new vn(xt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const c=u.target;if(WC(c))if(0===i){const g=new Be(c.path);this.Yt(r,g,xn.newNoDocument(g,ft.min()))}else ht(1===i);else{const g=this.ie(r);if(g!==i){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=zM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(I,D,S){var L,B,J,fe,pe,Ve;const Qe={localCacheCount:D,existenceFilterCount:S.count},ot=S.unchangedNames;return ot&&(Qe.bloomFilter={applied:0===I,hashCount:null!==(L=ot?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(fe=null===(J=null===(B=ot?.bits)||void 0===B?void 0:B.bitmap)||void 0===J?void 0:J.length)&&void 0!==fe?fe:0,padding:null!==(Ve=null===(pe=ot?.bits)||void 0===pe?void 0:pe.padding)&&void 0!==Ve?Ve:0}),Qe}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:c=0},hashCount:g=0}=r;let _,I;try{_=Su(u).toUint8Array()}catch(D){if(D instanceof AO)return Vs("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{I=new GM(_,c,g)}catch(D){return Vs(D instanceof t0?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===I.It?1:i!==t-this.oe(e.targetId,I)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const c=this.Gt.ue(),g=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,c)=>{const g=this.se(c);if(g){if(u.current&&WC(g.target)){const _=new Be(g.target.path);null!==this.jt.get(_)||this.ae(c,_)||this.Yt(c,_,xn.newNoDocument(_,e))}u.Mt&&(t.set(c,u.Ot()),u.Ft())}});let r=jt();this.zt.forEach((u,c)=>{let g=!0;c.forEachWhile(_=>{const I=this.se(_);return!I||"TargetPurposeLimboResolution"===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,c)=>c.setReadTime(e));const i=new n0(e,t,this.Wt,this.jt,r);return this.jt=Xi(),this.zt=Ik(),this.Wt=new vn(xt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ek,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Mn(xt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ek),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Ik(){return new vn(Be.comparator)}function Ck(){return new vn(Be.comparator)}const BB={asc:"ASCENDING",desc:"DESCENDING"},$B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jB={and:"AND",or:"OR"};class HB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function WM(n,e){return n.useProto3Json||jv(e)?e:{value:e}}function Ig(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zB(n,e){return Ig(n,e.toTimestamp())}function lr(n){return ht(!!n),ft.fromTimestamp(function(e){const t=tl(e);return new Un(t.seconds,t.nanos)}(n))}function qM(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bk(n){const e=nn.fromString(n);return ht(Ok(e)),e}function s0(n,e){return qM(n.databaseId,e.path)}function Ea(n,e){const t=bk(e);if(t.get(1)!==n.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(Sk(t))}function ZM(n,e){return qM(n.databaseId,e)}function Tk(n){const e=bk(n);return 4===e.length?nn.emptyPath():Sk(e)}function o0(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sk(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ak(n,e,t){return{name:s0(n,e),fields:t.value.mapValue.fields}}function Mk(n,e,t){const r=Ea(n,e.name),i=lr(e.updateTime),u=e.createTime?lr(e.createTime):ft.min(),c=new ii({mapValue:{fields:e.fields}}),g=xn.newFoundDocument(r,i,u,c);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function a0(n,e){let t;if(e instanceof wg)t={update:Ak(n,e.key,e.value)};else if(e instanceof Eg)t={delete:s0(n,e.key)};else if(e instanceof xu)t={update:Ak(n,e.key,e.data),updateMask:JB(e.fieldMask)};else{if(!(e instanceof BM))return Ye();t={verify:s0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof _g)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof sh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof oh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof vg)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw Ye()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:zB(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ye()),t;var i}function KM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Bn.updateTime(lr(i.updateTime)):void 0!==i.exists?Bn.exists(i.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let g=null;"setToServerValue"in c?(ht("REQUEST_TIME"===c.setToServerValue),g=new _g):"appendMissingElements"in c?g=new sh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new oh(c.removeAllFromArray.values||[]):"increment"in c?g=new vg(u,c.increment):Ye();const _=Xn.fromServerFormat(c.fieldPath);return new Xv(_,g)}(n,i)):[];var i;if(e.update){const i=Ea(n,e.update.name),u=new ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ji((e.updateMask.fieldPaths||[]).map(I=>Xn.fromServerFormat(I)));return new xu(i,u,c,t,r)}return new wg(i,u,t,r)}if(e.delete){const i=Ea(n,e.delete);return new Eg(i,t)}if(e.verify){const i=Ea(n,e.verify);return new BM(i,t)}return Ye()}function xk(n,e){return{documents:[ZM(n,e.path)]}}function YM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ZM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ZM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return Nk(ln.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:al((D=I).field),direction:KB(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=WM(n,e.limit);var g,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Rk(n){let e=Tk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=function(D){const S=Pk(D);return S instanceof ln&&PM(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new gg(Cg((S=D).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(D){let S;return S="object"==typeof D?D.value:D,jv(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new ol((D=t.startAt).values||[],!!D.before));let I=null;return t.endAt&&(I=function(D){return new ol(D.values||[],!D.before)}(t.endAt)),qO(e,i,c,u,g,"F",_,I)}function Pk(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cg(e.unaryFilter.field);return Yt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Cg(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cg(e.unaryFilter.field);return Yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Cg(e.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}(n):void 0!==n.fieldFilter?Yt.create(Cg((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ln.create(e.compositeFilter.filters.map(t=>Pk(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ye()}}(e.compositeFilter.op))}(n):Ye();var e}function KB(n){return BB[n]}function YB(n){return $B[n]}function QB(n){return jB[n]}function al(n){return{fieldPath:n.canonicalString()}}function Cg(n){return Xn.fromServerFormat(n.fieldPath)}function Nk(n){return n instanceof Yt?function(e){if("=="===e.op){if(RO(e.value))return{unaryFilter:{field:al(e.field),op:"IS_NAN"}};if(xO(e.value))return{unaryFilter:{field:al(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(RO(e.value))return{unaryFilter:{field:al(e.field),op:"IS_NOT_NAN"}};if(xO(e.value))return{unaryFilter:{field:al(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(e.field),op:YB(e.op),value:e.value}}}(n):n instanceof ln?function(e){const t=e.getFilters().map(r=>Nk(r));return 1===t.length?t[0]:{compositeFilter:{op:QB(e.op),filters:t}}}(n):Ye()}function JB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ok(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ru{constructor(e,t,r,i,u=ft.min(),c=ft.min(),g=Fr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kk{constructor(e){this.fe=e}}function Fk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:s0(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ig(i,u.version.toTimestamp()),createTime:Ig(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ah(e.version)};else{if(!e.isUnknownDocument())return Ye();r.unknownDocument={path:t.path.toArray(),version:ah(e.version)}}var i,u;return r}function tD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ah(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uh(n){const e=new Un(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function ch(n,e){const t=(e.baseMutations||[]).map(u=>KM(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>KM(n.fe,u)),i=Un.fromMillis(e.localWriteTimeMs);return new $M(e.batchId,i,t,r)}function u0(n){const e=uh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uh(n.lastLimboFreeSnapshotVersion):ft.min();let r;var i;return void 0!==n.query.documents?(ht(1===(i=n.query).documents.length),r=Fi(yg(Tk(i.documents[0])))):r=Fi(Rk(n.query)),new Ru(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fr.fromBase64String(n.resumeToken))}function Lk(n,e){const t=ah(e.snapshotVersion),r=ah(e.lastLimboFreeSnapshotVersion);let i;i=WC(e.target)?xk(n.fe,e.target):YM(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function QM(n){const e=Rk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?KC(e,e.limit,"L"):e}function JM(n,e){return new HM(e.largestBatchId,KM(n.fe,e.overlayMutation))}function Vk(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}function Uk(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ah(r.readTime),documentKey:_i(r.documentKey.path),largestBatchId:r.largestBatchId}}class e${getBundleMetadata(e,t){return Bk(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:uh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Bk(e).put({bundleId:(r=t).id,createTime:ah(lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $k(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:QM(i.bundledQuery),readTime:uh(i.readTime)};var i})}saveNamedQuery(e,t){return $k(e).put({name:(r=t).name,readTime:ah(lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Bk(n){return Wr(n,"bundles")}function $k(n){return Wr(n,"namedQueries")}class nD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new nD(e,t.uid||"")}getOverlay(e,t){return c0(e).get(Vk(this.userId,t)).next(r=>r?JM(this.serializer,r):null)}getOverlays(e,t){const r=wa();return Q.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const g=new HM(t,c);i.push(this.we(e,g))}),Q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(_i(c.getCollectionPath())));const u=[];return i.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(c0(e).J("collectionPathOverlayIndex",g))}),Q.waitFor(u)}getOverlaysForCollection(e,t,r){const i=wa(),u=_i(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return c0(e).j("collectionPathOverlayIndex",c).next(g=>{for(const _ of g){const I=JM(this.serializer,_);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=wa();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return c0(e).X({index:"collectionGroupOverlayIndex",range:g},(_,I,D)=>{const S=JM(this.serializer,I);u.size()<i||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>u)}we(e,t){return c0(e).put(function(r,i,u){const[c,g,_]=Vk(i,u.mutation.key);return{userId:i,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:a0(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function c0(n){return Wr(n,"documentOverlays")}class lh{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Hv(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Su(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?PO(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ye()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Be.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function t$(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function jk(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=t$(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}lh.Ve=new lh;class n${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=jk(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=jk(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r${constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class i${constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class l0{constructor(){this.je=new n$,this.ze=new r$(this.je),this.We=new i$(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class dh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new dh(this.indexId,this.documentKey,this.arrayValue,r)}}function ul(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Hk(n.arrayValue,e.arrayValue),0!==t?t:(t=Hk(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function Hk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class s${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ht(e.collectionGroup===this.collectionId);const t=DM(e);if(void 0!==t&&!this.en(t))return!1;const r=eh(e);let i=new Set,u=0,c=0;for(;u<r.length&&this.en(r[u]);++u)i=i.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[c++],g))return!1}++u}for(;u<r.length;++u)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zk(n){var e,t;if(ht(n instanceof Yt||n instanceof ln),n instanceof Yt){if(n instanceof zO){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Yt.create(n.field,"==",u)))||[];return ln.create(i,"or")}return n}const r=n.filters.map(i=>zk(i));return ln.create(r,n.op)}function o$(n){if(0===n.getFilters().length)return[];const e=tx(zk(n));return ht(Gk(e)),XM(e)||ex(e)?[e]:e.getFilters()}function XM(n){return n instanceof Yt}function ex(n){return n instanceof ln&&PM(n)}function Gk(n){return XM(n)||ex(n)||function(e){if(e instanceof ln&&RM(e)){for(const t of e.getFilters())if(!XM(t)&&!ex(t))return!1;return!0}return!1}(n)}function tx(n){if(ht(n instanceof Yt||n instanceof ln),n instanceof Yt)return n;if(1===n.filters.length)return tx(n.filters[0]);const e=n.filters.map(r=>tx(r));let t=ln.create(e,n.op);return t=rD(t),Gk(t)?t:(ht(t instanceof ln),ht(mg(t)),ht(t.filters.length>1),t.filters.reduce((r,i)=>nx(r,i)))}function nx(n,e){let t;return ht(n instanceof Yt||n instanceof ln),ht(e instanceof Yt||e instanceof ln),t=n instanceof Yt?e instanceof Yt?ln.create([n,e],"and"):Wk(n,e):e instanceof Yt?Wk(e,n):function(r,i){if(ht(r.filters.length>0&&i.filters.length>0),mg(r)&&mg(i))return $O(r,i.getFilters());const u=RM(r)?r:i,c=RM(r)?i:r,g=u.filters.map(_=>nx(_,c));return ln.create(g,"or")}(n,e),rD(t)}function Wk(n,e){if(mg(e))return $O(e,n.getFilters());{const t=e.filters.map(r=>nx(n,r));return ln.create(t,"or")}}function rD(n){if(ht(n instanceof Yt||n instanceof ln),n instanceof Yt)return n;const e=n.getFilters();if(1===e.length)return rD(e[0]);if(UO(n))return n;const t=e.map(i=>rD(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof ln&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ln.create(r,n.op)}class a${constructor(){this.rn=new rx}addToCollectionParentIndex(e,t){return this.rn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(ps.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class rx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(nn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(nn.comparator)).toArray()}}const iD=new Uint8Array(0);class u${constructor(e,t){this.user=e,this.databaseId=t,this.on=new rx,this.un=new Mu(r=>rh(r),(r,i)=>Zv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:_i(i)};return qk(e).put(u)}return Q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hO(t),""],!1,!0);return qk(e).j(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(_a(c.parent))}return r})}addFieldIndex(e,t){const r=sD(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=h0(e);return u.next(g=>{c.put(Uk(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=sD(e),i=h0(e),u=d0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=d0(e);let i=!0;const u=new Map;return Q.forEach(this.cn(t),c=>this.an(e,c).next(g=>{i&&(i=!!g),u.set(c,g)})).next(()=>{if(i){let c=jt();const g=[];return Q.forEach(u,(_,I)=>{var D;be("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`} to execute ${rh(t)}`);const S=function(ot,Ct){const Bt=DM(Ct);if(void 0===Bt)return null;for(const en of qC(ot,Bt.fieldPath))switch(en.op){case"array-contains-any":return en.value.arrayValue.values||[];case"array-contains":return[en.value]}return null}(I,_),L=function(ot,Ct){const Bt=new Map;for(const en of eh(Ct))for(const Ii of qC(ot,en.fieldPath))switch(Ii.op){case"==":case"in":Bt.set(en.fieldPath.canonicalString(),Ii.value);break;case"not-in":case"!=":return Bt.set(en.fieldPath.canonicalString(),Ii.value),Array.from(Bt.values())}return null}(I,_),B=function(ot,Ct){const Bt=[];let en=!0;for(const Ii of eh(Ct)){const Dh=0===Ii.kind?GO(ot,Ii.fieldPath,ot.startAt):WO(ot,Ii.fieldPath,ot.startAt);Bt.push(Dh.value),en&&(en=Dh.inclusive)}return new ol(Bt,en)}(I,_),J=function(ot,Ct){const Bt=[];let en=!0;for(const Ii of eh(Ct)){const Dh=0===Ii.kind?WO(ot,Ii.fieldPath,ot.endAt):GO(ot,Ii.fieldPath,ot.endAt);Bt.push(Dh.value),en&&(en=Dh.inclusive)}return new ol(Bt,en)}(I,_),fe=this.hn(_,I,B),pe=this.hn(_,I,J),Ve=this.ln(_,I,L),Qe=this.fn(_.indexId,S,fe,B.inclusive,pe,J.inclusive,Ve);return Q.forEach(Qe,ot=>r.H(ot,t.limit).next(Ct=>{Ct.forEach(Bt=>{const en=Be.fromSegments(Bt.documentKey);c.has(en)||(c=c.add(en),g.push(en))})}))}).next(()=>g)}return Q.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:o$(ln.create(e.filters,"and")).map(r=>OM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,c,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const L=t?this.dn(t[S/I]):iD,B=this.wn(e,L,r[S%I],i),J=this._n(e,L,u[S%I],c),fe=g.map(pe=>this.wn(e,L,pe,!0));D.push(...this.createRange(B,J,fe))}return D}wn(e,t,r,i){const u=new dh(e,Be.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new dh(e,Be.empty(),t,r);return i?u.Je():u}an(e,t){const r=new s$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const g of u)r.tn(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return Q.forEach(i,u=>this.an(e,u).next(c=>{c?0!==r&&c.fields.length<function(g){let _=new Mn(Xn.comparator),I=!1;for(const D of g.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?I=!0:_=_.add(S.field));for(const D of g.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(I?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new l0;for(const i of eh(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.He(i.kind);lh.Ve._e(u,c)}return r.Qe()}dn(e){const t=new l0;return lh.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new l0;return lh.Ve._e(nh(this.databaseId,t),r.He(function(i){const u=eh(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new l0);let u=0;for(const c of eh(e)){const g=r[u++];for(const _ of i)if(this.yn(t,c.fieldPath)&&Wv(g))i=this.pn(i,c,g);else{const I=_.He(c.kind);lh.Ve._e(g,I)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of i){const _=new l0;_.seed(g.Qe()),lh.Ve._e(c,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sD(e),i=h0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return Q.forEach(u,g=>i.get([g.indexId,this.uid]).next(_=>{c.push(function(I,D){const S=D?new Bv(D.sequenceNumber,new ps(uh(D.readTime),new Be(_a(D.documentKey)),D.largestBatchId)):Bv.empty(),L=I.fields.map(([B,J])=>new LC(Xn.fromServerFormat(B),J));return new FC(I.indexId,I.collectionGroup,L,S)}(g,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sD(e),u=h0(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>Q.forEach(g,_=>u.put(Uk(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return Q.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?Q.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),Q.forEach(g,_=>this.En(e,i,_).next(I=>{const D=this.An(u,_);return I.isEqual(D)?Q.resolve():this.vn(e,u,_,I,D)}))))})}Rn(e,t,r,i){return d0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return d0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=d0(e);let u=new Mn(ul);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,g)=>{u=u.add(new dh(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Mn(ul);const i=this.mn(t,e);if(null==i)return r;const u=DM(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Wv(c))for(const g of c.arrayValue.values||[])r=r.add(new dh(t.indexId,e.key,this.dn(g),i))}else r=r.add(new dh(t.indexId,e.key,iD,i));return r}vn(e,t,r,i,u){be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,_,I,D,S){const L=g.getIterator(),B=_.getIterator();let J=fg(L),fe=fg(B);for(;J||fe;){let pe=!1,Ve=!1;if(J&&fe){const Qe=I(J,fe);Qe<0?Ve=!0:Qe>0&&(pe=!0)}else null!=J?Ve=!0:pe=!0;pe?(D(fe),fe=fg(B)):Ve?(S(J),J=fg(L)):(J=fg(L),fe=fg(B))}}(i,u,ul,g=>{c.push(this.Rn(e,t,r,g))},g=>{c.push(this.Pn(e,t,r,g))}),Q.waitFor(c)}Tn(e){let t=1;return h0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>ul(c,g)).filter((c,g,_)=>!g||0!==ul(c,_[g-1]));const i=[];i.push(e);for(const c of r){const g=ul(c,e),_=ul(c,t);if(0===g)i[0]=e.Je();else if(g>0&&_<0)i.push(c),i.push(c.Je());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,iD,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,iD,[]]))}return u}bn(e,t){return ul(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zk)}getMinOffset(e,t){return Q.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||Ye())).next(Zk)}}function qk(n){return Wr(n,"collectionParents")}function d0(n){return Wr(n,"indexEntries")}function sD(n){return Wr(n,"indexConfiguration")}function h0(n){return Wr(n,"indexState")}function Zk(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;bM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const Kk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yk(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:c},(D,S,L)=>(g++,L.delete()));u.push(_.next(()=>{ht(1===g)}));const I=[];for(const D of t.mutations){const S=EO(e,D.key.path,t.batchId);u.push(i.delete(S)),I.push(D.key)}return Q.waitFor(u).next(()=>I)}function oD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ye();e=n.noDocument}return JSON.stringify(e).length}vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class aD{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){ht(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new aD(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cl(e).X({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Dg(e),c=cl(e);return c.add({}).next(g=>{ht("number"==typeof g);const _=new $M(g,t,r,i),I=function(L,B,J){const fe=J.baseMutations.map(Ve=>a0(L.fe,Ve)),pe=J.mutations.map(Ve=>a0(L.fe,Ve));return{userId:B,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:fe,mutations:pe}}(this.serializer,this.userId,_),D=[];let S=new Mn((L,B)=>xt(L.canonicalString(),B.canonicalString()));for(const L of i){const B=EO(this.userId,L.key.path,g);S=S.add(L.key.path.popLast()),D.push(c.put(I)),D.push(u.put(B,KU))}return S.forEach(L=>{D.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),Q.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return cl(e).get(t).next(r=>r?(ht(r.userId===this.userId),ch(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?Q.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return cl(e).X({index:"userMutationsIndex",range:i},(c,g,_)=>{g.userId===this.userId&&(ht(g.batchId>=r),u=ch(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return cl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cl(e).j("userMutationsIndex",t).next(r=>r.map(i=>ch(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=UC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Dg(e).X({range:i},(c,g,_)=>{const[I,D,S]=c,L=_a(D);if(I===this.userId&&t.path.isEqual(L))return cl(e).get(S).next(B=>{if(!B)throw Ye();ht(B.userId===this.userId),u.push(ch(this.serializer,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(xt);const i=[];return t.forEach(u=>{const c=UC(this.userId,u.path),g=IDBKeyRange.lowerBound(c),_=Dg(e).X({range:g},(I,D,S)=>{const[L,B,J]=I,fe=_a(B);L===this.userId&&u.path.isEqual(fe)?r=r.add(J):S.done()});i.push(_)}),Q.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=UC(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new Mn(xt);return Dg(e).X({range:c},(_,I,D)=>{const[S,L,B]=_,J=_a(L);S===this.userId&&r.isPrefixOf(J)?J.length===i&&(g=g.add(B)):D.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(cl(e).get(u).next(c=>{if(null===c)throw Ye();ht(c.userId===this.userId),r.push(ch(this.serializer,c))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Yk(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Dg(e).X({range:r},(u,c,g)=>{if(u[0]===this.userId){const _=_a(u[1]);i.push(_)}else g.done()}).next(()=>{ht(0===i.length)})})}containsKey(e,t){return Qk(e,this.userId,t)}xn(e){return Jk(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qk(n,e,t){const r=UC(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Dg(n).X({range:u,Y:!0},(g,_,I)=>{const[D,S,L]=g;D===e&&S===i&&(c=!0),I.done()}).next(()=>c)}function cl(n){return Wr(n,"mutations")}function Dg(n){return Wr(n,"documentMutations")}function Jk(n){return Wr(n,"mutationQueues")}class hh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new hh(0)}static Mn(){return new hh(-1)}}class c${constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new hh(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ft.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bg(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return bg(e).X((c,g)=>{const _=u0(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>Q.waitFor(u)).next(()=>i)}forEachTarget(e,t){return bg(e).X((r,i)=>{const u=u0(i);t(u)})}$n(e){return Xk(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}On(e,t){return Xk(e).put("targetGlobalKey",t)}Fn(e,t){return bg(e).put(Lk(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return bg(e).X({range:i,index:"queryTargetsIndex"},(c,g,_)=>{const I=u0(g);Zv(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=ll(e);return t.forEach(c=>{const g=_i(c.path);i.push(u.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,c))}),Q.waitFor(i)}removeMatchingKeys(e,t,r){const i=ll(e);return Q.forEach(t,u=>{const c=_i(u.path);return Q.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ll(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ll(e);let u=jt();return i.X({range:r,Y:!0},(c,g,_)=>{const I=_a(c[1]),D=new Be(I);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=_i(t.path),i=IDBKeyRange.bound([r],[hO(r)],!1,!0);let u=0;return ll(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,g],_,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}le(e,t){return bg(e).get(t).next(r=>r?u0(r):null)}}function bg(n){return Wr(n,"targets")}function Xk(n){return Wr(n,"targetGlobal")}function ll(n){return Wr(n,"targetDocuments")}function eF([n,e],[t,r]){const i=xt(n,t);return 0===i?xt(e,r):i}class l${constructor(e){this.Ln=e,this.buffer=new Mn(eF),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xc(r)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Jc(r)}yield t.Qn(3e5)}))}}class d${constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Q.resolve(gs.ct);const r=new l$(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Kk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kk):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,c,g,_,I;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(I=Date.now(),IM()<=Yi.in.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${S} documents in `+(I-_)+`ms\nTotal Duration: ${I-D}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:S})))}}class h${constructor(e,t){this.db=e,this.garbageCollector=function nF(n,e){return new d$(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return uD(e,r)}removeReference(e,t,r){return uD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uD(e,t)}Xn(e,t){return function(r,i){let u=!1;return Jk(r).Z(c=>Qk(r,c,i).next(g=>(g&&(u=!0),Q.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(c,g)=>{if(g<=t){const _=this.Xn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,ft.min()),ll(e).delete([0,_i(c.path)])))});i.push(_)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uD(e,t)}Yn(e,t){const r=ll(e);let i,u=gs.ct;return r.X({index:"documentTargetsIndex"},([c,g],{path:_,sequenceNumber:I})=>{0===c?(u!==gs.ct&&t(new Be(_a(i)),u),u=I,i=_):u=gs.ct}).next(()=>{u!==gs.ct&&t(new Be(_a(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uD(n,e){return ll(n).put((r=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:r}));var r}class rF{constructor(){this.changes=new Mu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class f${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fh(e).put(r)}removeEntry(e,t,r){return fh(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],tD(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return fh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(f0(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return fh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(f0(t))},(i,u)=>{r={document:this.ts(t,u),size:oD(u)}}).next(()=>r)}getEntries(e,t){let r=Xi();return this.ns(e,t,(i,u)=>{const c=this.ts(i,u);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Xi(),i=new vn(Be.comparator);return this.ns(e,t,(u,c)=>{const g=this.ts(u,c);r=r.insert(u,g),i=i.insert(u,oD(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return Q.resolve();let i=new Mn(aF);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(f0(i.first()),f0(i.last())),c=i.getIterator();let g=c.getNext();return fh(e).X({index:"documentKeyIndex",range:u},(_,I,D)=>{const S=Be.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&aF(g,S)<0;)r(g,null),g=c.getNext();g&&g.isEqual(S)&&(r(g,I),g=c.hasNext()?c.getNext():null),g?D.G(f0(g)):D.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),tD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fh(e).j(IDBKeyRange.bound(c,g,!0)).next(_=>{let I=Xi();for(const D of _){const S=this.ts(Be.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(Yv(t,S)||i.has(S.key))&&(I=I.insert(S.key,S))}return I})}getAllFromCollectionGroup(e,t,r,i){let u=Xi();const c=oF(t,r),g=oF(t,ps.max());return fh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(_,I,D)=>{const S=this.ts(Be.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(S.key,S),u.size===i&&D.done()}).next(()=>u)}newChangeBuffer(e){return new p$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sF(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}Zn(e,t){return sF(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function XB(n,e){let t;if(e.document)t=Mk(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=uh(e.noDocument.readTime);t=xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ye();{const r=Be.fromSegments(e.unknownDocument.path),i=uh(e.unknownDocument.version);t=xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Un(r[0],r[1]);return ft.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return xn.newInvalidDocument(e)}}function iF(n){return new f$(n)}class p$ extends rF{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Mu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Mn((u,c)=>xt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),c.isValidDocument()){const _=Fk(this.os.serializer,c);i=i.add(u.path.popLast());const I=oD(_);r+=I-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=Fk(this.os.serializer,c.convertToNoDocument(ft.min()));t.push(this.os.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),Q.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,c)=>{this.us.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function sF(n){return Wr(n,"remoteDocumentGlobal")}function fh(n){return Wr(n,"remoteDocumentsV14")}function f0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oF(n,e){const t=e.documentKey.path.toArray();return[n,tD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=xt(t[u],r[u]),i)return i;return i=xt(t.length,r.length),i||(i=xt(t[t.length-2],r[r.length-2]),i||xt(t[t.length-1],r[r.length-1]))}class g${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&e0(r.mutation,i,Ji.empty(),Un.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=wa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Qv();return u.forEach((g,_)=>{c=c.insert(g,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=wa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,g)=>{t.set(c,g)})})}computeViews(e,t,r,i){let u=Xi();const c=Jv(),g=Jv();return t.forEach((_,I)=>{const D=r.get(I.key);i.has(I.key)&&(void 0===D||D.mutation instanceof xu)?u=u.insert(I.key,I):void 0!==D?(c.set(I.key,D.mutation.getFieldMask()),e0(D.mutation,I,D.mutation.getFieldMask(),Un.now())):c.set(I.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,D)=>c.set(I,D)),t.forEach((I,D)=>{var S;return g.set(I,new g$(D,null!==(S=c.get(I))&&void 0!==S?S:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Jv();let i=new vn((c,g)=>c-g),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const g of c)g.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let D=r.get(_)||Ji.empty();D=g.applyToLocalView(I,D),r.set(_,D);const S=(i.get(g.batchId)||jt()).add(_);i=i.insert(g.batchId,S)})}).next(()=>{const c=[],g=i.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),I=_.key,D=_.value,S=ek();D.forEach(L=>{if(!u.has(L)){const B=ck(t.get(L),r.get(L));null!==B&&S.set(L,B),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,I,S))}return Q.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Be.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):Q.resolve(wa());let g=-1,_=u;return c.next(I=>Q.forEach(I,(D,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(D)?Q.resolve():this.remoteDocumentCache.getEntry(e,D).next(L=>{_=_.insert(D,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,jt())).next(D=>({batchId:g,changes:XO(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=Qv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Qv();return this.indexManager.getCollectionParents(e,i).next(c=>Q.forEach(c,g=>{const _=(I=t,D=g.child(i),new Au(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((g,_)=>{const I=_.getKey();null===u.get(I)&&(u=u.insert(I,xn.newInvalidDocument(I)))});let c=Qv();return u.forEach((g,_)=>{const I=i.get(g);void 0!==I&&e0(I.mutation,_,Ji.empty(),Un.now()),Yv(t,_)&&(c=c.insert(g,_))}),c})}}class m${constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Q.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:lr(r.createTime)}),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:QM(r.bundledQuery),readTime:lr(r.readTime)}),Q.resolve();var r}}class y${constructor(){this.overlays=new vn(Be.comparator),this.ls=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wa();return Q.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){const i=wa(),u=t.length+1,c=new Be(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const _=g.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new vn((I,D)=>I-D);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let D=u.get(I.largestBatchId);null===D&&(D=wa(),u=u.insert(I.largestBatchId,D)),D.set(I.getKey(),I)}}const g=wa(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,D)=>g.set(I,D)),!(g.size()>=i)););return Q.resolve(g)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new HM(t,r));let u=this.ls.get(t);void 0===u&&(u=jt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class ix{constructor(){this.fs=new Mn(qr.ds),this.ws=new Mn(qr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new qr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new qr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Be(new nn([])),r=new qr(t,e),i=new qr(t,e+1),u=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),u.push(c.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Be(new nn([])),r=new qr(t,e),i=new qr(t,e+1);let u=jt();return this.ws.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new qr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Be.comparator(e.key,t.key)||xt(e.As,t.As)}static _s(e,t){return xt(e.As,t.As)||Be.comparator(e.key,t.key)}}class _${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Mn(qr.ds)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const c=new $M(u,t,r,i);this.mutationQueue.push(c);for(const g of i)this.Rs=this.Rs.add(new qr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return Q.resolve(c)}lookupMutationBatch(e,t){return Q.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return Q.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qr(t,0),i=new qr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],c=>{const g=this.Ps(c.As);u.push(g)}),Q.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(xt);return t.forEach(i=>{const u=new qr(i,0),c=new qr(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,c],g=>{r=r.add(g.As)})}),Q.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const c=new qr(new Be(u),0);let g=new Mn(xt);return this.Rs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(g=g.add(_.As)),!0)},c),Q.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ht(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Q.forEach(t.mutations,i=>{const u=new qr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new qr(t,0),i=this.Rs.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Q.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class v${constructor(e){this.Ds=e,this.docs=new vn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=Xi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():xn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Xi();const c=t.path,g=new Be(c.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:I,value:{document:D}}=_.getNext();if(!c.isPrefixOf(I.path))break;I.path.length>c.length+1||bM(pO(D),r)<=0||(i.has(D.key)||Yv(t,D))&&(u=u.insert(D.key,D.mutableCopy()))}return Q.resolve(u)}getAllFromCollectionGroup(e,t,r,i){Ye()}Cs(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new w$(this)}getSize(e){return Q.resolve(this.size)}}class w$ extends rF{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class E${constructor(e){this.persistence=e,this.xs=new Mu(t=>rh(t),Zv),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ix,this.targetCount=0,this.Ms=hh.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Q.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new hh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Fn(t),Q.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),Q.waitFor(u).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),Q.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.ks.containsKey(t))}}class sx{constructor(e,t){this.$s={},this.overlays={},this.Os=new gs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new E$(this),this.indexManager=new a$,this.remoteDocumentCache=new v$(r=>this.referenceDelegate.Ls(r)),this.serializer=new kk(t),this.qs=new m$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new _$(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){be("MemoryPersistence","Starting transaction:",e);const i=new I$(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return Q.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class I$ extends mO{constructor(e){super(),this.currentSequenceNumber=e}}class cD{constructor(e){this.persistence=e,this.Qs=new ix,this.js=null}static zs(e){return new cD(e)}get Ws(){if(this.js)return this.js;throw Ye()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Ws,r=>{const i=Be.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,ft.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Q.or([()=>Q.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class C${constructor(e){this.serializer=e}O(e,t,r,i){const u=new VC("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wO,{unique:!0}),g.createObjectStore("documentMutations"),cF(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=Q.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),cF(e)),c=c.next(()=>function(g){const _=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(g,_){return _.store("mutations").j().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wO,{unique:!0});const D=_.store("mutations"),S=I.map(L=>D.put(L));return Q.waitFor(S)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(u))),r<6&&i>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(u))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(u))),r<11&&i>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:aB});_.createIndex("collectionPathOverlayIndex",uB,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",cB,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:YU});_.createIndex("documentKeyIndex",QU),_.createIndex("collectionGroupIndex",JU)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,u))),r<15&&i>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:rB}).createIndex("sequenceNumberIndex",iB,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:sB}).createIndex("documentKeyIndex",oB,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=oD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>Q.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(g=>Q.forEach(g,_=>{ht(_.userId===u.userId);const I=ch(this.serializer,_);return Yk(e,u.userId,I).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((c,g)=>{const _=new nn(c),I=[0,_i(_)];u.push(t.get(I).next(D=>D?Q.resolve():t.put({targetId:0,path:_i(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Q.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:nB});const r=t.store("collectionParents"),i=new rx,u=c=>{if(i.add(c)){const g=c.lastSegment(),_=c.popLast();return r.put({collectionId:g,parent:_i(_)})}};return t.store("remoteDocuments").X({Y:!0},(c,g)=>{const _=new nn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,g,_],I)=>{const D=_a(g);return u(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=u0(i),c=Lk(this.serializer,u);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,c)=>{const g=t.store("remoteDocumentsV14"),_=(I=c,I.document?new Be(nn.fromString(I.document.name).popFirst(5)):I.noDocument?Be.fromSegments(I.noDocument.path):I.unknownDocument?Be.fromSegments(I.unknownDocument.path):Ye()).path.toArray();var I;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(g.put(D))}).next(()=>Q.waitFor(i))}si(e,t){const r=t.store("mutations"),i=iF(this.serializer),u=new sx(cD.zs,this.serializer.fe);return r.j().next(c=>{const g=new Map;return c.forEach(_=>{var I;let D=null!==(I=g.get(_.userId))&&void 0!==I?I:jt();ch(this.serializer,_).keys().forEach(S=>D=D.add(S)),g.set(_.userId,D)}),Q.forEach(g,(_,I)=>{const D=new Gr(I),S=nD.de(this.serializer,D),L=u.getIndexManager(D),B=aD.de(D,this.serializer,L,u.referenceDelegate);return new uF(i,B,S,L).recalculateAndSaveOverlaysForDocumentKeys(new AM(t,gs.ct),_).next()})})}}function cF(n){n.createObjectStore("targetDocuments",{keyPath:eB}).createIndex("documentTargetsIndex",tB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XU,{unique:!0}),n.createObjectStore("targetGlobal")}const ox="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ax{constructor(e,t,r,i,u,c,g,_,I,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=c,this.document=g,this.ri=I,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!ax.D())throw new he(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h$(this,i),this.di=t+"main",this.serializer=new kk(_),this.wi=new wo(this.di,this.ui,new C$(this.serializer)),this.Bs=new c$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iF(this.serializer),this.qs=new e$,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(te.FAILED_PRECONDITION,ox);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new gs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,W.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,W.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Xc(e))return be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return p0(e).get("owner").next(t=>Q.resolve(this.Ri(t)))}Pi(e){return dD(e).delete(this.clientId)}bi(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Wr(r,"clientMetadata");return i.j().next(u=>{const c=e.Si(u,18e5),g=u.filter(_=>-1===c.indexOf(_));return Q.forEach(g,_=>i.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Q.resolve(!0):p0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new he(te.FAILED_PRECONDITION,ox);return!1}}return!(!this.networkEnabled||!this.inForeground)||dD(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,W.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new AM(t,gs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>dD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return aD.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u$(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return nD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.ui)?dB:14===c?DO:13===c?CO:12===c?lB:11===c?IO:void Ye();var c;let g;return this.wi.runTransaction(e,i,u,_=>(g=new AM(_,this.Os?this.Os.next():gs.ct),"readwrite-primary"===t?this.Ti(g).next(I=>!!I||this.Ei(g)).next(I=>{if(!I)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new he(te.FAILED_PRECONDITION,gO);return r(g)}).next(I=>this.vi(g).next(()=>I)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return p0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(te.FAILED_PRECONDITION,ox)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return p0(e).put("owner",t)}static D(){return wo.D()}Ai(e){const t=p0(e);return t.get("owner").next(r=>this.Ri(r)?(be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Q.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,dt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function p0(n){return Wr(n,"owner")}function dD(n){return Wr(n,"clientMetadata")}function ux(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=jt(),i=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new cx(e,t.fromCache,r,i)}}class lF{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(ZO(t))return Q.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=KC(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=jt(...u);return this.Ui.getDocuments(e,c).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.ji(t,g);return this.zi(t,I,c,_.readTime)?this.Ki(e,KC(t,null,"F")):this.Wi(e,I,t,_)}))})))}Gi(e,t,r,i){return ZO(t)||i.isEqual(ft.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const c=this.ji(t,u);return this.zi(t,c,r,i)?this.Qi(e,t):(IM()<=Yi.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),VM(t)),this.Wi(e,c,t,fO(i,-1)))})}ji(e,t){let r=new Mn(QO(e));return t.forEach((i,u)=>{Yv(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return IM()<=Yi.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",VM(t)),this.Ui.getDocumentsMatchingQuery(e,t,ps.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class D${constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new vn(xt),this.Yi=new Mu(u=>rh(u),Zv),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uF(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function dF(n,e,t,r){return new D$(n,e,t,r)}function hF(n,e){return lx.apply(this,arguments)}function lx(){return lx=(0,W.Z)(function*(n,e){const t=je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let _=jt();for(const I of i){c.push(I.batchId);for(const D of I.mutations)_=_.add(D.key)}for(const I of u){g.push(I.batchId);for(const D of I.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(I=>({er:I,removedBatchIds:c,addedBatchIds:g}))})})}),lx.apply(this,arguments)}function fF(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function pF(n,e,t){let r=jt(),i=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Xi();return t.forEach((g,_)=>{const I=u.get(g);_.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(g)),_.isNoDocument()&&_.version.isEqual(ft.min())?(e.removeEntry(g,_.readTime),c=c.insert(g,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),c=c.insert(g,_)):be("LocalStore","Ignoring outdated watch update for ",g,". Current version:",I.version," Watch version:",_.version)}),{nr:c,sr:i}})}function S$(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tg(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,Q.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Ru(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Sg(n,e,t){return dx.apply(this,arguments)}function dx(){return dx=(0,W.Z)(function*(n,e,t){const r=je(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Xc(c))throw c;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),dx.apply(this,arguments)}function hD(n,e,t){const r=je(n);let i=ft.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,_,I){const D=je(g),S=D.Yi.get(I);return void 0!==S?Q.resolve(D.Ji.get(S)):D.Bs.getTargetData(_,I)}(r,c,Fi(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:ft.min(),t?u:jt())).next(g=>(yF(r,YO(e),g),{documents:g,ir:u})))}function gF(n,e){const t=je(n),r=je(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(c=>c?c.target:null))}function mF(n,e){const t=je(n),r=t.Xi.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,fO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(yF(t,e,i),i))}function yF(n,e,t){let r=n.Xi.get(e)||ft.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function hx(){return hx=(0,W.Z)(function*(n,e,t,r){const i=je(n);let u=jt(),c=Xi();for(const I of t){const D=e.rr(I.metadata.name);I.document&&(u=u.add(D));const S=e.ur(I);S.setReadTime(e.cr(I.metadata.readTime)),c=c.insert(D,S)}const g=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Tg(i,(I=r,Fi(yg(nn.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>pF(I,g,c).next(D=>(g.apply(I),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>i.Bs.addMatchingKeys(I,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,D.nr,D.sr)).next(()=>D.nr)))}),hx.apply(this,arguments)}function M$(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,W.Z)(function*(n,e,t=jt()){const r=yield Tg(n,Fi(QM(e.bundledQuery))),i=je(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=lr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Fr.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(g.targetId,g),i.Bs.updateTargetData(u,g).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),fx.apply(this,arguments)}function _F(n,e){return`firestore_clients_${n}_${e}`}function vF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function px(n,e){return`firestore_targets_${n}_${e}`}class fD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new he(i.error.code,i.error.message))),c?new fD(e,t,i.state,u):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class g0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new he(r.error.code,r.error.message))),u?new g0(e,r.state,i):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=UM();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=_O(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new pD(e,u):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gx{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gx(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mx{constructor(){this.activeTargetIds=UM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yx{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new vn(xt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=_F(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new mx),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(_F(e.persistenceKey,i));if(u){const c=pD.ar(i,u);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(px(this.persistenceKey,e));if(r){const i=g0.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(px(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return be("SharedClientState","READ",e,t),t}setItem(e,t){be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,W.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let c=gs.ct;if(null!=u)try{const g=JSON.parse(u);ht("number"==typeof g),c=g}catch(g){cr("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);i!==gs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new fD(this.currentUser,e,t,r),u=vF(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=vF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=px(this.persistenceKey,e),u=new g0(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return pD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return fD.ar(new Gr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return g0.ar(i,t)}br(e){return gx.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,W.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),c=[],g=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(c,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=UM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class wF{constructor(){this.Hr=new mx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new mx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class x${Yr(e){}shutdown(){}}class EF{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gD=null;function _x(){return null===gD?gD=268435456+Math.round(2147483648*Math.random()):gD++,"0x"+gD.toString(16)}const R$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P${constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const wi="WebChannelConnection";class N$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const c=_x(),g=this.To(e,t);be("RestConnection",`Sending RPC '${e}' ${c}:`,g,r);const _={};return this.Eo(_,i,u),this.Ao(e,g,_,r).then(I=>(be("RestConnection",`Received RPC '${e}' ${c}: `,I),I),I=>{throw Vs("RestConnection",`RPC '${e}' ${c} failed with error: `,I,"url: ",g,"request:",r),I})}vo(e,t,r,i,u,c){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+dg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${R$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=_x();return new Promise((c,g)=>{const _=new xU;_.setWithCredentials(!0),_.listenOnce(SU.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case EM.NO_ERROR:const D=_.getResponseJson();be(wi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(D)),c(D);break;case EM.TIMEOUT:be(wi,`RPC '${e}' ${u} timed out`),g(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case EM.HTTP_ERROR:const S=_.getStatus();if(be(wi,`RPC '${e}' ${u} failed with status:`,S,"response text:",_.getResponseText()),S>0){let L=_.getResponseJson();Array.isArray(L)&&(L=L[0]);const B=L?.error;if(B&&B.status&&B.message){const J=function(fe){const pe=fe.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(pe)>=0?pe:te.UNKNOWN}(B.status);g(new he(J,B.message))}else g(new he(te.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he(te.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{be(wi,`RPC '${e}' ${u} completed.`)}});const I=JSON.stringify(i);be(wi,`RPC '${e}' ${u} sending request:`,i),_.send(t,"POST",I,r,15)})}Ro(e,t,r){const i=_x(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bU(),g=TU(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;void 0!==I&&(_.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(_.xmlHttpFactory=new MU({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const D=u.join("");be(wi,`Creating RPC '${e}' stream ${i}: ${D}`,_);const S=c.createWebChannel(D,_);let L=!1,B=!1;const J=new P$({ro:pe=>{B?be(wi,`Not sending because RPC '${e}' stream ${i} is closed:`,pe):(L||(be(wi,`Opening RPC '${e}' stream ${i} transport.`),S.open(),L=!0),be(wi,`RPC '${e}' stream ${i} sending:`,pe),S.send(pe))},oo:()=>S.close()}),fe=(pe,Ve,Qe)=>{pe.listen(Ve,ot=>{try{Qe(ot)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return fe(S,kC.EventType.OPEN,()=>{B||be(wi,`RPC '${e}' stream ${i} transport opened.`)}),fe(S,kC.EventType.CLOSE,()=>{B||(B=!0,be(wi,`RPC '${e}' stream ${i} transport closed`),J.wo())}),fe(S,kC.EventType.ERROR,pe=>{B||(B=!0,Vs(wi,`RPC '${e}' stream ${i} transport errored:`,pe),J.wo(new he(te.UNAVAILABLE,"The operation could not be completed")))}),fe(S,kC.EventType.MESSAGE,pe=>{var Ve;if(!B){const Qe=pe.data[0];ht(!!Qe);const Ct=Qe.error||(null===(Ve=Qe[0])||void 0===Ve?void 0:Ve.error);if(Ct){be(wi,`RPC '${e}' stream ${i} received error:`,Ct);const Bt=Ct.status;let en=function(Dh){const aV=wr[Dh];if(void 0!==aV)return gk(aV)}(Bt),Ii=Ct.message;void 0===en&&(en=te.INTERNAL,Ii="Unknown error status: "+Bt+" with message "+Ct.message),B=!0,J.wo(new he(en,Ii)),S.close()}else be(wi,`RPC '${e}' stream ${i} received:`,Qe),J._o(Qe)}}),fe(g,AU.STAT_EVENT,pe=>{pe.stat===aO.PROXY?be(wi,`RPC '${e}' stream ${i} detected buffering proxy`):pe.stat===aO.NOPROXY&&be(wi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{J.fo()},0),J}}function IF(){return typeof window<"u"?window:null}function mD(){return typeof document<"u"?document:null}function m0(n){return new HB(n,!0)}class vx{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class CF{constructor(e,t,r,i,u,c,g,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new vx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,W.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,W.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,W.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===te.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new he(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,W.Z)(function*(){e.state=0,e.start()}))}tu(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O$ extends CF{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function WB(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Ye(),i=e.targetChange.targetIds||[],u=function(_,I){return _.useProto3Json?(ht(void 0===I||"string"==typeof I),Fr.fromBase64String(I||"")):(ht(void 0===I||I instanceof Uint8Array),Fr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(_){const I=void 0===_.code?te.UNKNOWN:gk(_.code);return new he(I,_.message||"")}(c);t=new wk(r,i,u,g||null)}else if("documentChange"in e){const r=e.documentChange,i=Ea(n,r.document.name),u=lr(r.document.updateTime),c=r.document.createTime?lr(r.document.createTime):ft.min(),g=new ii({mapValue:{fields:r.document.fields}}),_=xn.newFoundDocument(i,u,c,g);t=new eD(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Ea(n,r.document),u=r.readTime?lr(r.readTime):ft.min(),c=xn.newNoDocument(i,u);t=new eD([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ea(n,r.document);t=new eD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ye();{const r=e.filter,{count:i=0,unchangedNames:u}=r,c=new LB(i,u);t=new vk(r.targetId,c)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ft.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?ft.min():u.readTime?lr(u.readTime):ft.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=o0(this.serializer),t.addTarget=function(i,u){let c;const g=u.target;if(c=WC(g)?{documents:xk(i,g)}:{query:YM(i,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=Dk(i,u.resumeToken);const _=WM(i,u.expectedCount);null!==_&&(c.expectedCount=_)}else if(u.snapshotVersion.compareTo(ft.min())>0){c.readTime=Ig(i,u.snapshotVersion.toTimestamp());const _=WM(i,u.expectedCount);null!==_&&(c.expectedCount=_)}return c}(this.serializer,e);const r=function ZB(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=o0(this.serializer),t.removeTarget=e,this.Wo(t)}}class k$ extends CF{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function qB(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,i){let u=lr(r.updateTime?r.updateTime:i);return u.isEqual(ft.min())&&(u=lr(i)),new NB(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.cu(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=o0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>a0(this.serializer,r))};this.Wo(t)}}class F$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new he(te.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.vo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(te.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class V${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(cr(t),this.mu=!1):be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class U${constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,W.Z)(function*(){var _;dl(c)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,W.Z)(function*(I){const D=je(I);D.vu.add(4),yield Ag(D),D.bu.set("Unknown"),D.vu.delete(4),yield y0(D)}),function(I){return _.apply(this,arguments)})(c))}))}),this.bu=new V$(r,i)}}function y0(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,W.Z)(function*(n){if(dl(n))for(const e of n.Ru)yield e(!0)}),Ex.apply(this,arguments)}function Ag(n){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,W.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),Ix.apply(this,arguments)}function yD(n,e){const t=je(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),bx(t)?Dx(t):xg(t).Ko()&&Cx(t,e))}function _0(n,e){const t=je(n),r=xg(t);t.Au.delete(e),r.Ko()&&DF(t,e),0===t.Au.size&&(r.Ko()?r.jo():dl(t)&&t.bu.set("Unknown"))}function Cx(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xg(n).su(e)}function DF(n,e){n.Vu.qt(e),xg(n).iu(e)}function Dx(n){n.Vu=new UB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),xg(n).start(),n.bu.gu()}function bx(n){return dl(n)&&!xg(n).Uo()&&n.Au.size>0}function dl(n){return 0===je(n).vu.size}function bF(n){n.Vu=void 0}function B$(n){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,W.Z)(function*(n){n.Au.forEach((e,t)=>{Cx(n,e)})}),Tx.apply(this,arguments)}function $$(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,W.Z)(function*(n,e){bF(n),bx(n)?(n.bu.Iu(e),Dx(n)):n.bu.set("Unknown")}),Sx.apply(this,arguments)}function j$(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,W.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof wk&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(i,u){const c=u.cause;for(const g of u.targetIds)i.Au.has(g)&&(yield i.remoteSyncer.rejectListen(g,c),i.Au.delete(g),i.Vu.removeTarget(g))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _D(n,r)}else if(e instanceof eD?n.Vu.Ht(e):e instanceof vk?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ft.min()))try{const r=yield fF(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.Vu.ce(u);return c.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const I=i.Au.get(_);I&&i.Au.set(_,I.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach((g,_)=>{const I=i.Au.get(g);if(!I)return;i.Au.set(g,I.withResumeToken(Fr.EMPTY_BYTE_STRING,I.snapshotVersion)),DF(i,g);const D=new Ru(I.target,g,_,I.sequenceNumber);Cx(i,D)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){be("RemoteStore","Failed to raise snapshot:",r),yield _D(n,r)}var r}),Ax.apply(this,arguments)}function _D(n,e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,W.Z)(function*(n,e,t){if(!Xc(e))throw e;n.vu.add(1),yield Ag(n),n.bu.set("Offline"),t||(t=()=>fF(n.localStore)),n.asyncQueue.enqueueRetryable((0,W.Z)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield y0(n)}))}),Mx.apply(this,arguments)}function TF(n,e){return e().catch(t=>_D(n,t,e))}function Mg(n){return xx.apply(this,arguments)}function xx(){return xx=(0,W.Z)(function*(n){const e=je(n),t=hl(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;H$(e);)try{const i=yield S$(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,z$(e,i)}catch(i){yield _D(e,i)}SF(e)&&AF(e)}),xx.apply(this,arguments)}function H$(n){return dl(n)&&n.Eu.length<10}function z$(n,e){n.Eu.push(e);const t=hl(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function SF(n){return dl(n)&&!hl(n).Uo()&&n.Eu.length>0}function AF(n){hl(n).start()}function G$(n){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,W.Z)(function*(n){hl(n).hu()}),Rx.apply(this,arguments)}function W$(n){return Px.apply(this,arguments)}function Px(){return Px=(0,W.Z)(function*(n){const e=hl(n);for(const t of n.Eu)e.uu(t.mutations)}),Px.apply(this,arguments)}function q$(n,e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,W.Z)(function*(n,e,t){const r=n.Eu.shift(),i=jM.from(r,e,t);yield TF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Mg(n)}),Nx.apply(this,arguments)}function Z$(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,W.Z)(function*(n,e){var t;e&&hl(n).ou&&(yield(t=(0,W.Z)(function*(r,i){if(pk(u=i.code)&&u!==te.ABORTED){const c=r.Eu.shift();hl(r).Qo(),yield TF(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Mg(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),SF(n)&&AF(n)}),Ox.apply(this,arguments)}function MF(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,W.Z)(function*(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const r=dl(t);t.vu.add(3),yield Ag(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield y0(t)}),kx.apply(this,arguments)}function Fx(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,W.Z)(function*(n,e){const t=je(n);e?(t.vu.delete(2),yield y0(t)):e||(t.vu.add(2),yield Ag(t),t.bu.set("Unknown"))}),Lx.apply(this,arguments)}function xg(n){return n.Su||(n.Su=function(e,t,r){const i=je(e);return i.fu(),new O$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:B$.bind(null,n),ao:$$.bind(null,n),nu:j$.bind(null,n)}),n.Ru.push(function(){var e=(0,W.Z)(function*(t){t?(n.Su.Qo(),bx(n)?Dx(n):n.bu.set("Unknown")):(yield n.Su.stop(),bF(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function hl(n){return n.Du||(n.Du=function(e,t,r){const i=je(e);return i.fu(),new k$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:G$.bind(null,n),ao:Z$.bind(null,n),au:W$.bind(null,n),cu:q$.bind(null,n)}),n.Ru.push(function(){var e=(0,W.Z)(function*(t){t?(n.Du.Qo(),yield Mg(n)):(yield n.Du.stop(),n.Eu.length>0&&(be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Vx{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,g=new Vx(e,t,c,i,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(n,e){if(cr("AsyncQueue",`${e}: ${n}`),Xc(n))return new he(te.UNAVAILABLE,`${e}: ${n}`);throw n}class Pg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Qv(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new Pg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xF{constructor(){this.Cu=new vn(Be.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ye():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ng{constructor(e,t,r,i,u,c,g,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(g=>{c.push({type:0,doc:g})}),new Ng(e,t,Pg.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class K${constructor(){this.Nu=void 0,this.listeners=[]}}class Y${constructor(){this.queries=new Mu(e=>KO(e),Kv),this.onlineState="Unknown",this.ku=new Set}}function Ux(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,W.Z)(function*(n,e){const t=je(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new K$),i)try{u.Nu=yield t.onListen(r)}catch(c){const g=Rg(c,`Initialization of query '${VM(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&Hx(t)}),Bx.apply(this,arguments)}function $x(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,W.Z)(function*(n,e){const t=je(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),jx.apply(this,arguments)}function Q$(n,e){const t=je(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const g of c.listeners)g.$u(i)&&(r=!0);c.Nu=i}}r&&Hx(t)}function J$(n,e,t){const r=je(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function Hx(n){n.ku.forEach(e=>{e.next()})}class zx{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ng(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ng.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class X${constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class RF{constructor(e){this.serializer=e}rr(e){return Ea(this.serializer,e)}ur(e){return e.metadata.exists?Mk(this.serializer,e.document,!1):xn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return lr(e)}}class ej{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PF(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=nn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new RF(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const c of i.metadata.queries){const g=(t.get(c)||jt()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,W.Z)(function*(){const t=yield function A$(n,e,t,r){return hx.apply(this,arguments)}(e.localStore,new RF(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield M$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function PF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class NF{constructor(e){this.key=e}}class OF{constructor(e){this.key=e}}class kF{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=jt(),this.mutatedKeys=jt(),this.tc=QO(e),this.ec=new Pg(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new xF,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,g=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const L=i.get(D),B=Yv(this.query,S)?S:null,J=!!L&&this.mutatedKeys.has(L.key),fe=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let pe=!1;L&&B?L.data.isEqual(B.data)?J!==fe&&(r.track({type:3,doc:B}),pe=!0):this.rc(L,B)||(r.track({type:2,doc:B}),pe=!0,(_&&this.tc(B,_)>0||I&&this.tc(B,I)<0)&&(g=!0)):!L&&B?(r.track({type:0,doc:B}),pe=!0):L&&!B&&(r.track({type:1,doc:L}),pe=!0,(_||I)&&(g=!0)),pe&&(B?(c=c.add(B),u=fe?u.add(D):u.delete(D)):(c=c.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{ec:c,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((I,D)=>function(S,L){const B=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return B(S)-B(L)}(I.type,D.type)||this.tc(I.doc,D.doc)),this.oc(r);const c=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Ng(this.query,e.ec,i,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new xF,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=jt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new OF(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new NF(r))}),t}hc(e){this.Yu=e.ir,this.Zu=jt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ng.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class tj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nj{constructor(e){this.key=e,this.fc=!1}}class rj{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Mu(g=>KO(g),Kv),this._c=new Map,this.mc=new Set,this.gc=new vn(Be.comparator),this.yc=new Map,this.Ic=new ix,this.Tc={},this.Ec=new Map,this.Ac=hh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ij(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,W.Z)(function*(n,e){const t=pR(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const c=yield Tg(t.localStore,Fi(e)),g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Wx(t,e,r,"current"===g,c.resumeToken),t.isPrimaryClient&&yD(t.remoteStore,c)}return i}),Gx.apply(this,arguments)}function Wx(n,e,t,r,i){return qx.apply(this,arguments)}function qx(){return qx=(0,W.Z)(function*(n,e,t,r,i){n.Rc=(S,L,B)=>{return(J=(0,W.Z)(function*(fe,pe,Ve,Qe){let ot=pe.view.sc(Ve);ot.zi&&(ot=yield hD(fe.localStore,pe.query,!1).then(({documents:en})=>pe.view.sc(en,ot)));const Ct=Qe&&Qe.targetChanges.get(pe.targetId),Bt=pe.view.applyChanges(ot,fe.isPrimaryClient,Ct);return rR(fe,pe.targetId,Bt.cc),Bt.snapshot}),function(fe,pe,Ve,Qe){return J.apply(this,arguments)})(n,S,L,B);var J};const u=yield hD(n.localStore,e,!0),c=new kF(e,u.ir),g=c.sc(u.documents),_=r0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=c.applyChanges(g,n.isPrimaryClient,_);rR(n,t,I.cc);const D=new tj(e,t,c);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),I.snapshot}),qx.apply(this,arguments)}function sj(n,e){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,W.Z)(function*(n,e){const t=je(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!Kv(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_0(t.remoteStore,r.targetId),Og(t,r.targetId)}).catch(Jc))):(Og(t,r.targetId),yield Sg(t.localStore,r.targetId,!0))}),Zx.apply(this,arguments)}function Kx(){return Kx=(0,W.Z)(function*(n,e,t){const r=gR(n);try{const i=yield function(u,c){const g=je(u),_=Un.now(),I=c.reduce((L,B)=>L.add(B.key),jt());let D,S;return g.persistence.runTransaction("Locally write mutations","readwrite",L=>{let B=Xi(),J=jt();return g.Zi.getEntries(L,I).next(fe=>{B=fe,B.forEach((pe,Ve)=>{Ve.isValidDocument()||(J=J.add(pe))})}).next(()=>g.localDocuments.getOverlayedDocuments(L,B)).next(fe=>{D=fe;const pe=[];for(const Ve of c){const Qe=kB(Ve,D.get(Ve.key).overlayedDocument);null!=Qe&&pe.push(new xu(Ve.key,Qe,kO(Qe.value.mapValue),Bn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,_,pe,c)}).next(fe=>{S=fe;const pe=fe.applyToLocalDocumentSet(D,J);return g.documentOverlayCache.saveOverlays(L,fe.batchId,pe)})}).then(()=>({batchId:S.batchId,changes:XO(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new vn(xt)),_=_.insert(c,g),u.Tc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Pu(r,i.changes),yield Mg(r.remoteStore)}catch(i){const u=Rg(i,"Failed to persist write");t.reject(u)}}),Kx.apply(this,arguments)}function FF(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,W.Z)(function*(n,e){const t=je(n);try{const r=yield function T$(n,e){const t=je(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const g=[];e.targetChanges.forEach((D,S)=>{const L=i.get(S);if(!L)return;g.push(t.Bs.removeMatchingKeys(u,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(u,D.addedDocuments,S)));let B=L.withSequenceNumber(u.currentSequenceNumber);var J,fe,pe;null!==e.targetMismatches.get(S)?B=B.withResumeToken(Fr.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):D.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(D.resumeToken,r)),i=i.insert(S,B),fe=B,pe=D,(0===(J=L).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,B))});let _=Xi(),I=jt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),g.push(pF(u,c,e.documentUpdates).next(D=>{_=D.nr,I=D.sr})),!r.isEqual(ft.min())){const D=t.Bs.getLastRemoteSnapshotVersion(u).next(S=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(D)}return Q.waitFor(g).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.yc.get(u);c&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?ht(c.fc):i.removedDocuments.size>0&&(ht(c.fc),c.fc=!1))}),yield Pu(t,r,e)}catch(r){yield Jc(r)}}),Yx.apply(this,arguments)}function LF(n,e,t){const r=je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,c)=>{const g=c.view.Mu(e);g.snapshot&&i.push(g.snapshot)}),function(u,c){const g=je(u);g.onlineState=c;let _=!1;g.queries.forEach((I,D)=>{for(const S of D.listeners)S.Mu(c)&&(_=!0)}),_&&Hx(g)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aj(n,e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,W.Z)(function*(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let c=new vn(Be.comparator);c=c.insert(u,xn.newNoDocument(u,ft.min()));const g=jt().add(u),_=new n0(ft.min(),new Map,new vn(xt),c,g);yield FF(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),iR(r)}else yield Sg(r.localStore,e,!1).then(()=>Og(r,e,t)).catch(Jc)}),Qx.apply(this,arguments)}function uj(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,W.Z)(function*(n,e){const t=je(n),r=e.batch.batchId;try{const i=yield function b$(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,g,_,I){const D=_.batch,S=D.keys();let L=Q.resolve();return S.forEach(B=>{L=L.next(()=>I.getEntry(g,B)).next(J=>{const fe=_.docVersions.get(B);ht(null!==fe),J.version.compareTo(fe)<0&&(D.applyToRemoteDocument(J,_),J.isValidDocument()&&(J.setReadTime(_.commitVersion),I.addEntry(J)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(g,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let g=jt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(g=g.add(c.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);nR(t,r,null),tR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pu(t,i)}catch(i){yield Jc(i)}}),Jx.apply(this,arguments)}function cj(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,W.Z)(function*(n,e,t){const r=je(n);try{const i=yield function(u,c){const g=je(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return g.mutationQueue.lookupMutationBatch(_,c).next(D=>(ht(null!==D),I=D.keys(),g.mutationQueue.removeMutationBatch(_,D))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,I,c)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>g.localDocuments.getDocuments(_,I))})}(r.localStore,e);nR(r,e,t),tR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pu(r,i)}catch(i){yield Jc(i)}}),Xx.apply(this,arguments)}function eR(){return eR=(0,W.Z)(function*(n,e){const t=je(n);dl(t.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=je(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Rg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eR.apply(this,arguments)}function tR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function nR(n,e,t){const r=je(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||VF(n,r)})}function VF(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(_0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),iR(n))}function rR(n,e,t){for(const r of t)r instanceof NF?(n.Ic.addReference(r.key,e),dj(n,r)):r instanceof OF?(be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||VF(n,r.key)):Ye()}function dj(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(be("SyncEngine","New document in limbo: "+t),n.mc.add(r),iR(n))}function iR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Be(nn.fromString(e)),r=n.Ac.next();n.yc.set(r,new nj(t)),n.gc=n.gc.insert(t,r),yD(n.remoteStore,new Ru(Fi(yg(t.path)),r,"TargetPurposeLimboResolution",gs.ct))}}function Pu(n,e,t){return sR.apply(this,arguments)}function sR(){return sR=(0,W.Z)(function*(n,e,t){const r=je(n),i=[],u=[],c=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{c.push(r.Rc(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I?.fromCache?"not-current":"current"),I){i.push(I);const D=cx.Li(_.targetId,I);u.push(D)}}))}),yield Promise.all(c),r.dc.nu(i),yield(g=(0,W.Z)(function*(_,I){const D=je(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Q.forEach(I,L=>Q.forEach(L.Fi,B=>D.persistence.referenceDelegate.addReference(S,L.targetId,B)).next(()=>Q.forEach(L.Bi,B=>D.persistence.referenceDelegate.removeReference(S,L.targetId,B)))))}catch(S){if(!Xc(S))throw S;be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of I){const L=S.targetId;if(!S.fromCache){const B=D.Ji.get(L),fe=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.Ji=D.Ji.insert(L,fe)}}}),function(_,I){return g.apply(this,arguments)})(r.localStore,u))}),sR.apply(this,arguments)}function hj(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,W.Z)(function*(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const r=yield hF(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(g=>{g.reject(new he(te.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pu(t,r.er)}var i}),oR.apply(this,arguments)}function fj(n,e){const t=je(n),r=t.yc.get(e);if(r&&r.fc)return jt().add(r.key);{let i=jt();const u=t._c.get(e);if(!u)return i;for(const c of u){const g=t.wc.get(c);i=i.unionWith(g.view.nc)}return i}}function pj(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,W.Z)(function*(n,e){const t=je(n),r=yield hD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&rR(t,e.targetId,i.cc),i}),aR.apply(this,arguments)}function gj(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,W.Z)(function*(n,e){const t=je(n);return mF(t.localStore,e).then(r=>Pu(t,r))}),uR.apply(this,arguments)}function mj(n,e,t,r){return cR.apply(this,arguments)}function cR(){return cR=(0,W.Z)(function*(n,e,t,r){const i=je(n),u=yield function(c,g){const _=je(c),I=je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>I.Sn(D,g).next(S=>S?_.localDocuments.getDocuments(D,S):Q.resolve(null)))}(i.localStore,e);var g;null!==u?("pending"===t?yield Mg(i.remoteStore):"acknowledged"===t||"rejected"===t?(nR(i,e,r||null),tR(i,e),g=e,je(je(i.localStore).mutationQueue).Cn(g)):Ye(),yield Pu(i,u)):be("SyncEngine","Cannot apply mutation batch with id: "+e)}),cR.apply(this,arguments)}function lR(){return lR=(0,W.Z)(function*(n,e){const t=je(n);if(pR(t),gR(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield UF(t,r.toArray());t.vc=!0,yield Fx(t.remoteStore,!0);for(const u of i)yD(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Og(t,c),Sg(t.localStore,c,!0))),_0(t.remoteStore,c)}),yield i,yield UF(t,r),function(u){const c=je(u);c.yc.forEach((g,_)=>{_0(c.remoteStore,_)}),c.Ic.Ts(),c.yc=new Map,c.gc=new vn(Be.comparator)}(t),t.vc=!1,yield Fx(t.remoteStore,!1)}}),lR.apply(this,arguments)}function UF(n,e,t){return dR.apply(this,arguments)}function dR(){return dR=(0,W.Z)(function*(n,e,t){const r=je(n),i=[],u=[];for(const c of e){let g;const _=r._c.get(c);if(_&&0!==_.length){g=yield Tg(r.localStore,Fi(_[0]));for(const I of _){const D=r.wc.get(I),S=yield pj(r,D);S.snapshot&&u.push(S.snapshot)}}else{const I=yield gF(r.localStore,c);g=yield Tg(r.localStore,I),yield Wx(r,BF(I),c,!1,g.resumeToken)}i.push(g)}return r.dc.nu(u),i}),dR.apply(this,arguments)}function BF(n){return qO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _j(n){const e=je(n);return je(je(e.localStore).persistence).$i()}function vj(n,e,t,r){return hR.apply(this,arguments)}function hR(){return hR=(0,W.Z)(function*(n,e,t,r){const i=je(n);if(i.vc)return void be("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield mF(i.localStore,YO(u[0])),g=n0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fr.EMPTY_BYTE_STRING);yield Pu(i,c,g);break}case"rejected":yield Sg(i.localStore,e,!0),Og(i,e,r);break;default:Ye()}}),hR.apply(this,arguments)}function wj(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,W.Z)(function*(n,e,t){const r=pR(n);if(r.vc){for(const i of e){if(r._c.has(i)){be("SyncEngine","Adding an already active target "+i);continue}const u=yield gF(r.localStore,i),c=yield Tg(r.localStore,u);yield Wx(r,BF(u),c.targetId,!1,c.resumeToken),yD(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield Sg(r.localStore,i,!1).then(()=>{_0(r.remoteStore,i),Og(r,i)}).catch(Jc))}}),fR.apply(this,arguments)}function pR(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aj.bind(null,e),e.dc.nu=Q$.bind(null,e.eventManager),e.dc.Pc=J$.bind(null,e.eventManager),e}function gR(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cj.bind(null,e),e}class v0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,W.Z)(function*(){t.serializer=m0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dF(this.persistence,new lF,e.initialUser,this.serializer)}createPersistence(e){return new sx(cD.zs,this.serializer)}createSharedClientState(e){return new wF}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mR extends v0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield gR(r.Vc.syncEngine),yield Mg(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dF(this.persistence,new lF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new tF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new qU(t,this.persistence);return new WU(e.asyncQueue,r)}createPersistence(e){const t=ux(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new ax(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,IF(),mD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wF}}class $F extends mR{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof yx&&(r.sharedClientState.syncEngine={jr:mj.bind(null,i),zr:vj.bind(null,i),Wr:wj.bind(null,i),$i:_j.bind(null,i),Qr:gj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,W.Z)(function*(c){yield function yj(n,e){return lR.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=IF();if(!yx.D(t))throw new he(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ux(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kg{initialize(e,t){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>LF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hj.bind(null,r.syncEngine),yield Fx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Y$}createDatastore(e){const t=m0(e.databaseInfo.databaseId),r=new N$(e.databaseInfo);return new F$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=g=>LF(this.syncEngine,g,0),c=EF.D()?new EF:new x$,new U$(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,g,_,I){const D=new rj(r,i,u,c,g,_);return I&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,W.Z)(function*(t){const r=je(t);be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Ag(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jF(n,e=10240){let t=0;return{read:()=>(0,W.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Cj{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new kr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,W.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new X$(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,W.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,W.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,W.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Dj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,W.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new he(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,W.Z)(function*(u,c){const g=je(u),_=o0(g.serializer)+"/documents",I={documents:c.map(B=>s0(g.serializer,B))},D=yield g.vo("BatchGetDocuments",_,I,c.length),S=new Map;D.forEach(B=>{const J=function GB(n,e){return"found"in e?function(t,r){ht(!!r.found);const i=Ea(t,r.found.name),u=lr(r.found.updateTime),c=r.found.createTime?lr(r.found.createTime):ft.min(),g=new ii({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(i,u,c,g)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const i=Ea(t,r.missing),u=lr(r.readTime);return xn.newNoDocument(i,u)}(n,e):Ye()}(g.serializer,B);S.set(J.key.toString(),J)});const L=[];return c.forEach(B=>{const J=S.get(B.toString());ht(!!J),L.push(J)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Eg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Be.fromPath(i);e.mutations.push(new BM(u,e.precondition(u)))}),yield(r=(0,W.Z)(function*(i,u){const c=je(i),g=o0(c.serializer)+"/documents",_={writes:u.map(I=>a0(c.serializer,I))};yield c.Io("Commit",g,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ye();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new he(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?Bn.exists(!1):Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new he(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bj{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new vx(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,W.Z)(function*(){const t=new Dj(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!jv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pk(t)}return!1}}class Tj{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gr.UNAUTHENTICATED,this.clientId=dO.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,W.Z)(function*(g){be("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wD(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(u){r.isEqual(u)||(yield hF(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),yR.apply(this,arguments)}function _R(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wR(n);be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>MF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>MF(e.remoteStore,u)),n._onlineComponents=e}),vR.apply(this,arguments)}function HF(n){return"FirebaseError"===n.name?n.code===te.FAILED_PRECONDITION||n.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function wR(n){return ER.apply(this,arguments)}function ER(){return ER=(0,W.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!HF(t))throw t;Vs("Error using user provided cache. Falling back to memory cache: "+t),yield wD(n,new v0)}}else be("FirestoreClient","Using default OfflineComponentProvider"),yield wD(n,new v0);return n._offlineComponents}),ER.apply(this,arguments)}function ED(n){return IR.apply(this,arguments)}function IR(){return IR=(0,W.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),yield _R(n,n._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),yield _R(n,new kg))),n._onlineComponents}),IR.apply(this,arguments)}function zF(n){return wR(n).then(e=>e.persistence)}function ID(n){return wR(n).then(e=>e.localStore)}function GF(n){return ED(n).then(e=>e.remoteStore)}function CR(n){return ED(n).then(e=>e.syncEngine)}function Fg(n){return DR.apply(this,arguments)}function DR(){return DR=(0,W.Z)(function*(n){const e=yield ED(n),t=e.eventManager;return t.onListen=ij.bind(null,e.syncEngine),t.onUnlisten=sj.bind(null,e.syncEngine),t}),DR.apply(this,arguments)}function qF(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(i,u,c,g,_){const I=new vD({next:S=>{u.enqueueAndForget(()=>$x(i,D));const L=S.docs.has(c);!L&&S.fromCache?_.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&g&&"server"===g.source?_.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new zx(yg(c.path),I,{includeMetadataChanges:!0,Ku:!0});return Ux(i,D)}(yield Fg(n),n.asyncQueue,e,t,r)})),r.promise}function ZF(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(i,u,c,g,_){const I=new vD({next:S=>{u.enqueueAndForget(()=>$x(i,D)),S.fromCache&&"server"===g.source?_.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new zx(c,I,{includeMetadataChanges:!0,Ku:!0});return Ux(i,D)}(yield Fg(n),n.asyncQueue,e,t,r)})),r.promise}function KF(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const YF=new Map;function bR(n,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QF(n,e,t,r){if(!0===e&&!0===r)throw new he(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JF(n){if(!Be.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XF(n){if(Be.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ye()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CD(n);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eL(n,e){if(e<=0)throw new he(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tL{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=KF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class w0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new OU;switch(t.type){case"firstParty":return new VU(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YF.get(e);t&&(be("ComponentProvider","Removing Datastore"),YF.delete(e),t.terminate())}(this),Promise.resolve()}}function nL(n,e,t,r={}){var i;const u=(n=Qt(n,w0))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=Gr.MOCK_USER;else{g=(0,dt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Gr(I)}n._authCredentials=new kU(new cO(g,_))}}class Rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new si(this.firestore,e,this._query)}}class Ia extends si{constructor(e,t,r){super(e,t,yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Be(e))}withConverter(e){return new Ia(this.firestore,e,this._path)}}function TR(n,e,...t){if(n=(0,dt.m9)(n),bR("collection","path",e),n instanceof w0){const r=nn.fromString(e,...t);return XF(r),new Ia(n,null,r)}{if(!(n instanceof Rn||n instanceof Ia))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return XF(r),new Ia(n.firestore,null,r)}}function E0(n,e,...t){if(n=(0,dt.m9)(n),1===arguments.length&&(e=dO.A()),bR("doc","path",e),n instanceof w0){const r=nn.fromString(e,...t);return JF(r),new Rn(n,null,new Be(r))}{if(!(n instanceof Rn||n instanceof Ia))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return JF(r),new Rn(n.firestore,n instanceof Ia?n.converter:null,new Be(r))}}function rL(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),(n instanceof Rn||n instanceof Ia)&&(e instanceof Rn||e instanceof Ia)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function SR(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),n instanceof si&&e instanceof si&&n.firestore===e.firestore&&Kv(n._query,e._query)&&n.converter===e.converter}class Fj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new vx(this,"async_queue_retry"),this.Xc=()=>{const t=mD();t&&be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=mD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=mD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new kr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,W.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Xc(t))throw t;be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,cr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Vx.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&Ye()}verifyOperationInProgress(){}sa(){var e=this;return(0,W.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function AR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Lj{constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pn extends w0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||iL(this),this._firestoreClient.terminate()}}function Uj(n,e){const t="object"==typeof n?n:(0,qt.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,qt._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const u=(0,dt.P0)("firestore");u&&nL(i,...u)}return i}function dr(n){return n._firestoreClient||iL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function iL(n){var e,t,r;const i=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pB(n._databaseId,g,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,KF(I.experimentalLongPollingOptions),I.useFetchStreams));var g,I;n._firestoreClient=new Tj(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function sL(n,e,t){const r=new kr;return n.asyncQueue.enqueue((0,W.Z)(function*(){try{yield wD(n,t),yield _R(n,e),r.resolve()}catch(i){const u=i;if(!HF(u))throw u;Vs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function oL(n){if(n._initialized||n._terminated)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ca(Fr.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ca(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ph{constructor(e){this._methodName=e}}class DD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const Kj=/^__.*__$/;class Yj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new wg(e,this.data,t,this.fieldTransforms)}}class aL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class bD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new bD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return AD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(uL(this.ca)&&Kj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Qj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||m0(e)}ya(e,t,r,i=!1){return new bD({ca:e,methodName:t,ga:r,path:Xn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gh(n){const e=n._freezeSettings(),t=m0(n._databaseId);return new Qj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TD(n,e,t,r,i,u={}){const c=n.ya(u.merge||u.mergeFields?2:0,e,t,i);PR("Data must be an object, but it was:",c,r);const g=dL(r,c);let _,I;if(u.merge)_=new Ji(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const L=D0(e,S,t);if(!c.contains(L))throw new he(te.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);fL(D,L)||D.push(L)}_=new Ji(D),I=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,I=c.fieldTransforms;return new Yj(new ii(g),_,I)}class C0 extends ph{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof C0}}function cL(n,e,t){return new bD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class MR extends ph{_toFieldTransform(e){return new Xv(e.path,new _g)}isEqual(e){return e instanceof MR}}class Jj extends ph{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=cL(this,e,!0),r=this.pa.map(u=>mh(u,t)),i=new sh(r);return new Xv(e.path,i)}isEqual(e){return this===e}}class Xj extends ph{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=cL(this,e,!0),r=this.pa.map(u=>mh(u,t)),i=new oh(r);return new Xv(e.path,i)}isEqual(e){return this===e}}class eH extends ph{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new vg(e.serializer,rk(e.serializer,this.Ia));return new Xv(e.path,t)}isEqual(e){return this===e}}function xR(n,e,t,r){const i=n.ya(1,e,t);PR("Data must be an object, but it was:",i,r);const u=[],c=ii.empty();el(r,(_,I)=>{const D=SD(e,_,t);I=(0,dt.m9)(I);const S=i.da(D);if(I instanceof C0)u.push(D);else{const L=mh(I,S);null!=L&&(u.push(D),c.set(D,L))}});const g=new Ji(u);return new aL(c,g,i.fieldTransforms)}function RR(n,e,t,r,i,u){const c=n.ya(1,e,t),g=[D0(e,r,t)],_=[i];if(u.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)g.push(D0(e,u[L])),_.push(u[L+1]);const I=[],D=ii.empty();for(let L=g.length-1;L>=0;--L)if(!fL(I,g[L])){const B=g[L];let J=_[L];J=(0,dt.m9)(J);const fe=c.da(B);if(J instanceof C0)I.push(B);else{const pe=mh(J,fe);null!=pe&&(I.push(B),D.set(B,pe))}}const S=new Ji(I);return new aL(D,S,c.fieldTransforms)}function lL(n,e,t,r=!1){return mh(t,n.ya(r?4:3,e))}function mh(n,e){if(hL(n=(0,dt.m9)(n)))return PR("Unsupported field value:",e,n),dL(n,e);if(n instanceof ph)return function(t,r){if(!uL(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let g=mh(c,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rk(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Un.fromDate(t);return{timestampValue:Ig(r.serializer,i)}}if(t instanceof Un){const i=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ig(r.serializer,i)}}if(t instanceof DD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ca)return{bytesValue:Dk(r.serializer,t._byteString)};if(t instanceof Rn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${CD(t)}`)}(n,e)}function dL(n,e){const t={};return TO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(n,(r,i)=>{const u=mh(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function hL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof DD||n instanceof Ca||n instanceof Rn||n instanceof ph)}function PR(n,e,t){if(!hL(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function D0(n,e,t){if((e=(0,dt.m9)(e))instanceof Nu)return e._internalPath;if("string"==typeof e)return SD(n,e);throw AD("Field path arguments must be of type string or ",n,!1,void 0,t)}const tH=new RegExp("[~\\*/\\[\\]]");function SD(n,e,t){if(e.search(tH)>=0)throw AD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nu(...e.split("."))._internalPath}catch{throw AD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new he(te.INVALID_ARGUMENT,g+n+_)}function fL(n,e){return n.some(t=>t.isEqual(e))}class b0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nH extends b0{data(){return super.data()}}function MD(n,e){return"string"==typeof e?SD(n,e):e instanceof Nu?e._internalPath:e._delegate._internalPath}function pL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NR{}class T0 extends NR{}function fl(n,e,...t){let r=[];e instanceof NR&&r.push(e),r=r.concat(t),function(i){const u=i.filter(g=>g instanceof Lg).length,c=i.filter(g=>g instanceof S0).length;if(u>1||u>0&&c>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class S0 extends T0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new S0(e,t,r)}_apply(e){const t=this._parse(e);return _L(e._query,t),new si(e.firestore,e.converter,LM(e._query,t))}_parse(e){const t=gh(e.firestore);return function(i,u,c,g,_,I,D){let S;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){yL(D,I);const L=[];for(const B of D)L.push(mL(g,i,B));S={arrayValue:{values:L}}}else S=mL(g,i,D)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||yL(D,I),S=lL(c,"where",D,"in"===I||"not-in"===I);return Yt.create(_,I,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lg extends NR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const c=i.getFlattenedFilters();for(const g of c)_L(u,g),u=LM(u,g)}(e._query,t),new si(e.firestore,e.converter,LM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class OR extends T0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new OR(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new gg(i,u);return function(g,_){if(null===kM(g)){const I=ZC(g);null!==I&&vL(0,I,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new si(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Au(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xD extends T0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new xD(e,t,r)}_apply(e){return new si(e.firestore,e.converter,KC(e._query,this._limit,this._limitType))}}class RD extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new RD(e,t,r)}_apply(e){const t=gL(e,this.type,this._docOrFields,this._inclusive);return new si(e.firestore,e.converter,(i=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class PD extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new PD(e,t,r)}_apply(e){const t=gL(e,this.type,this._docOrFields,this._inclusive);return new si(e.firestore,e.converter,(i=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gL(n,e,t,r){if(t[0]=(0,dt.m9)(t[0]),t[0]instanceof b0)return function(i,u,c,g,_){if(!g)throw new he(te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const D of ih(i))if(D.field.isKeyField())I.push(nh(u,g.key));else{const S=g.data.field(D.field);if($C(S))throw new he(te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const L=D.field.canonicalString();throw new he(te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(S)}return new ol(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gh(n.firestore);return function(u,c,g,_,I,D){const S=u.explicitOrderBy;if(I.length>S.length)throw new he(te.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let B=0;B<I.length;B++){const J=I[B];if(S[B].field.isKeyField()){if("string"!=typeof J)throw new he(te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof J}`);if(!FM(u)&&-1!==J.indexOf("/"))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${J}' contains a slash.`);const fe=u.path.child(nn.fromString(J));if(!Be.isDocumentKey(fe))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const pe=new Be(fe);L.push(nh(c,pe))}else{const fe=lL(g,_,J);L.push(fe)}}return new ol(L,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function mL(n,e,t){if("string"==typeof(t=(0,dt.m9)(t))){if(""===t)throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FM(e)&&-1!==t.indexOf("/"))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!Be.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nh(n,new Be(r))}if(t instanceof Rn)return nh(n,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CD(t)}.`)}function yL(n,e){if(!Array.isArray(n)||0===n.length)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _L(n,e){if(e.isInequality()){const r=ZC(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new he(te.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=kM(n);null!==u&&vL(0,i,u)}const t=function(r,i){for(const u of r)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new he(te.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vL(n,e,t){if(!t.isEqual(e))throw new he(te.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class kR{convertValue(e,t="none"){switch(il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return el(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new DD(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zv(e));default:return null}}convertTimestamp(e){const t=tl(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);ht(Ok(r));const i=new nl(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return i.isEqual(t)||cr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ND(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dH extends kR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}class yh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ou extends b0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new A0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class A0 extends Ou{data(e={}){return super.data(e)}}class pl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new A0(this._firestore,this._userDataWriter,r.key,r,new yh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new A0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yh(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const g=new A0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yh(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:fH(c.type),doc:g,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye()}}function EL(n,e){return n instanceof Ou&&e instanceof Ou?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pl&&e instanceof pl&&n._firestore===e._firestore&&SR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class gl extends kR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function IL(n,e,t){n=Qt(n,Rn);const r=Qt(n.firestore,Pn),i=ND(n.converter,e,t);return Vg(r,[TD(gh(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Bn.none())])}function CL(n,e,t,...r){n=Qt(n,Rn);const i=Qt(n.firestore,Pn),u=gh(i);let c;return c="string"==typeof(e=(0,dt.m9)(e))||e instanceof Nu?RR(u,"updateDoc",n._key,e,t,r):xR(u,"updateDoc",n._key,e),Vg(i,[c.toMutation(n._key,Bn.exists(!0))])}function DL(n){return Vg(Qt(n.firestore,Pn),[new Eg(n._key,Bn.none())])}function bL(n,e){const t=Qt(n.firestore,Pn),r=E0(n),i=ND(n.converter,e);return Vg(t,[TD(gh(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}function FR(n,...e){var t,r,i;n=(0,dt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||AR(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(AR(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,I,D;if(n instanceof Rn)I=Qt(n.firestore,Pn),D=yg(n._key.path),_={next:S=>{e[c]&&e[c](LR(I,n,S))},error:e[c+1],complete:e[c+2]};else{const S=Qt(n,si);I=Qt(S.firestore,Pn),D=S._query;const L=new gl(I);_={next:B=>{e[c]&&e[c](new pl(I,L,S,B))},error:e[c+1],complete:e[c+2]},pL(n._query)}return function(S,L,B,J){const fe=new vD(J),pe=new zx(L,fe,B);return S.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return Ux(yield Fg(S),pe)})),()=>{fe.Dc(),S.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return $x(yield Fg(S),pe)}))}}(dr(I),D,g,_)}function Vg(n,e){return function(t,r){const i=new kr;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function oj(n,e,t){return Kx.apply(this,arguments)}(yield CR(t),r,i)})),i.promise}(dr(n),e)}function LR(n,e,t){const r=t.docs.get(e._key),i=new gl(n);return new Ou(n,i,e._key,r,new yh(t.hasPendingWrites,t.fromCache),e.converter)}const MH={maxAttempts:5};class TL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gh(e)}set(e,t,r){this._verifyNotCommitted();const i=ml(e,this._firestore),u=ND(i.converter,t,r),c=TD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Bn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=ml(e,this._firestore);let c;return c="string"==typeof(t=(0,dt.m9)(t))||t instanceof Nu?RR(this._dataReader,"WriteBatch.update",u._key,t,r,i):xR(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ml(e,this._firestore);return this._mutations=this._mutations.concat(new Eg(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ml(n,e){if((n=(0,dt.m9)(n)).firestore!==e)throw new he(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gh(e)}get(e){const t=ml(e,this._firestore),r=new dH(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Ye();const u=i[0];if(u.isFoundDocument())return new b0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new b0(this._firestore,r,t._key,null,t.converter);throw Ye()})}set(e,t,r){const i=ml(e,this._firestore),u=ND(i.converter,t,r),c=TD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=ml(e,this._firestore);let c;return c="string"==typeof(t=(0,dt.m9)(t))||t instanceof Nu?RR(this._dataReader,"Transaction.update",u._key,t,r,i):xR(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=ml(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ml(e,this._firestore),r=new gl(this._firestore);return super.get(e).then(i=>new Ou(this._firestore,r,t._key,i._document,new yh(!1,!1),t.converter))}}!function(n,e=!0){dg=qt.SDK_VERSION,(0,qt._registerComponent)(new ds.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new Pn(new FU(t.getProvider("auth-internal")),new UU(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(g.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,qt.registerVersion)(uO,"3.12.2",n),(0,qt.registerVersion)(uO,"3.12.2","esm2017")}();var LH={includeMetadataChanges:!1};function zH(n,e){return void 0===e&&(e={}),function HH(n){return function VR(n,e){return void 0===e&&(e=LH),new Ar.y(function(t){return{unsubscribe:FR(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}(n,{includeMetadataChanges:!0}).pipe((0,tt.U)(function(e){return e.docs}))}(n).pipe((0,tt.U)(function(t){return t.map(function(r){return function AL(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class Ug{constructor(e){return e}}const PL="firestore",$R=new h.OlP("angularfire2.firestore-instances");function qH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ug(r)}}const ZH={provide:class GH{constructor(){return G_(PL)}},deps:[[new h.FiY,$R]]},KH={provide:Ug,useFactory:function WH(n,e){const t=vu(PL,n,e);return t&&new Ug(t)},deps:[[new h.FiY,$R],Zc]};let YH=(()=>{class n{constructor(){(0,qt.registerVersion)("angularfire",$p.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[KH,ZH]}),n})();function QH(n,...e){return{ngModule:YH,providers:[{provide:$R,useFactory:qH(n),multi:!0,deps:[h.R0b,h.zs3,Hd,Hp,[new h.FiY,ng],[new h.FiY,eg],...e]}]}}const jR=yo(zH,!0),NL=yo(bL,!0),OD=yo(TR,!0),JH=yo(DL,!0),XH=yo(E0,!0),ez=yo(Uj,!0);let OL=(()=>{class n{constructor(t){this.firestore=t}agregarCancionLista(t){var r=this;return(0,W.Z)(function*(){const i=OD(r.firestore,"lista-de-reproduccion");NL(i,t).then(()=>{console.log("cancion agregada",t)}).catch(u=>{console.log(u)})})()}agregarCancionFav(t){var r=this;return(0,W.Z)(function*(){const i=OD(r.firestore,"lista-de-favoritos");NL(i,t).then(()=>{console.log("cancion agregada a favorito",t)}).catch(u=>{console.log(u)})})()}eliminarCancionDeListaRep(t){const r=XH(this.firestore,"lista-de-reproduccion",t);JH(r).then(()=>{console.log("cancion eliminada de la lista de reproducci\xf3n",t)}).catch(i=>{console.log(i)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ug))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),_h=(()=>{class n extends kL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Da=new h.OlP("NgValueAccessor"),rz={provide:Da,useExisting:(0,h.Gpc)(()=>Bg),multi:!0},sz=new h.OlP("CompositionEventMode");let Bg=(()=>{class n extends kL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function iz(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(sz,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([rz]),h.qOj]}),n})();const oz=!1,Ei=new h.OlP("NgValidators"),_l=new h.OlP("NgAsyncValidators");function WL(n){return null!=n}function qL(n){const e=(0,h.QGY)(n)?(0,sn.D)(n):n;if(oz&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function ZL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function KL(n,e){return e.map(t=>t(n))}function YL(n){return n.map(e=>function uz(n){return!n.validate}(e)?e:t=>e.validate(t))}function HR(n){return null!=n?function QL(n){if(!n)return null;const e=n.filter(WL);return 0==e.length?null:function(t){return ZL(KL(t,e))}}(YL(n)):null}function zR(n){return null!=n?function JL(n){if(!n)return null;const e=n.filter(WL);return 0==e.length?null:function(t){return function tz(...n){const e=(0,Ti.jO)(n),{args:t,keys:r}=tc(n),i=new Ar.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let _=c,I=c;for(let D=0;D<c;D++){let S=!1;(0,rc.Xf)(t[D]).subscribe((0,Kn.x)(u,L=>{S||(S=!0,I--),g[D]=L},()=>_--,void 0,()=>{(!_||!S)&&(I||u.next(r?Za(r,g):g),u.complete())}))}});return e?i.pipe(Gi(e)):i}(KL(t,e).map(qL)).pipe((0,tt.U)(ZL))}}(YL(n)):null}function XL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function GR(n){return n?Array.isArray(n)?n:[n]:[]}function FD(n,e){return Array.isArray(n)?n.includes(e):n===e}function n2(n,e){const t=GR(e);return GR(n).forEach(i=>{FD(t,i)||t.push(i)}),t}function r2(n,e){return GR(e).filter(t=>!FD(n,t))}class i2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Li extends i2{get formDirective(){return null}get path(){return null}}class vl extends i2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let LD=(()=>{class n extends s2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vl,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})();const M0="VALID",UD="INVALID",$g="PENDING",x0="DISABLED";function BD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class c2{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===M0}get invalid(){return this.status===UD}get pending(){return this.status==$g}get disabled(){return this.status===x0}get enabled(){return this.status!==x0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(n2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(n2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(r2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(r2(e,this._rawAsyncValidators))}hasValidator(e){return FD(this._rawValidators,e)}hasAsyncValidator(e){return FD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$g,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=x0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=M0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===M0||this.status===$g)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?x0:M0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$g,this._hasOwnPendingAsyncValidator=!0;const t=qL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?x0:this.errors?UD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($g)?$g:this._anyControlsHaveStatus(UD)?UD:M0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){BD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function mz(n){return Array.isArray(n)?HR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function yz(n){return Array.isArray(n)?zR(n):n||null}(this._rawAsyncValidators)}}const vh=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>R0}),R0="always";function P0(n,e,t=R0){(function JR(n,e){const t=function e2(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(XL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function t2(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(XL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();HD(e._rawValidators,i),HD(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function wz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&l2(n,e)})}(n,e),function Iz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ez(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&l2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function vz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function HD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function l2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function f2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function p2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const g2=class extends c2{constructor(e=null,t,r){super(function KR(n){return(BD(n)?n.validators:n)||null}(t),function YR(n,e){return(BD(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),BD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=p2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){p2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},xz={provide:vl,useExisting:(0,h.Gpc)(()=>O0)},_2=(()=>Promise.resolve())();let O0=(()=>{class n extends vl{constructor(t,r,i,u,c,g){super(),this._changeDetectorRef=c,this.callSetDisabledState=g,this.control=new g2,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function tP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Bg?t=u:function bz(n){return Object.getPrototypeOf(n.constructor)===_h}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function eP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){P0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);_2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $D(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Li,9),h.Y36(Ei,10),h.Y36(_l,10),h.Y36(Da,10),h.Y36(h.sBO,8),h.Y36(vh,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([xz]),h.qOj,h.TTD]}),n})(),w2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const rP=new h.OlP("NgModelWithFormControlWarning");let L2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[w2]}),n})(),n3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vh,useValue:t.callSetDisabledState??R0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[L2]}),n})(),r3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:vh,useValue:t.callSetDisabledState??R0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[L2]}),n})();var i3=k(6451);class s3 extends Si.x{constructor(e=1/0,t=1/0,r=B_){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)g=_;g&&r.splice(0,g+1)}}}var o3=k(3099);function V2(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,o3.B)({connector:()=>new s3(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function U2(n,e){return(0,ic.m)(e)?Tn(()=>n,e):Tn(()=>n)}var Eo=k(2011);k(9260);const B2=new h.OlP("angularfire2.auth.use-emulator"),$2=new h.OlP("angularfire2.auth.settings"),j2=new h.OlP("angularfire2.auth.tenant-id"),H2=new h.OlP("angularfire2.auth.langugage-code"),z2=new h.OlP("angularfire2.auth.use-device-language"),G2=new h.OlP("angularfire.auth.persistence"),W2=(n,e,t,r,i,u,c,g)=>(0,Eo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[I,D]of Object.entries(c))_.settings[I]=D;return g&&_.setPersistence(g),_},[t,r,i,u,c,g]);let k0=(()=>{class n{constructor(t,r,i,u,c,g,_,I,D,S,L,B){const J=new Si.x,fe=Je(void 0).pipe((0,_u.Q)(c.outsideAngular),Tn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9568)))),(0,tt.U)(()=>(0,Eo.on)(t,u,r)),(0,tt.U)(pe=>W2(pe,u,g,I,D,S,_,L)),V2({bufferSize:1,refCount:!1}));if(Mo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{fe.pipe(ss()).subscribe();const Ve=fe.pipe(Tn(Ct=>Ct.getRedirectResult().then(Bt=>Bt,()=>null)),$r,V2({bufferSize:1,refCount:!1})),Qe=fe.pipe(Tn(Ct=>new Ar.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onAuthStateChanged(en=>Bt.next(en),en=>Bt.error(en),()=>Bt.complete()))})))),ot=fe.pipe(Tn(Ct=>new Ar.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onIdTokenChanged(en=>Bt.next(en),en=>Bt.error(en),()=>Bt.complete()))}))));this.authState=Ve.pipe(U2(Qe),(0,qc.R)(c.outsideAngular),(0,_u.Q)(c.insideAngular)),this.user=Ve.pipe(U2(ot),(0,qc.R)(c.outsideAngular),(0,_u.Q)(c.insideAngular)),this.idToken=this.user.pipe(Tn(Ct=>Ct?(0,sn.D)(Ct.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(Tn(Ct=>Ct?(0,sn.D)(Ct.getIdTokenResult()):Je(null))),this.credential=(0,i3.T)(Ve,J,this.authState.pipe(Xr(Ct=>!Ct))).pipe((0,tt.U)(Ct=>Ct?.user?Ct:null),(0,qc.R)(c.outsideAngular),(0,_u.Q)(c.insideAngular))}return(0,Eo.pX)(this,fe,u,{spy:{apply:(pe,Ve,Qe)=>{(pe.startsWith("signIn")||pe.startsWith("createUser"))&&Qe.then(ot=>J.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eo.Dh),h.LFG(Eo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Hd),h.LFG(B2,8),h.LFG($2,8),h.LFG(j2,8),h.LFG(H2,8),h.LFG(z2,8),h.LFG(G2,8),h.LFG(eg,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function lP(){return(0,yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Kn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function c3(n,e){return n===e}k(9568);var l3=k(3942);function dP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new he("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function q2(){if(typeof Uint8Array>"u")throw new he("unimplemented","Uint8Arrays are not available in this environment.")}function Z2(){if(!function hB(){return typeof atob<"u"}())throw new he("unimplemented","Blobs are unavailable in Firestore in this environment.")}class F0{constructor(e){this._delegate=e}static fromBase64String(e){return Z2(),new F0(Ca.fromBase64String(e))}static fromUint8Array(e){return q2(),new F0(Ca.fromUint8Array(e))}toBase64(){return Z2(),this._delegate.toBase64()}toUint8Array(){return q2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hP(n){return function f3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class p3{enableIndexedDbPersistence(e,t){return function Bj(n,e){oL(n=Qt(n,Pn));const t=dr(n);if(t._uninitializedComponentsProvider)throw new he(te.FAILED_PRECONDITION,"SDK cache is already specified.");Vs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new kg;return sL(t,i,new mR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $j(n){oL(n=Qt(n,Pn));const e=dr(n);if(e._uninitializedComponentsProvider)throw new he(te.FAILED_PRECONDITION,"SDK cache is already specified.");Vs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new kg;return sL(e,r,new $F(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jj(n){if(n._initialized&&!n._terminated)throw new he(te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(t=(0,W.Z)(function*(r){if(!wo.D())return Promise.resolve();const i=r+"main";yield wo.delete(i)}),function(r){return t.apply(this,arguments)})(ux(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class K2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){nL(this._delegate,e,t,r)}enableNetwork(){return function zj(n){return function Sj(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield zF(n),t=yield GF(n);return e.setNetworkEnabled(!0),function(r){const i=je(r);return i.vu.delete(0),y0(i)}(t)}))}(dr(n=Qt(n,Pn)))}(this._delegate)}disableNetwork(){return function Gj(n){return function Aj(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield zF(n),t=yield GF(n);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(i){const u=je(i);u.vu.add(0),yield Ag(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(dr(n=Qt(n,Pn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hj(n){return function(e){const t=new kr;return e.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function lj(n,e){return eR.apply(this,arguments)}(yield CR(e),t)})),t.promise}(dr(n=Qt(n,Pn)))}(this._delegate)}onSnapshotsInSync(e){return function wH(n,e){return function Rj(n,e){const t=new vD(e);return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield Fg(n),i=t,je(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield Fg(n),i=t,void je(r).ku.delete(i);var r,i}))}}(dr(n=Qt(n,Pn)),AR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new he("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jg(this,TR(this._delegate,e))}catch(t){throw Vi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Us(this,E0(this._delegate,e))}catch(t){throw Vi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,function kj(n,e){if(n=Qt(n,w0),bR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new si(n,null,(t=e,new Au(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Vi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function RH(n,e,t){n=Qt(n,Pn);const r=Object.assign(Object.assign({},MH),t);return function(i){if(i.maxAttempts<1)throw new he(te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const g=new kr;return i.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const _=yield function WF(n){return ED(n).then(e=>e.datastore)}(i);new bj(i.asyncQueue,_,c,u,g).run()})),g.promise}(dr(n),i=>e(new xH(n,i)),r)}(this._delegate,t=>e(new Y2(this,t)))}batch(){return dr(this._delegate),new Q2(new TL(this._delegate,e=>Vg(this._delegate,e)))}loadBundle(e){return function Wj(n,e){const t=dr(n=Qt(n,Pn)),r=new Lj;return function Pj(n,e,t,r){const i=function(u,c){let g;return g="string"==typeof u?mk().encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return jF(_,I);if(_ instanceof ArrayBuffer)return jF(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Cj(_,c);var _}(t,m0(e));n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function Ej(n,e,t){const r=je(n);var i;(i=(0,W.Z)(function*(u,c,g){try{const _=yield c.getMetadata();if(yield function(L,B){const J=je(L),fe=lr(B.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",pe=>J.qs.getBundleMetadata(pe,B.id)).then(pe=>!!pe&&pe.createTime.compareTo(fe)>=0)}(u.localStore,_))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);g._updateProgress(PF(_));const I=new ej(_,u.localStore,c.serializer);let D=yield c.bc();for(;D;){const L=yield I.zu(D);L&&g._updateProgress(L),D=yield c.bc()}const S=yield I.complete();return yield Pu(u,S.Ju,void 0),yield function(L,B){const J=je(L);return J.persistence.runTransaction("Save bundle","readwrite",fe=>J.qs.saveBundleMetadata(fe,B))}(u.localStore,_),g._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return Vs("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var L}),function(u,c,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qj(n,e){return function Nj(n,e){return n.asyncQueue.enqueue((0,W.Z)(function*(){return function(t,r){const i=je(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield ID(n),e)}))}(dr(n=Qt(n,Pn)),e).then(t=>t?new si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ui(this,t):null)}}class GD extends kR{constructor(e){super(),this.firestore=e}convertBytes(e){return new F0(new Ca(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Us.forKey(t,this.firestore,null)}}class Y2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}get(e){const t=Ih(e);return this._delegate.get(t).then(r=>new L0(this._firestore,new Ou(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ih(e);return r?(dP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Ih(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Ih(e);return this._delegate.delete(t),this}}class Q2{constructor(e){this._delegate=e}set(e,t,r){const i=Ih(e);return r?(dP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Ih(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Ih(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Eh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new A0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new V0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Eh.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Eh(e,new GD(e),t),i.set(t,u)),u}}Eh.INSTANCES=new WeakMap;class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new he("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Us(t,new Rn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new Us(t,new Rn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jg(this.firestore,TR(this._delegate,e))}catch(t){throw Vi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dt.m9)(e))instanceof Rn&&rL(this._delegate,e)}set(e,t){t=dP("DocumentReference.set",t);try{return t?IL(this._delegate,e,t):IL(this._delegate,e)}catch(r){throw Vi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?CL(this._delegate,e):CL(this._delegate,e,t,...r)}catch(i){throw Vi(i,"updateDoc()","DocumentReference.update()")}}delete(){return DL(this._delegate)}onSnapshot(...e){const t=J2(e),r=X2(e,i=>new L0(this.firestore,new Ou(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function gH(n){n=Qt(n,Rn);const e=Qt(n.firestore,Pn),t=dr(e),r=new gl(e);return function Mj(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(i,u,c){try{const g=yield function(_,I){const D=je(_);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,I))}(i,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new he(te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Rg(g,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield ID(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ou(e,r,n._key,i,new yh(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function mH(n){n=Qt(n,Rn);const e=Qt(n.firestore,Pn);return qF(dr(e),n._key,{source:"server"}).then(t=>LR(e,n,t))}(this._delegate):function pH(n){n=Qt(n,Rn);const e=Qt(n.firestore,Pn);return qF(dr(e),n._key).then(t=>LR(e,n,t))}(this._delegate),t.then(r=>new L0(this.firestore,new Ou(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?Eh.getInstance(this.firestore,e):null))}}function Vi(n,e,t){return n.message=n.message.replace(e,t),n}function J2(n){for(const e of n)if("object"==typeof e&&!hP(e))return e;return{}}function X2(n,e){var t,r;let i;return i=hP(n[0])?n[0]:hP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class L0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Us(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EL(this._delegate,e._delegate)}}class V0 extends L0{data(e){const t=this._delegate.data(e);return function NU(n,e){n||Ye()}(void 0!==t),t}}class Ui{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}where(e,t,r){try{return new Ui(this.firestore,fl(this._delegate,function rH(n,e,t){const r=e,i=MD("where",n);return S0._create(i,r,t)}(e,t,r)))}catch(i){throw Vi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ui(this.firestore,fl(this._delegate,function iH(n,e="asc"){const t=e,r=MD("orderBy",n);return OR._create(r,t)}(e,t)))}catch(r){throw Vi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ui(this.firestore,fl(this._delegate,function sH(n){return eL("limit",n),xD._create("limit",n,"F")}(e)))}catch(t){throw Vi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ui(this.firestore,fl(this._delegate,function oH(n){return eL("limitToLast",n),xD._create("limitToLast",n,"L")}(e)))}catch(t){throw Vi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ui(this.firestore,fl(this._delegate,function aH(...n){return RD._create("startAt",n,!0)}(...e)))}catch(t){throw Vi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ui(this.firestore,fl(this._delegate,function uH(...n){return RD._create("startAfter",n,!1)}(...e)))}catch(t){throw Vi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ui(this.firestore,fl(this._delegate,function cH(...n){return PD._create("endBefore",n,!1)}(...e)))}catch(t){throw Vi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ui(this.firestore,fl(this._delegate,function lH(...n){return PD._create("endAt",n,!0)}(...e)))}catch(t){throw Vi(t,"endAt()","Query.endAt()")}}isEqual(e){return SR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _H(n){n=Qt(n,si);const e=Qt(n.firestore,Pn),t=dr(e),r=new gl(e);return function xj(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(i,u,c){try{const g=yield hD(i,u,!0),_=new kF(u,g.ir),I=_.sc(g.documents),D=_.applyChanges(I,!1);c.resolve(D.snapshot)}catch(g){const _=Rg(g,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield ID(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pl(e,r,n,i))}(this._delegate):"server"===e?.source?function vH(n){n=Qt(n,si);const e=Qt(n.firestore,Pn),t=dr(e),r=new gl(e);return ZF(t,n._query,{source:"server"}).then(i=>new pl(e,r,n,i))}(this._delegate):function yH(n){n=Qt(n,si);const e=Qt(n.firestore,Pn),t=dr(e),r=new gl(e);return pL(n._query),ZF(t,n._query).then(i=>new pl(e,r,n,i))}(this._delegate),t.then(r=>new fP(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=J2(e),r=X2(e,i=>new fP(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FR(this._delegate,t,r)}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?Eh.getInstance(this.firestore,e):null))}}class m3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new V0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new V0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new m3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new V0(this._firestore,r))})}isEqual(e){return EL(this._delegate,e._delegate)}}class jg extends Ui{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Us(this.firestore,e):null}doc(e){try{return new Us(this.firestore,void 0===e?E0(this._delegate):E0(this._delegate,e))}catch(t){throw Vi(t,"doc()","CollectionReference.doc()")}}add(e){return bL(this._delegate,e).then(t=>new Us(this.firestore,t))}isEqual(e){return rL(this._delegate,e._delegate)}withConverter(e){return new jg(this.firestore,this._delegate.withConverter(e?Eh.getInstance(this.firestore,e):null))}}function Ih(n){return Qt(n,Rn)}class pP{constructor(...e){this._delegate=new Nu(...e)}static documentId(){return new pP(Xn.keyField().canonicalString())}isEqual(e){return(e=(0,dt.m9)(e))instanceof Nu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ch{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NH(){return new MR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ch(e)}static delete(){const e=function PH(){return new C0("deleteField")}();return e._methodName="FieldValue.delete",new Ch(e)}static arrayUnion(...e){const t=function OH(...n){return new Jj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ch(t)}static arrayRemove(...e){const t=function kH(...n){return new Xj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ch(t)}static increment(e){const t=function FH(n){return new eH("increment",n)}(e);return t._methodName="FieldValue.increment",new Ch(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const y3={Firestore:K2,GeoPoint:DD,Timestamp:Un,Blob:F0,Transaction:Y2,WriteBatch:Q2,DocumentReference:Us,DocumentSnapshot:L0,Query:Ui,QueryDocumentSnapshot:V0,QuerySnapshot:fP,CollectionReference:jg,FieldPath:pP,FieldValue:Ch,setLogLevel:function g3(n){!function PU(n){Qc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eV(n,e){return function w3(n,e=$_){return new Ar.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gP(n,e){return eV(n,e).pipe((0,tt.U)(t=>({payload:t,type:"query"})))}function WD(n,e){return gP(n,e).pipe(Wo(void 0),lP(),(0,tt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const _=i.find(D=>D.doc.ref.isEqual(c.ref)),I=t?.payload.docs.find(D=>D.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function tV(n,e,t){return WD(n,t).pipe(Qa((r,i)=>function I3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function C3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function u3(n,e=no.y){return n=n??c3,(0,yr.e)((t,r)=>{let i,u=!0;t.subscribe((0,Kn.x)(r,c=>{const g=e(c);(u||!n(i,g))&&(u=!1,i=g,r.next(c))}))})}(),(0,tt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function mP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function nV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function v3(n){(function _3(n,e){n.INTERNAL.registerComponent(new ds.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},y3)))})(n,(e,t)=>new K2(e,t,new p3)),n.registerVersion("@firebase/firestore-compat","0.3.11")}(l3.Z);class rV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=WD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,tt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wo(void 0),lP(),Xr(([r,i])=>i.length>0||!r),(0,tt.U)(([r,i])=>i),$r)}auditTrail(e){return this.stateChanges(e).pipe(Qa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nV(e);return tV(this.query,t,this.afs.schedulers.outsideAngular).pipe($r)}valueChanges(e={}){return gP(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),$r)}get(e){return(0,sn.D)(this.query.get(e)).pipe($r)}add(e){return this.ref.add(e)}doc(e){return new iV(this.ref.doc(e),this.afs)}}class iV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=sV(r,t);return new rV(i,u,this.afs)}snapshotChanges(){return function E3(n,e){return eV(n,e).pipe(Wo(void 0),lP(),(0,tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($r)}valueChanges(e={}){return this.snapshotChanges().pipe((0,tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,sn.D)(this.ref.get(e)).pipe($r)}}class D3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?WD(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xr(t=>t.length>0),$r):WD(this.query,this.afs.schedulers.outsideAngular).pipe($r)}auditTrail(e){return this.stateChanges(e).pipe(Qa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nV(e);return tV(this.query,t,this.afs.schedulers.outsideAngular).pipe($r)}valueChanges(e={}){return gP(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),$r)}get(e){return(0,sn.D)(this.query.get(e)).pipe($r)}}const b3=new h.OlP("angularfire2.enableFirestorePersistence"),T3=new h.OlP("angularfire2.firestore.persistenceSettings"),S3=new h.OlP("angularfire2.firestore.settings"),A3=new h.OlP("angularfire2.firestore.use-emulator");function sV(n,e=(t=>t)){return{query:e(n),ref:n}}let M3=(()=>{class n{constructor(t,r,i,u,c,g,_,I,D,S,L,B,J,fe,pe,Ve,Qe){this.schedulers=_;const ot=(0,Eo.on)(t,g,r),Ct=D;S&&W2(ot,g,L,J,fe,pe,B,Ve),[this.firestore,this.persistenceEnabled$]=(0,Eo.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const Bt=g.runOutsideAngular(()=>ot.firestore());if(u&&Bt.settings(u),Ct&&Bt.useEmulator(...Ct),i&&!Mo(c)){const en=()=>{try{return(0,sn.D)(Bt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Ii){return typeof console<"u"&&console.warn(Ii),Je(!1)}};return[Bt,g.runOutsideAngular(en)]}return[Bt,Je(!1)]},[u,Ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=sV(i,r),g=this.schedulers.ngZone.run(()=>u);return new rV(g,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new D3(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new iV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eo.Dh),h.LFG(Eo.xv,8),h.LFG(b3,8),h.LFG(S3,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Hd),h.LFG(T3,8),h.LFG(A3,8),h.LFG(k0,8),h.LFG(B2,8),h.LFG($2,8),h.LFG(j2,8),h.LFG(H2,8),h.LFG(z2,8),h.LFG(G2,8),h.LFG(eg,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yP=(()=>{class n{constructor(t,r,i){this.afs=t,this.afAuth=r,this.router=i,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}setUserData(t){return this.afs.doc(`user/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.setUserData(i.user),this.afAuth.authState.subscribe(u=>{u&&this.router.navigate(["buscador"]),console.log("Succesfull Login")})}).catch(i=>{console.log(i)})}register(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{i.user?.sendEmailVerification(),this.setUserData(i.user),this.router.navigate(["login"]),console.log("Succesfull Register")}).catch(i=>{console.log(i)})}logout(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(M3),h.LFG(k0),h.LFG(Mr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_P=(()=>{class n{constructor(t,r,i){this.router=t,this.angularFireAuth=r,this.authService=i,this.getUsername()}getUsername(){this.angularFireAuth.authState.subscribe(t=>{this.username=t?t.email:"Usuario invitado"})}logout(){this.authService.logout()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mr),h.Y36(k0),h.Y36(yP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:12,vars:1,consts:[[1,"navbar"],[1,"navbar-nav"],["routerLinkActive","active","routerLink","/buscador",1,"nav-item"],["routerLinkActive","active","routerLink","/lista-reproduccion",1,"nav-item"],["routerLinkActive","active","routerLink","/lista-favoritos",1,"nav-item"],[1,"nav-item","nav-user"],[3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2),h._uU(3,"Buscador"),h.qZA(),h.TgZ(4,"li",3),h._uU(5,"Listas de Reproducci\xf3n"),h.qZA(),h.TgZ(6,"li",4),h._uU(7,"Favoritos"),h.qZA(),h.TgZ(8,"li",5),h._uU(9),h.qZA(),h.TgZ(10,"button",6),h.NdJ("click",function(){return r.logout()}),h._uU(11,"LogOut"),h.qZA()()()),2&t&&(h.xp6(9),h.Oqu(r.username))},dependencies:[Vf,Bb],styles:[".navbar[_ngcontent-%COMP%]{background-color:#005062;padding:10px}@media screen and (max-width: 768px){.navbar[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.navbar-nav[_ngcontent-%COMP%]{list-style:none;display:flex;align-items:center;justify-content:flex-start}.nav-item[_ngcontent-%COMP%]{margin-right:10px;color:#fff;cursor:pointer}.nav-item[_ngcontent-%COMP%]:last-child{margin-right:0}.nav-item.active[_ngcontent-%COMP%]{background-color:#818d8f;color:#fff;border:2px solid #818d8f;border-radius:4px;padding:8px 16px}.nav-user[_ngcontent-%COMP%]{margin-left:auto;font-weight:700;color:#ff795e}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;cursor:pointer;margin-left:auto}button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),n})();function x3(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr",7)(1,"td"),h._UZ(2,"img",8),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td")(6,"p"),h._uU(7),h.qZA()(),h.TgZ(8,"td"),h._UZ(9,"audio",9),h.qZA(),h.TgZ(10,"td")(11,"button",10),h.NdJ("click",function(){const u=h.CHM(t).$implicit,c=h.oxw();return h.KtG(c.agregarCancionLista(u))}),h.qZA()(),h.TgZ(12,"td")(13,"button",11),h.NdJ("click",function(){const u=h.CHM(t).$implicit,c=h.oxw();return h.KtG(c.agregarCancionFav(u))}),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Q6J("src",t.album.images[0].url,h.LSH),h.xp6(2),h.Oqu(t.name),h.xp6(3),h.Oqu(t.album.name),h.xp6(2),h.Q6J("src",t.preview_url,h.LSH)}}function R3(n,e){1&n&&(h.TgZ(0,"div")(1,"h4"),h._uU(2,"No hay resultados"),h.qZA()())}let P3=(()=>{class n{constructor(t,r){this.spotifyService=t,this.firebaseService=r,this.query="",this.resultados=[]}buscarCanciones(t){this.spotifyService.buscarCanciones(t).subscribe(r=>{console.log(r.tracks.items),this.resultados=r.tracks.items},r=>{console.error(r)})}agregarCancionLista(t){this.firebaseService.agregarCancionLista(t)}agregarCancionFav(t){this.firebaseService.agregarCancionFav(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lT),h.Y36(OL))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-buscador-de-canciones"]],decls:23,vars:3,consts:[[1,"buscador-de-canciones"],[1,"buscador-de-canciones__search-bar"],["type","text","placeholder","Buscar canciones",3,"ngModel","ngModelChange"],[1,"search-button",3,"click"],[1,"buscador-de-canciones__results-list"],["class","buscador-de-canciones__results-list__item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"buscador-de-canciones__results-list__item"],["alt","",3,"src"],["controls","",3,"src"],[1,"buscador-de-canciones__results-list__item__add-button",3,"click"],[1,"buscador-de-canciones__results-list__item__fav-button",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0)(2,"h1"),h._uU(3,"Buscador de Canciones"),h.qZA(),h.TgZ(4,"div",1)(5,"input",2),h.NdJ("ngModelChange",function(u){return r.query=u}),h.qZA(),h.TgZ(6,"button",3),h.NdJ("click",function(){return r.buscarCanciones(r.query)}),h._uU(7,"Buscar"),h.qZA()(),h.TgZ(8,"table",4)(9,"th"),h._uU(10,"Image"),h.qZA(),h.TgZ(11,"th"),h._uU(12,"Name"),h.qZA(),h.TgZ(13,"th"),h._uU(14,"Album"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"Preview"),h.qZA(),h.TgZ(17,"th"),h._uU(18,"Add to List"),h.qZA(),h.TgZ(19,"th"),h._uU(20,"Favorite"),h.qZA(),h.YNc(21,x3,14,4,"tr",5),h.qZA(),h.YNc(22,R3,3,0,"div",6),h.qZA()),2&t&&(h.xp6(5),h.Q6J("ngModel",r.query),h.xp6(16),h.Q6J("ngForOf",r.resultados),h.xp6(1),h.Q6J("ngIf",0==r.resultados.length))},dependencies:[ts,Hs,Bg,LD,O0,_P],styles:['@charset "UTF-8";.button-with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.button-with-icon__icon[_ngcontent-%COMP%]{margin-right:5px}body[_ngcontent-%COMP%]{background-color:#818d8f;color:#fff}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.buscador-de-canciones[_ngcontent-%COMP%]{padding:20px}.buscador-de-canciones[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.buscador-de-canciones[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:20px;text-align:center;color:#005062}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__search-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;padding:10px;border-radius:4px;border:solid 1px;font-size:16px;margin-right:10px}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;background-color:#005062;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00262f}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__results-list[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:center;align-items:center;justify-content:center}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__results-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__results-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;border-bottom:1px solid #005062}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__results-list[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{color:#005062}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__results-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:4px}.buscador-de-canciones[_ngcontent-%COMP%]   .buscador-de-canciones__results-list[_ngcontent-%COMP%]   .buscador-de-canciones__results-list__item[_ngcontent-%COMP%]:nth-child(even){background-color:#e6f0eb}@media screen and (max-width: 768px){.buscador-de-canciones[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.buscador-de-canciones__search-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.buscador-de-canciones__search-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .buscador-de-canciones__search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.buscador-de-canciones__results-list[_ngcontent-%COMP%], .buscador-de-canciones__results-list__item[_ngcontent-%COMP%]{display:block}.buscador-de-canciones__results-list__item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;text-align:center;margin-bottom:10px}.buscador-de-canciones__results-list__item__add-button[_ngcontent-%COMP%], .buscador-de-canciones__results-list__item__fav-button[_ngcontent-%COMP%]{flex-direction:column;align-items:center;width:100%}}.buscador-de-canciones__results-list__item__add-button[_ngcontent-%COMP%]{padding:12px 20px;background-color:#818d8f;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.buscador-de-canciones__results-list__item__add-button[_ngcontent-%COMP%]:hover{background-color:#00262f}.buscador-de-canciones__results-list__item__add-button[_ngcontent-%COMP%]:before{content:"+";font-family:Font Awesome;font-size:16px}.buscador-de-canciones__results-list__item__fav-button[_ngcontent-%COMP%]{padding:12px 20px;background-color:#fff;color:red;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.buscador-de-canciones__results-list__item__fav-button[_ngcontent-%COMP%]:hover{background-color:#ffa391}.buscador-de-canciones__results-list__item__fav-button[_ngcontent-%COMP%]:before{content:"\\2764";font-family:Font Awesome;font-size:16px}']}),n})();function N3(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr",3)(1,"td"),h._UZ(2,"img",4),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td")(6,"p"),h._uU(7),h.qZA()(),h.TgZ(8,"td"),h._UZ(9,"audio",5),h.qZA(),h.TgZ(10,"td")(11,"button",6),h.NdJ("click",function(){const u=h.CHM(t).$implicit,c=h.oxw();return h.KtG(c.eliminarCancionDeListaRep(u.id))}),h._uU(12,"Eliminar"),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Q6J("src",t.album.images[0].url,h.LSH),h.xp6(2),h.Oqu(t.name),h.xp6(3),h.Oqu(t.album.name),h.xp6(2),h.Q6J("src",t.preview_url,h.LSH)}}function O3(n,e){1&n&&(h.TgZ(0,"div")(1,"h4"),h._uU(2,"No hay resultados"),h.qZA()())}let k3=(()=>{class n{constructor(t){this.firebaseService=t,this.firestore=(0,h.f3M)(Ug),this.getListaDeReproduccion()}getListaDeReproduccion(){const t=OD(this.firestore,"lista-de-reproduccion");jR(t).subscribe(),this.listaDeReproduccion=jR(t,{idField:"id"})}eliminarCancionDeListaRep(t){this.firebaseService.eliminarCancionDeListaRep(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(OL))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-mi-lista-de-reproduccion"]],decls:18,vars:6,consts:[[1,"lista-de-reproduccion"],["class","lista-de-reproduccion__item__name",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"lista-de-reproduccion__item__name"],["alt","",3,"src"],["controls","",3,"src"],[1,"lista-de-reproduccion__item__button",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"h1"),h._uU(2,"Mi Lista de Reproducci\xf3n"),h.qZA(),h.TgZ(3,"table",0)(4,"th"),h._uU(5,"Image"),h.qZA(),h.TgZ(6,"th"),h._uU(7,"Name"),h.qZA(),h.TgZ(8,"th"),h._uU(9,"Album"),h.qZA(),h.TgZ(10,"th"),h._uU(11,"Preview"),h.qZA(),h.TgZ(12,"th"),h._uU(13,"Delete"),h.qZA(),h.YNc(14,N3,13,4,"tr",1),h.ALo(15,"async"),h.qZA(),h.YNc(16,O3,3,0,"div",2),h.ALo(17,"async")),2&t&&(h.xp6(14),h.Q6J("ngForOf",h.lcZ(15,2,r.listaDeReproduccion)),h.xp6(2),h.Q6J("ngIf",!h.lcZ(17,4,r.listaDeReproduccion)))},dependencies:[ts,Hs,_P,$i],styles:["img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:4px}h4[_ngcontent-%COMP%]{margin:20px;text-align:center;color:#005062}h1[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}@media (min-width: 768px){h1[_ngcontent-%COMP%]{font-size:32px}}.lista-de-reproduccion[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:center;align-items:center;justify-content:center}@media (min-width: 480px){.lista-de-reproduccion[_ngcontent-%COMP%]{width:90%;margin:0 auto}}tr[_ngcontent-%COMP%]{border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center;align-items:center;justify-content:center;border-bottom:1px solid #005062}.lista-de-reproduccion__item__name[_ngcontent-%COMP%]{padding:10px}@media (min-width: 768px){.lista-de-reproduccion__item__name[_ngcontent-%COMP%]{padding:20px}}.lista-de-reproduccion__item__button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#ff795e;color:#fff;border:none;cursor:pointer}@media (min-width: 768px){.lista-de-reproduccion__item__button[_ngcontent-%COMP%]{padding:10px 20px}}"]}),n})();function F3(n,e){if(1&n&&(h.TgZ(0,"tr",3)(1,"td"),h._UZ(2,"img",4),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td")(6,"p"),h._uU(7),h.qZA()(),h.TgZ(8,"td"),h._UZ(9,"audio",5),h.qZA()()),2&n){const t=e.$implicit;h.xp6(2),h.Q6J("src",t.album.images[0].url,h.LSH),h.xp6(2),h.Oqu(t.name),h.xp6(3),h.Oqu(t.album.name),h.xp6(2),h.Q6J("src",t.preview_url,h.LSH)}}function L3(n,e){1&n&&(h.TgZ(0,"div")(1,"h4"),h._uU(2,"No hay resultados"),h.qZA()())}let V3=(()=>{class n{constructor(){this.firestore=(0,h.f3M)(Ug),this.getListaDeFavoritos()}getListaDeFavoritos(){const t=OD(this.firestore,"lista-de-favoritos");this.listaDeFav=jR(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-favoritos"]],decls:16,vars:6,consts:[[1,"lista-de-favoritos"],["class","lista-de-reproduccion__item__name",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"lista-de-reproduccion__item__name"],["alt","",3,"src"],["controls","",3,"src"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"h1"),h._uU(2,"Mi Lista de Favoritos"),h.qZA(),h.TgZ(3,"table",0)(4,"th"),h._uU(5,"Image"),h.qZA(),h.TgZ(6,"th"),h._uU(7,"Name"),h.qZA(),h.TgZ(8,"th"),h._uU(9,"Album"),h.qZA(),h.TgZ(10,"th"),h._uU(11,"Preview"),h.qZA(),h.YNc(12,F3,10,4,"tr",1),h.ALo(13,"async"),h.qZA(),h.YNc(14,L3,3,0,"div",2),h.ALo(15,"async")),2&t&&(h.xp6(12),h.Q6J("ngForOf",h.lcZ(13,2,r.listaDeFav)),h.xp6(2),h.Q6J("ngIf",!h.lcZ(15,4,r.listaDeFav)))},dependencies:[ts,Hs,_P,$i],styles:["img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:4px}h4[_ngcontent-%COMP%]{margin:20px;text-align:center;color:#005062}h1[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}@media (min-width: 768px){h1[_ngcontent-%COMP%]{font-size:32px}}.lista-de-favoritos[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:center;align-items:center;justify-content:center}@media (min-width: 480px){.lista-de-favoritos[_ngcontent-%COMP%]{width:90%;margin:0 auto}}tr[_ngcontent-%COMP%]{border:none}tr[_ngcontent-%COMP%]:last-child{border-bottom:none}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center;align-items:center;justify-content:center;border-bottom:1px solid #005062}.lista-de-favoritos__item__name[_ngcontent-%COMP%]{padding:10px}@media (min-width: 768px){.lista-de-favoritos__item__name[_ngcontent-%COMP%]{padding:20px}}@media (min-width: 768px){.lista-de-favoritos__item__name[_ngcontent-%COMP%]{padding:10px 20px}}"]}),n})(),U3=(()=>{class n{constructor(t){this.authService=t,this.user="",this.loginUser={email:"",password:""}}ngOnInit(){}login(t){this.authService.login(t.email,t.password)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:2,consts:[[1,"container"],[1,"login"],[1,"login__title"],[1,"login__register-text"],["href","register",1,"login__register-link"],[1,"login__form"],[1,"login__label"],["type","text",1,"login__input",3,"ngModel","ngModelChange"],["type","password",1,"login__input",3,"ngModel","ngModelChange"],[1,"login__forgot-password"],["href","#",1,"login__forgot-password-link"],[1,"login__button",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),h._uU(3,"Welcome Back"),h.qZA(),h.TgZ(4,"p",3),h._uU(5,"Don't have an account? "),h.TgZ(6,"a",4),h._uU(7,"Create today!"),h.qZA()(),h.TgZ(8,"div",5)(9,"label",6),h._uU(10,"Email"),h.qZA(),h.TgZ(11,"input",7),h.NdJ("ngModelChange",function(u){return r.loginUser.email=u}),h.qZA(),h.TgZ(12,"label",6),h._uU(13,"Password"),h.qZA(),h.TgZ(14,"input",8),h.NdJ("ngModelChange",function(u){return r.loginUser.password=u}),h.qZA(),h.TgZ(15,"div",9)(16,"a",10),h._uU(17,"Forgot password?"),h.qZA()(),h.TgZ(18,"button",11),h.NdJ("click",function(){return r.login(r.loginUser)}),h._uU(19,"Ingresar"),h.qZA()()()()),2&t&&(h.xp6(11),h.Q6J("ngModel",r.loginUser.email),h.xp6(3),h.Q6J("ngModel",r.loginUser.password))},dependencies:[Bg,LD,O0],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh;background:linear-gradient(to bottom right,#005062,#818d8f)}.login[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:40px;max-width:400px;margin:0 auto;box-shadow:0 2px 4px #0000001a}.login__title[_ngcontent-%COMP%]{text-align:center;color:#005062;font-size:24px;margin-bottom:20px}.login__register-text[_ngcontent-%COMP%]{text-align:center;color:#333;font-size:14px}.login__register-link[_ngcontent-%COMP%]{color:#005062;text-decoration:none;transition:color .3s}.login__register-link[_ngcontent-%COMP%]:hover{color:#00262f}.login__form[_ngcontent-%COMP%]{margin-top:20px}.login__label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#333}.login__input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #333;border-radius:4px;margin-bottom:10px}.login__forgot-password[_ngcontent-%COMP%]{text-align:right;margin-top:10px;font-size:14px}.login__forgot-password-link[_ngcontent-%COMP%]{color:#005062;text-decoration:none;transition:color .3s}.login__forgot-password-link[_ngcontent-%COMP%]:hover{color:#00262f}.login__button[_ngcontent-%COMP%]{padding:12px 20px;background-color:#005062;color:#fff;border:none;border-radius:4px;cursor:pointer;display:block;width:100%;text-align:center;font-size:16px;transition:background-color .3s}.login__button[_ngcontent-%COMP%]:hover{background-color:#00262f}"]}),n})(),B3=(()=>{class n{constructor(t){this.authService=t,this.registerUser={email:"",password:""}}ngOnInit(){}register(t){this.authService.register(t.email,t.password)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:17,vars:2,consts:[[1,"container"],[1,"register"],[1,"register__title"],[1,"register__login-text"],["href","login",1,"register__login-link"],[1,"register__form"],[1,"register__label"],["type","text",1,"register__input",3,"ngModel","ngModelChange"],["type","password",1,"register__input",3,"ngModel","ngModelChange"],[1,"register__button",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),h._uU(3,"Create account"),h.qZA(),h.TgZ(4,"p",3),h._uU(5,"Already have an account? "),h.TgZ(6,"a",4),h._uU(7,"Login"),h.qZA()(),h.TgZ(8,"div",5)(9,"label",6),h._uU(10,"Email"),h.qZA(),h.TgZ(11,"input",7),h.NdJ("ngModelChange",function(u){return r.registerUser.email=u}),h.qZA(),h.TgZ(12,"label",6),h._uU(13,"Password"),h.qZA(),h.TgZ(14,"input",8),h.NdJ("ngModelChange",function(u){return r.registerUser.password=u}),h.qZA(),h.TgZ(15,"button",9),h.NdJ("click",function(){return r.register(r.registerUser)}),h._uU(16,"Register"),h.qZA()()()()),2&t&&(h.xp6(11),h.Q6J("ngModel",r.registerUser.email),h.xp6(3),h.Q6J("ngModel",r.registerUser.password))},dependencies:[Bg,LD,O0],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh;background:linear-gradient(to bottom right,#005062,#818d8f)}.register[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:40px;max-width:400px;margin:0 auto;box-shadow:0 2px 4px #0000001a}.register__title[_ngcontent-%COMP%]{text-align:center;color:#005062;font-size:24px;margin-bottom:20px}.register__login-text[_ngcontent-%COMP%]{text-align:center;color:#333;font-size:14px}.register__login-link[_ngcontent-%COMP%]{color:#005062;text-decoration:none;transition:color .3s}.register__login-link[_ngcontent-%COMP%]:hover{color:#00262f}.register__form[_ngcontent-%COMP%]{margin-top:20px}.register__label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#333}.register__input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #333;border-radius:4px;margin-bottom:10px}.register__button[_ngcontent-%COMP%]{padding:12px 20px;background-color:#005062;color:#fff;border:none;border-radius:4px;cursor:pointer;display:block;width:100%;text-align:center;font-size:16px;transition:background-color .3s}.register__button[_ngcontent-%COMP%]:hover{background-color:#00262f}"]}),n})(),vP=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}canActivate(){return this.afAuth.authState.pipe((0,tt.U)(t=>!!t||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(k0),h.LFG(Mr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $3=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:U3},{path:"register",component:B3},{path:"buscador",component:P3,canActivate:[vP]},{path:"lista-reproduccion",component:k3,canActivate:[vP]},{path:"lista-favoritos",component:V3,canActivate:[vP]},{path:"**",redirectTo:"login"}];let j3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ww.forRoot($3),Ww]}),n})(),H3=(()=>{class n{constructor(){this.title="spotifyApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Mm]}),n})();const oV={production:!1,firebase:{projectId:"spotify-app-95858",appId:"1:1004104744505:web:bf7c0cc865aad92bbdd7e8",storageBucket:"spotify-app-95858.appspot.com",apiKey:"AIzaSyDs23-CMCJtFmwIymlw-FDdJoJ5bIUc0Vk",authDomain:"spotify-app-95858.firebaseapp.com",messagingSenderId:"1004104744505"}};let z3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[H3]}),n.\u0275inj=h.cJS({providers:[{provide:Eo.Dh,useValue:oV.firebase}],imports:[Vo,qg,j3,n3,r3,Rd,Ww,nA(()=>RI(oV.firebase)),PN(()=>UN()),QH(()=>ez())]}),n})();am().bootstrapModule(z3).catch(n=>console.error(n))},9751:(mt,Te,k)=>{k.d(Te,{y:()=>Ee});var h=k(2961),V=k(727),O=k(8822),ne=k(9635),ge=k(2416),ae=k(576),Re=k(2806);let Ee=(()=>{class q{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const qe=new q;return qe.source=this,qe.operator=Ae,qe}subscribe(Ae,qe,Ke){const X=function $(q){return q&&q instanceof h.Lv||function H(q){return q&&(0,ae.m)(q.next)&&(0,ae.m)(q.error)&&(0,ae.m)(q.complete)}(q)&&(0,V.Nn)(q)}(Ae)?Ae:new h.Hp(Ae,qe,Ke);return(0,Re.x)(()=>{const{operator:Me,source:_e}=this;X.add(Me?Me.call(X,_e):_e?this._subscribe(X):this._trySubscribe(X))}),X}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(qe){Ae.error(qe)}}forEach(Ae,qe){return new(qe=Pe(qe))((Ke,X)=>{const Me=new h.Hp({next:_e=>{try{Ae(_e)}catch(Fe){X(Fe),Me.unsubscribe()}},error:X,complete:Ke});this.subscribe(Me)})}_subscribe(Ae){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,ne.U)(Ae)(this)}toPromise(Ae){return new(Ae=Pe(Ae))((qe,Ke)=>{let X;this.subscribe(Me=>X=Me,Me=>Ke(Me),()=>qe(X))})}}return q.create=ke=>new q(ke),q})();function Pe(q){var ke;return null!==(ke=q??ge.v.Promise)&&void 0!==ke?ke:Promise}},7579:(mt,Te,k)=>{k.d(Te,{x:()=>Re});var h=k(9751),V=k(727);const ne=(0,k(3888).d)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=k(8737),ae=k(2806);let Re=(()=>{class Pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const q=new Ee(this,this);return q.operator=$,q}_throwIfClosed(){if(this.closed)throw new ne}next($){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next($)}})}error($){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:q}=this;for(;q.length;)q.shift().error($)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:q,isStopped:ke,observers:Ae}=this;return q||ke?V.Lc:(this.currentObservers=null,Ae.push($),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:q,thrownError:ke,isStopped:Ae}=this;q?$.error(ke):Ae&&$.complete()}asObservable(){const $=new h.y;return $.source=this,$}}return Pe.create=(H,$)=>new Ee(H,$),Pe})();class Ee extends Re{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===q||q.call($,H)}error(H){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===q||q.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,q;return null!==(q=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==q?q:V.Lc}}},2961:(mt,Te,k)=>{k.d(Te,{Hp:()=>Ke,Lv:()=>q});var h=k(576),V=k(727),O=k(2416),ne=k(7849);function ge(){}const ae=Pe("C",void 0,void 0);function Pe(me,le,ve){return{kind:me,value:le,error:ve}}var H=k(3410),$=k(2806);class q extends V.w0{constructor(le){super(),this.isStopped=!1,le?(this.destination=le,(0,V.Nn)(le)&&le.add(this)):this.destination=Fe}static create(le,ve,Oe){return new Ke(le,ve,Oe)}next(le){this.isStopped?_e(function Ee(me){return Pe("N",me,void 0)}(le),this):this._next(le)}error(le){this.isStopped?_e(function Re(me){return Pe("E",void 0,me)}(le),this):(this.isStopped=!0,this._error(le))}complete(){this.isStopped?_e(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(le){this.destination.next(le)}_error(le){try{this.destination.error(le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Ae(me,le){return ke.call(me,le)}class qe{constructor(le){this.partialObserver=le}next(le){const{partialObserver:ve}=this;if(ve.next)try{ve.next(le)}catch(Oe){X(Oe)}}error(le){const{partialObserver:ve}=this;if(ve.error)try{ve.error(le)}catch(Oe){X(Oe)}else X(le)}complete(){const{partialObserver:le}=this;if(le.complete)try{le.complete()}catch(ve){X(ve)}}}class Ke extends q{constructor(le,ve,Oe){let Ne;if(super(),(0,h.m)(le)||!le)Ne={next:le??void 0,error:ve??void 0,complete:Oe??void 0};else{let Y;this&&O.v.useDeprecatedNextContext?(Y=Object.create(le),Y.unsubscribe=()=>this.unsubscribe(),Ne={next:le.next&&Ae(le.next,Y),error:le.error&&Ae(le.error,Y),complete:le.complete&&Ae(le.complete,Y)}):Ne=le}this.destination=new qe(Ne)}}function X(me){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(me):(0,ne.h)(me)}function _e(me,le){const{onStoppedNotification:ve}=O.v;ve&&H.z.setTimeout(()=>ve(me,le))}const Fe={closed:!0,next:ge,error:function Me(me){throw me},complete:ge}},727:(mt,Te,k)=>{k.d(Te,{Lc:()=>ae,w0:()=>ge,Nn:()=>Re});var h=k(576);const O=(0,k(3888).d)(Pe=>function($){Pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((q,ke)=>`${ke+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ne=k(8737);class ge{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:q}=this;if((0,h.m)(q))try{q()}catch(Ae){H=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Ae of ke)try{Ee(Ae)}catch(qe){H=H??[],qe instanceof O?H=[...H,...qe.errors]:H.push(qe)}}if(H)throw new O(H)}}add(H){var $;if(H&&H!==this)if(this.closed)Ee(H);else{if(H instanceof ge){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,ne.P)($,H)}remove(H){const{_finalizers:$}=this;$&&(0,ne.P)($,H),H instanceof ge&&H._removeParent(this)}}ge.EMPTY=(()=>{const Pe=new ge;return Pe.closed=!0,Pe})();const ae=ge.EMPTY;function Re(Pe){return Pe instanceof ge||Pe&&"closed"in Pe&&(0,h.m)(Pe.remove)&&(0,h.m)(Pe.add)&&(0,h.m)(Pe.unsubscribe)}function Ee(Pe){(0,h.m)(Pe)?Pe():Pe.unsubscribe()}},2416:(mt,Te,k)=>{k.d(Te,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Te,k)=>{k.d(Te,{E:()=>V});const V=new(k(9751).y)(ge=>ge.complete())},8996:(mt,Te,k)=>{k.d(Te,{D:()=>le});var h=k(8421),V=k(5363),O=k(9468),ae=k(9751),Ee=k(2202),Pe=k(576),H=k(9672);function q(ve,Oe){if(!ve)throw new Error("Iterable cannot be null");return new ae.y(Ne=>{(0,H.f)(Ne,Oe,()=>{const Y=ve[Symbol.asyncIterator]();(0,H.f)(Ne,Oe,()=>{Y.next().then(Ze=>{Ze.done?Ne.complete():Ne.next(Ze.value)})},0,!0)})})}var ke=k(3670),Ae=k(8239),qe=k(1144),Ke=k(6495),X=k(2206),Me=k(4532),_e=k(3260);function le(ve,Oe){return Oe?function me(ve,Oe){if(null!=ve){if((0,ke.c)(ve))return function ne(ve,Oe){return(0,h.Xf)(ve).pipe((0,O.R)(Oe),(0,V.Q)(Oe))}(ve,Oe);if((0,qe.z)(ve))return function Re(ve,Oe){return new ae.y(Ne=>{let Y=0;return Oe.schedule(function(){Y===ve.length?Ne.complete():(Ne.next(ve[Y++]),Ne.closed||this.schedule())})})}(ve,Oe);if((0,Ae.t)(ve))return function ge(ve,Oe){return(0,h.Xf)(ve).pipe((0,O.R)(Oe),(0,V.Q)(Oe))}(ve,Oe);if((0,X.D)(ve))return q(ve,Oe);if((0,Ke.T)(ve))return function $(ve,Oe){return new ae.y(Ne=>{let Y;return(0,H.f)(Ne,Oe,()=>{Y=ve[Ee.h](),(0,H.f)(Ne,Oe,()=>{let Ze,_t;try{({value:Ze,done:_t}=Y.next())}catch(Ge){return void Ne.error(Ge)}_t?Ne.complete():Ne.next(Ze)},0,!0)}),()=>(0,Pe.m)(Y?.return)&&Y.return()})}(ve,Oe);if((0,_e.L)(ve))return function Fe(ve,Oe){return q((0,_e.Q)(ve),Oe)}(ve,Oe)}throw(0,Me.z)(ve)}(ve,Oe):(0,h.Xf)(ve)}},8421:(mt,Te,k)=>{k.d(Te,{Xf:()=>ke});var h=k(7582),V=k(1144),O=k(8239),ne=k(9751),ge=k(3670),ae=k(2206),Re=k(4532),Ee=k(6495),Pe=k(3260),H=k(576),$=k(7849),q=k(8822);function ke(me){if(me instanceof ne.y)return me;if(null!=me){if((0,ge.c)(me))return function Ae(me){return new ne.y(le=>{const ve=me[q.L]();if((0,H.m)(ve.subscribe))return ve.subscribe(le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,V.z)(me))return function qe(me){return new ne.y(le=>{for(let ve=0;ve<me.length&&!le.closed;ve++)le.next(me[ve]);le.complete()})}(me);if((0,O.t)(me))return function Ke(me){return new ne.y(le=>{me.then(ve=>{le.closed||(le.next(ve),le.complete())},ve=>le.error(ve)).then(null,$.h)})}(me);if((0,ae.D)(me))return Me(me);if((0,Ee.T)(me))return function X(me){return new ne.y(le=>{for(const ve of me)if(le.next(ve),le.closed)return;le.complete()})}(me);if((0,Pe.L)(me))return function _e(me){return Me((0,Pe.Q)(me))}(me)}throw(0,Re.z)(me)}function Me(me){return new ne.y(le=>{(function Fe(me,le){var ve,Oe,Ne,Y;return(0,h.mG)(this,void 0,void 0,function*(){try{for(ve=(0,h.KL)(me);!(Oe=yield ve.next()).done;)if(le.next(Oe.value),le.closed)return}catch(Ze){Ne={error:Ze}}finally{try{Oe&&!Oe.done&&(Y=ve.return)&&(yield Y.call(ve))}finally{if(Ne)throw Ne.error}}le.complete()})})(me,le).catch(ve=>le.error(ve))})}},6451:(mt,Te,k)=>{k.d(Te,{T:()=>ae});var h=k(8189),V=k(8421),O=k(515),ne=k(7669),ge=k(8996);function ae(...Re){const Ee=(0,ne.yG)(Re),Pe=(0,ne._6)(Re,1/0),H=Re;return H.length?1===H.length?(0,V.Xf)(H[0]):(0,h.J)(Pe)((0,ge.D)(H,Ee)):O.E}},5403:(mt,Te,k)=>{k.d(Te,{x:()=>V});var h=k(2961);function V(ne,ge,ae,Re,Ee){return new O(ne,ge,ae,Re,Ee)}class O extends h.Lv{constructor(ge,ae,Re,Ee,Pe,H){super(ge),this.onFinalize=Pe,this.shouldUnsubscribe=H,this._next=ae?function($){try{ae($)}catch(q){ge.error(q)}}:super._next,this._error=Ee?function($){try{Ee($)}catch(q){ge.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch($){ge.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(mt,Te,k)=>{k.d(Te,{U:()=>O});var h=k(4482),V=k(5403);function O(ne,ge){return(0,h.e)((ae,Re)=>{let Ee=0;ae.subscribe((0,V.x)(Re,Pe=>{Re.next(ne.call(ge,Pe,Ee++))}))})}},8189:(mt,Te,k)=>{k.d(Te,{J:()=>O});var h=k(5577),V=k(4671);function O(ne=1/0){return(0,h.z)(V.y,ne)}},5577:(mt,Te,k)=>{k.d(Te,{z:()=>Ee});var h=k(4004),V=k(8421),O=k(4482),ne=k(9672),ge=k(5403),Re=k(576);function Ee(Pe,H,$=1/0){return(0,Re.m)(H)?Ee((q,ke)=>(0,h.U)((Ae,qe)=>H(q,Ae,ke,qe))((0,V.Xf)(Pe(q,ke))),$):("number"==typeof H&&($=H),(0,O.e)((q,ke)=>function ae(Pe,H,$,q,ke,Ae,qe,Ke){const X=[];let Me=0,_e=0,Fe=!1;const me=()=>{Fe&&!X.length&&!Me&&H.complete()},le=Oe=>Me<q?ve(Oe):X.push(Oe),ve=Oe=>{Ae&&H.next(Oe),Me++;let Ne=!1;(0,V.Xf)($(Oe,_e++)).subscribe((0,ge.x)(H,Y=>{ke?.(Y),Ae?le(Y):H.next(Y)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Me--;X.length&&Me<q;){const Y=X.shift();qe?(0,ne.f)(H,qe,()=>ve(Y)):ve(Y)}me()}catch(Y){H.error(Y)}}))};return Pe.subscribe((0,ge.x)(H,le,()=>{Fe=!0,me()})),()=>{Ke?.()}}(q,ke,Pe,$)))}},5363:(mt,Te,k)=>{k.d(Te,{Q:()=>ne});var h=k(9672),V=k(4482),O=k(5403);function ne(ge,ae=0){return(0,V.e)((Re,Ee)=>{Re.subscribe((0,O.x)(Ee,Pe=>(0,h.f)(Ee,ge,()=>Ee.next(Pe),ae),()=>(0,h.f)(Ee,ge,()=>Ee.complete(),ae),Pe=>(0,h.f)(Ee,ge,()=>Ee.error(Pe),ae)))})}},3099:(mt,Te,k)=>{k.d(Te,{B:()=>ge});var h=k(8421),V=k(7579),O=k(2961),ne=k(4482);function ge(Re={}){const{connector:Ee=(()=>new V.x),resetOnError:Pe=!0,resetOnComplete:H=!0,resetOnRefCountZero:$=!0}=Re;return q=>{let ke,Ae,qe,Ke=0,X=!1,Me=!1;const _e=()=>{Ae?.unsubscribe(),Ae=void 0},Fe=()=>{_e(),ke=qe=void 0,X=Me=!1},me=()=>{const le=ke;Fe(),le?.unsubscribe()};return(0,ne.e)((le,ve)=>{Ke++,!Me&&!X&&_e();const Oe=qe=qe??Ee();ve.add(()=>{Ke--,0===Ke&&!Me&&!X&&(Ae=ae(me,$))}),Oe.subscribe(ve),!ke&&Ke>0&&(ke=new O.Hp({next:Ne=>Oe.next(Ne),error:Ne=>{Me=!0,_e(),Ae=ae(Fe,Pe,Ne),Oe.error(Ne)},complete:()=>{X=!0,_e(),Ae=ae(Fe,H),Oe.complete()}}),(0,h.Xf)(le).subscribe(ke))})(q)}}function ae(Re,Ee,...Pe){if(!0===Ee)return void Re();if(!1===Ee)return;const H=new O.Hp({next:()=>{H.unsubscribe(),Re()}});return(0,h.Xf)(Ee(...Pe)).subscribe(H)}},9468:(mt,Te,k)=>{k.d(Te,{R:()=>V});var h=k(4482);function V(O,ne=0){return(0,h.e)((ge,ae)=>{ae.add(O.schedule(()=>ge.subscribe(ae),ne))})}},3410:(mt,Te,k)=>{k.d(Te,{z:()=>h});const h={setTimeout(V,O,...ne){const{delegate:ge}=h;return ge?.setTimeout?ge.setTimeout(V,O,...ne):setTimeout(V,O,...ne)},clearTimeout(V){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(V)},delegate:void 0}},2202:(mt,Te,k)=>{k.d(Te,{h:()=>V});const V=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Te,k)=>{k.d(Te,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,Te,k)=>{k.d(Te,{_6:()=>ae,jO:()=>ne,yG:()=>ge});var h=k(576);function O(Re){return Re[Re.length-1]}function ne(Re){return(0,h.m)(O(Re))?Re.pop():void 0}function ge(Re){return function V(Re){return Re&&(0,h.m)(Re.schedule)}(O(Re))?Re.pop():void 0}function ae(Re,Ee){return"number"==typeof O(Re)?Re.pop():Ee}},8737:(mt,Te,k)=>{function h(V,O){if(V){const ne=V.indexOf(O);0<=ne&&V.splice(ne,1)}}k.d(Te,{P:()=>h})},3888:(mt,Te,k)=>{function h(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}k.d(Te,{d:()=>h})},2806:(mt,Te,k)=>{k.d(Te,{O:()=>ne,x:()=>O});var h=k(2416);let V=null;function O(ge){if(h.v.useDeprecatedSynchronousErrorHandling){const ae=!V;if(ae&&(V={errorThrown:!1,error:null}),ge(),ae){const{errorThrown:Re,error:Ee}=V;if(V=null,Re)throw Ee}}else ge()}function ne(ge){h.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},9672:(mt,Te,k)=>{function h(V,O,ne,ge=0,ae=!1){const Re=O.schedule(function(){ne(),ae?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(Re),!ae)return Re}k.d(Te,{f:()=>h})},4671:(mt,Te,k)=>{function h(V){return V}k.d(Te,{y:()=>h})},1144:(mt,Te,k)=>{k.d(Te,{z:()=>h});const h=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(mt,Te,k)=>{k.d(Te,{D:()=>V});var h=k(576);function V(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(mt,Te,k)=>{function h(V){return"function"==typeof V}k.d(Te,{m:()=>h})},3670:(mt,Te,k)=>{k.d(Te,{c:()=>O});var h=k(8822),V=k(576);function O(ne){return(0,V.m)(ne[h.L])}},6495:(mt,Te,k)=>{k.d(Te,{T:()=>O});var h=k(2202),V=k(576);function O(ne){return(0,V.m)(ne?.[h.h])}},8239:(mt,Te,k)=>{k.d(Te,{t:()=>V});var h=k(576);function V(O){return(0,h.m)(O?.then)}},3260:(mt,Te,k)=>{k.d(Te,{L:()=>ne,Q:()=>O});var h=k(7582),V=k(576);function O(ge){return(0,h.FC)(this,arguments,function*(){const Re=ge.getReader();try{for(;;){const{value:Ee,done:Pe}=yield(0,h.qq)(Re.read());if(Pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Ee)}}finally{Re.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},4482:(mt,Te,k)=>{k.d(Te,{A:()=>V,e:()=>O});var h=k(576);function V(ne){return(0,h.m)(ne?.lift)}function O(ne){return ge=>{if(V(ge))return ge.lift(function(ae){try{return ne(ae,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(mt,Te,k)=>{k.d(Te,{U:()=>O,z:()=>V});var h=k(4671);function V(...ne){return O(ne)}function O(ne){return 0===ne.length?h.y:1===ne.length?ne[0]:function(ae){return ne.reduce((Re,Ee)=>Ee(Re),ae)}}},7849:(mt,Te,k)=>{k.d(Te,{h:()=>O});var h=k(2416),V=k(3410);function O(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=h.v;if(!ge)throw ne;ge(ne)})}},4532:(mt,Te,k)=>{function h(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>h})},4650:(mt,Te,k)=>{k.d(Te,{$8M:()=>Wa,$WT:()=>pr,$Z:()=>qw,AFp:()=>Q_,ALo:()=>Fp,AaK:()=>Ee,CHM:()=>Tl,CRH:()=>$_,CZH:()=>Wp,CqO:()=>wE,D6c:()=>zN,EJc:()=>jI,EpF:()=>ua,F4k:()=>Ay,FYo:()=>Gm,FiY:()=>to,GfV:()=>Tw,Gpc:()=>$,JOm:()=>gt,KtG:()=>Sl,LFG:()=>Rt,LSH:()=>Nm,Lbi:()=>qp,Lck:()=>AS,MMx:()=>w_,MR2:()=>gb,NdJ:()=>My,OlP:()=>Kt,Oqu:()=>PE,P3R:()=>yw,PXZ:()=>cv,Q6J:()=>Pd,QGY:()=>Qf,Qsj:()=>Cb,R0b:()=>ei,RDi:()=>eb,Rgc:()=>jd,SBq:()=>Cc,Sil:()=>Wd,Suo:()=>KS,TTD:()=>Nh,TgZ:()=>ho,X6Q:()=>sC,XFs:()=>rt,Xpm:()=>At,Xts:()=>km,Y36:()=>Ac,YKP:()=>cI,YNc:()=>by,Yjl:()=>Vt,Yz7:()=>lt,Z0I:()=>Lr,ZZ4:()=>aC,_Bn:()=>y_,_UZ:()=>Kf,_Vd:()=>Ic,_c5:()=>jN,_uU:()=>LT,aQg:()=>uC,c2e:()=>lA,cJS:()=>tn,cg1:()=>vp,dDg:()=>gA,dqk:()=>Zt,eFA:()=>lv,eJc:()=>AI,ekj:()=>lp,eoX:()=>QI,f3M:()=>On,g9A:()=>J_,h0i:()=>Hc,hGG:()=>HN,iGM:()=>TI,ifc:()=>P,ip1:()=>BI,jDz:()=>lI,kL8:()=>qE,lG2:()=>Et,lcZ:()=>O_,lqb:()=>iu,lri:()=>Cu,n5z:()=>$l,oAB:()=>K,oxw:()=>ep,q4F:()=>Sw,qLn:()=>Ed,qOj:()=>gy,qZA:()=>fo,rWj:()=>ov,sBO:()=>wN,s_b:()=>zc,soG:()=>Zp,tb:()=>XI,tp0:()=>tt,uIk:()=>zf,vHH:()=>X,vpe:()=>Fs,wAp:()=>yt,xp6:()=>Vw,z2F:()=>hv,zSh:()=>ra,zs3:()=>bc});var h=k(7579),V=k(727),O=k(9751),ne=k(6451),ge=k(3099);function ae(s){for(let o in s)if(s[o]===ae)return o;throw Error("Could not find renamed property on target object.")}function Re(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function Ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ae({__forward_ref__:ae});function $(s){return s.__forward_ref__=$,s.toString=function(){return Ee(this())},s}function q(s){return ke(s)?s():s}function ke(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===$}function Ae(s){return s&&!!s.\u0275providers}const Ke="https://g.co/ng/security#xss";class X extends Error{constructor(o,a){super(Me(o,a)),this.code=o}}function Me(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function Oe(s,o){throw new X(-201,!1)}function Ce(s,o){null==s&&function we(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function lt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function dn(s){return Nn(s,oi)||Nn(s,$s)}function Lr(s){return null!==dn(s)}function Nn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Wn(s){return s&&(s.hasOwnProperty(Ci)||s.hasOwnProperty(wn))?s[Ci]:null}const oi=ae({\u0275prov:ae}),Ci=ae({\u0275inj:ae}),$s=ae({ngInjectableDef:ae}),wn=ae({ngInjectorDef:ae});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let En;function In(s){const o=En;return En=s,o}function Vr(s,o,a){const l=dn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&rt.Optional?null:void 0!==o?o:void Oe(Ee(s))}const Zt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cn={},tr="__NG_DI_FLAG__",Dn="ngTempTokenPath",Ur="ngTokenPath",hr=/\n/gm,nr="\u0275",Ft="__source";let ai;function Lt(s){const o=ai;return ai=s,o}function ms(s,o=rt.Default){if(void 0===ai)throw new X(-203,!1);return null===ai?Vr(s,void 0,o):ai.get(s,o&rt.Optional?null:void 0,o)}function Rt(s,o=rt.Default){return(function Bi(){return En}()||ms)(q(s),o)}function On(s,o=rt.Default){return Rt(s,Cr(o))}function Cr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function jn(s){const o=[];for(let a=0;a<s.length;a++){const l=q(s[a]);if(Array.isArray(l)){if(0===l.length)throw new X(900,!1);let d,p=rt.Default;for(let y=0;y<l.length;y++){const E=l[y],C=ui(E);"number"==typeof C?-1===C?d=E.token:p|=C:d=E}o.push(Rt(d,p))}else o.push(Rt(l))}return o}function Zr(s,o){return s[tr]=o,s.prototype[tr]=o,s}function ui(s){return s[tr]}function F(s){return{toString:s}.toString()}var R=(()=>((R=R||{})[R.OnPush=0]="OnPush",R[R.Default=1]="Default",R))(),P=(()=>{return(s=P||(P={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",P;var s})();const M={},j=[],ue=ae({\u0275cmp:ae}),We=ae({\u0275dir:ae}),vt=ae({\u0275pipe:ae}),pt=ae({\u0275mod:ae}),Pt=ae({\u0275fac:ae}),wt=ae({__NG_ELEMENT_ID__:ae});let hn=0;function At(s){return F(()=>{const o=bh(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||P.Emulated,id:"c"+hn++,styles:s.styles||j,_:null,schemas:s.schemas||null,tView:null};Hg(a);const l=s.dependencies;return a.directiveDefs=Io(l,!1),a.pipeDefs=Io(l,!0),a})}function js(s){return ut(s)||Jt(s)}function ie(s){return null!==s}function K(s){return F(()=>({type:s.type,bootstrap:s.bootstrap||j,declarations:s.declarations||j,imports:s.imports||j,exports:s.exports||j,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function it(s,o){if(null==s)return M;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}function Et(s){return F(()=>{const o=bh(s);return Hg(o),o})}function Vt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ut(s){return s[ue]||null}function Jt(s){return s[We]||null}function Gt(s){return s[vt]||null}function pr(s){const o=ut(s)||Jt(s)||Gt(s);return null!==o&&o.standalone}function qn(s,o){const a=s[pt]||null;if(!a&&!0===o)throw new Error(`Type ${Ee(s)} does not have '\u0275mod' property.`);return a}function bh(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||j,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:it(s.inputs,o),outputs:it(s.outputs)}}function Hg(s){s.features?.forEach(o=>o(s))}function Io(s,o){if(!s)return null;const a=o?Gt:js;return()=>("function"==typeof s?s():s).map(l=>a(l)).filter(ie)}const Zn=0,ze=1,Nt=2,gn=3,Xt=4,es=5,gr=6,ts=7,pn=8,ba=9,Hs=10,Ot=11,ku=12,ci=13,Ta=14,ys=15,rr=16,Co=17,zs=18,Di=19,Do=20,wl=21,an=22,El=1,Fu=2,bo=7,To=8,$i=9,ir=10;function Dr(s){return Array.isArray(s)&&"object"==typeof s[El]}function bi(s){return Array.isArray(s)&&!0===s[El]}function Sa(s){return 0!=(4&s.flags)}function Aa(s){return s.componentOffset>-1}function So(s){return 1==(1&s.flags)}function br(s){return!!s.template}function ns(s){return 0!=(256&s[Nt])}function Hi(s,o){return s.hasOwnProperty(Pt)?s[Pt]:null}class j0{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Nh(){return Oh}function Oh(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ws),Yg}function Yg(){const s=Lu(this),o=s?.current;if(o){const a=s.previous;if(a===M)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Ws(s,o,a,l){const d=this.declaredInputs[a],p=Lu(s)||function Fh(s,o){return s[kh]=o}(s,{previous:M,current:null}),y=p.current||(p.current={}),E=p.previous,C=E[d];y[d]=new j0(C&&C.currentValue,o,E===M),s[l]=o}Nh.ngInherit=!0;const kh="__ngSimpleChanges__";function Lu(s){return s[kh]||null}const mn=function(s,o,a){};function Hn(s){for(;Array.isArray(s);)s=s[Zn];return s}function Pa(s,o){return Hn(o[s])}function sr(s,o){return Hn(o[s.index])}function Vu(s,o){return s.data[o]}function mr(s,o){const a=o[s];return Dr(a)?a:a[Zn]}function xo(s){return 64==(64&s[Nt])}function rs(s,o){return null==o?null:s[o]}function Cl(s){s[zs]=0}function Na(s,o){s[es]+=o;let a=s,l=s[gn];for(;null!==l&&(1===o&&1===a[es]||-1===o&&0===a[es]);)l[es]+=o,a=l,l=l[gn]}const Dt={lFrame:Ml(null),bindingsEnabled:!0};function Bh(){return Dt.bindingsEnabled}function se(){return Dt.lFrame.lView}function Ht(){return Dt.lFrame.tView}function Tl(s){return Dt.lFrame.contextLView=s,s[pn]}function Sl(s){return Dt.lFrame.contextLView=null,s}function bn(){let s=Xg();for(;null!==s&&64===s.type;)s=s.parent;return s}function Xg(){return Dt.lFrame.currentTNode}function zi(s,o){const a=Dt.lFrame;a.currentTNode=s,a.isParent=o}function $u(){return Dt.lFrame.isParent}function Ks(){return Dt.lFrame.bindingIndex++}function z0(s,o){const a=Dt.lFrame;a.bindingIndex=a.bindingRootIndex=s,ka(o)}function ka(s){Dt.lFrame.currentDirectiveIndex=s}function Al(){return Dt.lFrame.currentQueryIndex}function Wh(s){Dt.lFrame.currentQueryIndex=s}function qh(s){const o=s[ze];return 2===o.type?o.declTNode:1===o.type?s[gr]:null}function em(s,o,a){if(a&rt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&rt.Host||(d=qh(p),null===d||(p=p[ys],10&d.type))););if(null===d)return!1;o=d,s=p}const l=Dt.lFrame=tm();return l.currentTNode=o,l.lView=s,!0}function zu(s){const o=tm(),a=s[ze];Dt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function tm(){const s=Dt.lFrame,o=null===s?null:s.child;return null===o?Ml(s):o}function Ml(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function nm(){const s=Dt.lFrame;return Dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const xl=nm;function Zh(){const s=nm();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Sr(){return Dt.lFrame.selectedIndex}function vs(s){Dt.lFrame.selectedIndex=s}function fn(){const s=Dt.lFrame;return Vu(s.tView,s.selectedIndex)}function Pl(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:b,ngOnDestroy:A}=p;y&&(s.contentHooks??(s.contentHooks=[])).push(-a,y),E&&((s.contentHooks??(s.contentHooks=[])).push(a,E),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks??(s.viewHooks=[])).push(-a,C),b&&((s.viewHooks??(s.viewHooks=[])).push(a,b),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(a,b)),null!=A&&(s.destroyHooks??(s.destroyHooks=[])).push(a,A)}}function Nl(s,o,a){Gu(s,o,3,a)}function Kh(s,o,a,l){(3&s[Nt])===a&&Gu(s,o,a,l)}function Yh(s,o){let a=s[Nt];(3&a)===o&&(a&=2047,a+=1,s[Nt]=a)}function Gu(s,o,a,l){const p=l??-1,y=o.length-1;let E=0;for(let C=void 0!==l?65535&s[zs]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=l&&E>=l)break}else o[C]<0&&(s[zs]+=65536),(E<p||-1==p)&&(La(s,a,o,C),s[zs]=(4294901760&s[zs])+C+2),C++}function La(s,o,a,l){const d=a[l]<0,p=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[Nt]>>11<s[zs]>>16&&(3&s[Nt])===o){s[Nt]+=2048,mn(4,E,p);try{p.call(E)}finally{mn(5,E,p)}}}else{mn(4,E,p);try{p.call(E)}finally{mn(5,E,p)}}}const Va=-1;class Ys{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Wu(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const p=a[l++],y=a[l++],E=a[l++];s.setAttribute(o,y,E,p)}else{const p=d,y=a[++l];No(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),l++}}return l}function Xh(s){return 3===s||4===s||6===s}function No(s){return 64===s.charCodeAt(0)}function Js(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Oo(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Oo(s,o,a,l,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function Ua(s){return s!==Va}function Ba(s){return 32767&s}function $a(s,o){let a=function qu(s){return s>>16}(s),l=o;for(;a>0;)l=l[ys],a--;return l}let Ll=!0;function ja(s){const o=Ll;return Ll=s,o}const im=255,Zu=5;let sm=0;const Br={};function Ku(s,o){const a=Ul(s,o);if(-1!==a)return a;const l=o[ze];l.firstCreatePass&&(s.injectorIndex=o.length,ws(l.data,s),ws(o,null),ws(l.blueprint,null));const d=yn(s,o),p=s.injectorIndex;if(Ua(d)){const y=Ba(d),E=$a(d,o),C=E[ze].data;for(let b=0;b<8;b++)o[p+b]=E[y+b]|C[y+b]}return o[p+8]=d,p}function ws(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ul(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function yn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Ga(d),null===l)return Va;if(a++,d=d[ys],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return Va}function Ha(s,o,a){!function Vl(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(wt)&&(l=a[wt]),null==l&&(l=a[wt]=sm++);const d=l&im;o.data[s+(d>>Zu)]|=1<<d}(s,o,a)}function ef(s,o,a){if(a&rt.Optional||void 0!==s)return s;Oe()}function za(s,o,a,l){if(a&rt.Optional&&void 0===l&&(l=null),!(a&(rt.Self|rt.Host))){const d=s[ba],p=In(void 0);try{return d?d.get(o,l,a&rt.Optional):Vr(o,l,a&rt.Optional)}finally{In(p)}}return ef(l,0,a)}function tf(s,o,a,l=rt.Default,d){if(null!==s){if(1024&o[Nt]){const y=function am(s,o,a,l,d){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[Nt]&&!(256&y[Nt]);){const E=nf(p,y,a,l|rt.Self,Br);if(E!==Br)return E;let C=p.parent;if(!C){const b=y[wl];if(b){const A=b.get(a,Br,l);if(A!==Br)return A}C=Ga(y),y=y[ys]}p=C}return d}(s,o,a,l,Br);if(y!==Br)return y}const p=nf(s,o,a,l,Br);if(p!==Br)return p}return za(o,a,l,d)}function nf(s,o,a,l,d){const p=function om(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(wt)?s[wt]:void 0;return"number"==typeof o?o>=0?o&im:Bl:o}(a);if("function"==typeof p){if(!em(o,s,l))return l&rt.Host?ef(d,0,l):za(o,a,l,d);try{const y=p(l);if(null!=y||l&rt.Optional)return y;Oe()}finally{xl()}}else if("number"==typeof p){let y=null,E=Ul(s,o),C=Va,b=l&rt.Host?o[rr][gr]:null;for((-1===E||l&rt.SkipSelf)&&(C=-1===E?yn(s,o):o[E+8],C!==Va&&Qu(l,!1)?(y=o[ze],E=Ba(C),o=$a(C,o)):E=-1);-1!==E;){const A=o[ze];if(Xs(p,E,A.data)){const N=rf(E,o,a,y,l,b);if(N!==Br)return N}C=o[E+8],C!==Va&&Qu(l,o[ze].data[E+8]===b)&&Xs(p,E,o)?(y=A,E=Ba(C),o=$a(C,o)):E=-1}}return d}function rf(s,o,a,l,d,p){const y=o[ze],E=y.data[s+8],A=ko(E,y,a,null==l?Aa(E)&&Ll:l!=y&&0!=(3&E.type),d&rt.Host&&p===E);return null!==A?is(o,y,A,E):Br}function ko(s,o,a,l,d){const p=s.providerIndexes,y=o.data,E=1048575&p,C=s.directiveStart,A=p>>20,z=d?E+A:s.directiveEnd;for(let Z=l?E:E+A;Z<z;Z++){const ce=y[Z];if(Z<C&&a===ce||Z>=C&&ce.type===a)return Z}if(d){const Z=y[C];if(Z&&br(Z)&&Z.type===a)return C}return null}function is(s,o,a,l){let d=s[a];const p=o.data;if(function Q0(s){return s instanceof Ys}(d)){const y=d;y.resolving&&function me(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new X(-200,`Circular dependency in DI detected for ${s}${a}`)}(function Fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}(p[a]));const E=ja(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?In(y.injectImpl):null;em(s,l,rt.Default);try{d=s[a]=y.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Y0(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const y=Oh(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks??(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==C&&In(C),ja(E),y.resolving=!1,xl()}}return d}function Xs(s,o,a){return!!(a[o+(s>>Zu)]&1<<s)}function Qu(s,o){return!(s&rt.Self||s&rt.Host&&o)}class Fo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return tf(this._tNode,this._lView,o,Cr(l),a)}}function Bl(){return new Fo(bn(),se())}function $l(s){return F(()=>{const o=s.prototype.constructor,a=o[Pt]||Lo(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[Pt]||Lo(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Lo(s){return ke(s)?()=>{const o=Lo(q(s));return o&&o()}:Hi(s)}function Ga(s){const o=s[ze],a=o.type;return 2===a?o.declTNode:1===a?s[gr]:null}function Wa(s){return function Yu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Xh(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(bn(),s)}const Vo="__parameters__";function Uo(s,o,a){return F(()=>{const l=function sf(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(C,b,A){const N=C.hasOwnProperty(Vo)?C[Vo]:Object.defineProperty(C,Vo,{value:[]})[Vo];for(;N.length<=A;)N.push(null);return(N[A]=N[A]||[]).push(y),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Kt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=lt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Bo(s,o){s.forEach(a=>Array.isArray(a)?Bo(a,o):o(a))}function zl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Gl(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function di(s,o,a){let l=Ti(s,o);return l>=0?s[1|l]=a:(l=~l,function Wl(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function sn(s,o){const a=Ti(s,o);if(a>=0)return s[1|a]}function Ti(s,o){return function Si(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const p=l+(d-l>>1),y=s[p<<a];if(o===y)return p<<a;y>o?d=p:l=p+1}return~(d<<a)}(s,o,1)}const to=Zr(Uo("Optional"),8),tt=Zr(Uo("SkipSelf"),4);var gt=(()=>((gt=gt||{})[gt.Important=1]="Important",gt[gt.DashCase=2]="DashCase",gt))();const Jl=new Map;let Wi=0;const uc="__ngContext__";function Yn(s,o){Dr(o)?(s[uc]=o[Do],function _f(s){Jl.set(s[Do],s)}(o)):s[uc]=o}let nd;function as(s,o){return nd(s,o)}function cc(s){const o=s[gn];return bi(o)?o[gn]:o}function so(s){return id(s[ci])}function oo(s){return id(s[Xt])}function id(s){for(;null!==s&&!bi(s);)s=s[Xt];return s}function bs(s,o,a,l,d){if(null!=l){let p,y=!1;bi(l)?p=l:Dr(l)&&(y=!0,l=l[Zn]);const E=Hn(l);0===s&&null!==a?null==d?_r(o,a,E):St(o,a,E,d||null,!0):1===s&&null!==a?St(o,a,E,d||null,!0):2===s?function Em(s,o,a){const l=xi(s,o);l&&function Ts(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function ld(s,o,a,l,d){const p=a[bo];p!==Hn(a)&&bs(o,s,l,p,d);for(let E=ir;E<a.length;E++){const C=a[E];cd(C[ze],C,s,o,l,p)}}(o,s,p,a,d)}}function od(s,o,a){return s.createElement(o,a)}function w(s,o){const a=s[$i],l=a.indexOf(o),d=o[gn];512&o[Nt]&&(o[Nt]&=-513,Na(d,-1)),a.splice(l,1)}function T(s,o){if(s.length<=ir)return;const a=ir+o,l=s[a];if(l){const d=l[Co];null!==d&&d!==s&&w(d,l),o>0&&(s[a-1][Xt]=l[Xt]);const p=Gl(s,ir+o);!function Df(s,o){cd(s,o,o[Ot],2,null,null),o[Zn]=null,o[gr]=null}(l[ze],l);const y=p[Di];null!==y&&y.detachView(p[ze]),l[gn]=null,l[Xt]=null,l[Nt]&=-65}return l}function x(s,o){if(!(128&o[Nt])){const a=o[Ot];a.destroyNode&&cd(s,o,a,3,null,null),function v(s){let o=s[ci];if(!o)return G(s[ze],s);for(;o;){let a=null;if(Dr(o))a=o[ci];else{const l=o[ir];l&&(a=l)}if(!a){for(;o&&!o[Xt]&&o!==s;)Dr(o)&&G(o[ze],o),o=o[gn];null===o&&(o=s),Dr(o)&&G(o[ze],o),a=o&&o[Xt]}o=a}}(o)}}function G(s,o){if(!(128&o[Nt])){o[Nt]&=-65,o[Nt]|=128,function Se(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ys)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],C=p[y+1];mn(4,E,C);try{C.call(E)}finally{mn(5,E,C)}}else{mn(4,d,p);try{p.call(d)}finally{mn(5,d,p)}}}}}(s,o),function ee(s,o){const a=s.cleanup,l=o[ts];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?l[d=y]():l[d=-y].unsubscribe(),p+=2}else{const y=l[d=a[p+1]];a[p].call(y)}if(null!==l){for(let p=d+1;p<l.length;p++)(0,l[p])();o[ts]=null}}(s,o),1===o[ze].type&&o[Ot].destroy();const a=o[Co];if(null!==a&&bi(o[gn])){a!==o[gn]&&w(a,o);const l=o[Di];null!==l&&l.detachView(s)}!function vf(s){Jl.delete(s[Do])}(o)}}function Ue(s,o,a){return function st(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[Zn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=s.data[l.directiveStart+d];if(p===P.None||p===P.Emulated)return null}return sr(l,a)}}(s,o.parent,a)}function St(s,o,a,l,d){s.insertBefore(o,a,l,d)}function _r(s,o,a){s.appendChild(o,a)}function us(s,o,a,l,d){null!==l?St(s,o,a,l,d):_r(s,o,a)}function xi(s,o){return s.parentNode(o)}let hc,Dm,bf,Ss=function tu(s,o,a){return 40&s.type?sr(s,a):null};function ea(s,o,a,l){const d=Ue(s,l,o),p=o[Ot],E=function dc(s,o,a){return Ss(s,o,a)}(l.parent||o[gr],l,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)us(p,d,a[C],E,!1);else us(p,d,a,E,!1);void 0!==hc&&hc(p,l,o,a,d)}function pc(s,o){if(null!==o){const a=o.type;if(3&a)return sr(o,s);if(4&a)return As(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return pc(s,l);{const d=s[o.index];return bi(d)?As(-1,d):Hn(d)}}if(32&a)return as(o,s)()||Hn(s[o.index]);{const l=ta(s,o);return null!==l?Array.isArray(l)?l[0]:pc(cc(s[rr]),l):pc(s,o.next)}}return null}function ta(s,o){return null!==o?s[rr][gr].projection[o.projection]:null}function As(s,o){const a=ir+s+1;if(a<o.length){const l=o[a],d=l[ze].firstChild;if(null!==d)return pc(l,d)}return o[bo]}function ud(s,o,a,l,d,p,y){for(;null!=a;){const E=l[a.index],C=a.type;if(y&&0===o&&(E&&Yn(Hn(E),l),a.flags|=2),32!=(32&a.flags))if(8&C)ud(s,o,a.child,l,d,p,!1),bs(o,s,d,E,p);else if(32&C){const b=as(a,l);let A;for(;A=b();)bs(o,s,d,A,p);bs(o,s,d,E,p)}else 16&C?Im(s,o,l,a,d,p):bs(o,s,d,E,p);a=y?a.projectionNext:a.next}}function cd(s,o,a,l,d,p){ud(a,l,s.firstChild,o,d,p,!1)}function Im(s,o,a,l,d,p){const y=a[rr],C=y[gr].projection[l.projection];if(Array.isArray(C))for(let b=0;b<C.length;b++)bs(o,s,d,C[b],p);else ud(s,o,C,y[gn],d,p,!0)}function na(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function dd(s,o,a){const{mergedAttrs:l,classes:d,styles:p}=a;null!==l&&Wu(s,o,l),null!==d&&na(s,o,d),null!==p&&function Cm(s,o,a){s.setAttribute(o,"style",a)}(s,o,p)}function eb(s){Dm=s}function ow(s){return function bm(){if(void 0===bf&&(bf=null,Zt.trustedTypes))try{bf=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return bf}()?.createScriptURL(s)||s}class aw{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ke})`}}function xs(s){return s instanceof aw?s.changingThisBreaksApplicationSecurity:s}function Ri(s,o){const a=function mc(s){return s instanceof aw&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${Ke})`)}return a===o}const dw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var kn=(()=>((kn=kn||{})[kn.NONE=0]="NONE",kn[kn.HTML=1]="HTML",kn[kn.STYLE=2]="STYLE",kn[kn.SCRIPT=3]="SCRIPT",kn[kn.URL=4]="URL",kn[kn.RESOURCE_URL=5]="RESOURCE_URL",kn))();function Nm(s){const o=_d();return o?o.sanitize(kn.URL,s)||"":Ri(s,"URL")?xs(s):function pd(s){return(s=String(s)).match(dw)?s:"unsafe:"+s}(_e(s))}function xf(s){const o=_d();if(o)return ow(o.sanitize(kn.RESOURCE_URL,s)||"");if(Ri(s,"ResourceURL"))return ow(xs(s));throw new X(904,!1)}function yw(s,o,a){return function fb(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?xf:Nm}(o,a)(s)}function _d(){const s=se();return s&&s[ku]}const km=new Kt("ENVIRONMENT_INITIALIZER"),ru=new Kt("INJECTOR",-1),_c=new Kt("INJECTOR_DEF_TYPES");class _w{get(o,a=Cn){if(a===Cn){const l=new Error(`NullInjectorError: No provider for ${Ee(o)}!`);throw l.name="NullInjectorError",l}return a}}function gb(s){return{\u0275providers:s}}function vd(...s){return{\u0275providers:vc(0,s),\u0275fromNgModule:!0}}function vc(s,...o){const a=[],l=new Set;let d;return Bo(o,p=>{const y=p;Fm(y,a,[],l)&&(d||(d=[]),d.push(y))}),void 0!==d&&vw(d,a),a}function vw(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Lm(d,p=>{o.push(p)})}}function Fm(s,o,a,l){if(!(s=q(s)))return!1;let d=null,p=Wn(s);const y=!p&&ut(s);if(p||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(p=Wn(C),!p)return!1;d=C}const E=l.has(d);if(y){if(E)return!1;if(l.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const b of C)Fm(b,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let b;l.add(d);try{Bo(p.imports,A=>{Fm(A,o,a,l)&&(b||(b=[]),b.push(A))})}finally{}void 0!==b&&vw(b,o)}if(!E){const b=Hi(d)||(()=>new d);o.push({provide:d,useFactory:b,deps:j},{provide:_c,useValue:d,multi:!0},{provide:km,useValue:()=>Rt(d),multi:!0})}const C=p.providers;null==C||E||Lm(C,A=>{o.push(A)})}}return d!==s&&void 0!==s.providers}function Lm(s,o){for(let a of s)Ae(a)&&(a=a.\u0275providers),Array.isArray(a)?Lm(a,o):o(a)}const mb=ae({provide:String,useValue:ae});function Vm(s){return null!==s&&"object"==typeof s&&mb in s}function ao(s){return"function"==typeof s}const ra=new Kt("Set Injector scope."),Pf={},_b={};let Um;function Nf(){return void 0===Um&&(Um=new _w),Um}class iu{}class Ew extends iu{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ec(o,y=>this.processProvider(y)),this.records.set(ru,wc(void 0,this)),d.has("environment")&&this.records.set(iu,wc(void 0,this));const p=this.records.get(ra);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(_c.multi,j,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Lt(this),l=In(void 0);try{return o()}finally{Lt(a),In(l)}}get(o,a=Cn,l=rt.Default){this.assertNotDestroyed(),l=Cr(l);const d=Lt(this),p=In(void 0);try{if(!(l&rt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function Hm(s){return"function"==typeof s||"object"==typeof s&&s instanceof Kt}(o)&&dn(o);E=C&&this.injectableDefInScope(C)?wc(Bm(o),Pf):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&rt.Self?Nf():this.parent).get(o,a=l&rt.Optional&&a===Cn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Dn]=y[Dn]||[]).unshift(Ee(o)),d)throw y;return function Kr(s,o,a,l){const d=s[Dn];throw o[Ft]&&d.unshift(o[Ft]),s.message=function U(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==nr?s.slice(2):s;let d=Ee(o);if(Array.isArray(o))d=o.map(Ee).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):Ee(E)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(hr,"\n  ")}`}("\n"+s.message,d,a,l),s[Ur]=d,s[Dn]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{In(p),Lt(d)}}resolveInjectorInitializers(){const o=Lt(this),a=In(void 0);try{const l=this.get(km.multi,j,rt.Self);for(const d of l)d()}finally{Lt(o),In(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(Ee(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(o){let a=ao(o=q(o))?o:q(o&&o.provide);const l=function wb(s){return Vm(s)?wc(void 0,s.useValue):wc($m(s),Pf)}(o);if(ao(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=wc(void 0,Pf,!0),d.factory=()=>jn(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Pf&&(a.value=_b,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Iw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Bm(s){const o=dn(s),a=null!==o?o.factory:Hi(s);if(null!==a)return a;if(s instanceof Kt)throw new X(204,!1);if(s instanceof Function)return function vb(s){const o=s.length;if(o>0)throw function $o(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new X(204,!1);const a=function Er(s){return s&&(s[oi]||s[$s])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new X(204,!1)}function $m(s,o,a){let l;if(ao(s)){const d=q(s);return Hi(d)||Bm(d)}if(Vm(s))l=()=>q(s.useValue);else if(function ww(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...jn(s.deps||[]));else if(function yb(s){return!(!s||!s.useExisting)}(s))l=()=>Rt(q(s.useExisting));else{const d=q(s&&(s.useClass||s.provide));if(!function jm(s){return!!s.deps}(s))return Hi(d)||Bm(d);l=()=>new d(...jn(s.deps))}return l}function wc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Ec(s,o){for(const a of s)Array.isArray(a)?Ec(a,o):a&&Ae(a)?Ec(a.\u0275providers,o):o(a)}class Eb{}class Cw{}class bw{resolveComponentFactory(o){throw function Ib(s){const o=Error(`No component factory found for ${Ee(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ic=(()=>{class s{}return s.NULL=new bw,s})();function Of(){return uo(bn(),se())}function uo(s,o){return new Cc(sr(s,o))}let Cc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Of,s})();function wd(s){return s instanceof Cc?s.nativeElement:s}class Gm{}let Cb=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Db(){const s=se(),a=mr(bn().index,s);return(Dr(a)?a:s)[Ot]}(),s})(),bb=(()=>{class s{}return s.\u0275prov=lt({token:s,providedIn:"root",factory:()=>null}),s})();class Tw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Sw=new Tw("15.2.9"),kf={},Wm="ngOriginalError";function qm(s){return s[Wm]}class Ed{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&qm(o);for(;a&&qm(a);)a=qm(a);return a||null}}function Rs(s){return s instanceof Function?s():s}function Nw(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}a=d+1}}const Zm="ng-template";function Km(s,o,a){let l=0,d=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&d){const y=s[l++];if(a&&"class"===p&&-1!==Nw(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function Ym(s){return 4===s.type&&s.value!==Zm}function Dc(s,o,a){return o===(4!==s.type||a?s.value:Zm)}function Qm(s,o,a){let l=4;const d=s.attrs||[],p=function kw(s){for(let o=0;o<s.length;o++)if(Xh(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!Dc(s,C,a)||""===C&&1===o.length){if(ls(l))return!1;y=!0}}else{const b=8&l?C:o[++E];if(8&l&&null!==s.attrs){if(!Km(s.attrs,b,a)){if(ls(l))return!1;y=!0}continue}const N=Ow(8&l?"class":C,d,Ym(s),a);if(-1===N){if(ls(l))return!1;y=!0;continue}if(""!==b){let z;z=N>p?"":d[N+1].toLowerCase();const Z=8&l?z:null;if(Z&&-1!==Nw(Z,b,0)||2&l&&b!==z){if(ls(l))return!1;y=!0}}}}else{if(!y&&!ls(l)&&!ls(C))return!1;if(y&&ls(C))continue;y=!1,l=C|1&l}}return ls(l)||y}function ls(s){return 0==(1&s)}function Ow(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function Fw(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Cd(s,o,a=!1){for(let l=0;l<o.length;l++)if(Qm(s,o[l],a))return!0;return!1}function Lw(s,o){return s?":not("+o.trim()+")":o}function Nb(s){let o=s[0],a=1,l=2,d="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const E=s[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!ls(y)&&(o+=Lw(p,d),d=""),l=y,p=p||!ls(l);a++}return""!==d&&(o+=Lw(p,d)),o}const Tt={};function Vw(s){Uw(Ht(),se(),Sr()+s,!1)}function Uw(s,o,a,l){if(!l)if(3==(3&o[Nt])){const p=s.preOrderCheckHooks;null!==p&&Nl(o,p,a)}else{const p=s.preOrderHooks;null!==p&&Kh(o,p,0,a)}vs(a)}function $w(s,o=null,a=null,l){const d=Jm(s,o,a,l);return d.resolveInjectorInitializers(),d}function Jm(s,o=null,a=null,l,d=new Set){const p=[a||j,vd(s)];return l=l||("object"==typeof s?void 0:Ee(s)),new Ew(p,o||Nf(),l||null,d)}let bc=(()=>{class s{static create(a,l){if(Array.isArray(a))return $w({name:""},l,a,"");{const d=a.name??"";return $w({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=Cn,s.NULL=new _w,s.\u0275prov=lt({token:s,providedIn:"any",factory:()=>Rt(ru)}),s.__NG_ELEMENT_ID__=-1,s})();function Ac(s,o=rt.Default){const a=se();return null===a?Rt(s,o):tf(bn(),a,q(s),o)}function qw(){throw new Error("invalid")}function Zw(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const p=a[l+1];if(-1!==p){const y=s.data[p];Wh(a[l]),y.contentQueries(2,o[p],p)}}}function Bf(s,o,a,l,d,p,y,E,C,b,A){const N=o.blueprint.slice();return N[Zn]=d,N[Nt]=76|l,(null!==A||s&&1024&s[Nt])&&(N[Nt]|=1024),Cl(N),N[gn]=N[ys]=s,N[pn]=a,N[Hs]=y||s&&s[Hs],N[Ot]=E||s&&s[Ot],N[ku]=C||s&&s[ku]||null,N[ba]=b||s&&s[ba]||null,N[gr]=p,N[Do]=function yf(){return Wi++}(),N[wl]=A,N[rr]=2==o.type?s[rr]:N,N}function Sd(s,o,a,l,d){let p=s.data[o];if(null===p)p=function Mc(s,o,a,l,d){const p=Xg(),y=$u(),C=s.data[o]=function Jb(s,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C,C.prev=p)),C}(s,o,a,l,d),function Gh(){return Dt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const y=function Ro(){const s=Dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return zi(p,!0),p}function ou(s,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Ki(s,o,a){zu(o);try{const l=s.viewQuery;null!==l&&jf(1,l,a);const d=s.template;null!==d&&Yw(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Zw(s,o),s.staticViewQueries&&jf(2,s.viewQuery,a);const p=s.components;null!==p&&function Kw(s,o){for(let a=0;a<o.length;a++)sT(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Nt]&=-5,Zh()}}function ry(s,o,a,l){const d=o[Nt];if(128!=(128&d)){zu(o);try{Cl(o),function Po(s){return Dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Yw(s,o,a,2,l);const y=3==(3&d);if(y){const b=s.preOrderCheckHooks;null!==b&&Nl(o,b,null)}else{const b=s.preOrderHooks;null!==b&&Kh(o,b,0,null),Yh(o,0)}if(function iT(s){for(let o=so(s);null!==o;o=oo(o)){if(!o[Fu])continue;const a=o[$i];for(let l=0;l<a.length;l++){const d=a[l];512&d[Nt]||Na(d[gn],1),d[Nt]|=512}}}(o),function oE(s){for(let o=so(s);null!==o;o=oo(o))for(let a=ir;a<o.length;a++){const l=o[a],d=l[ze];xo(l)&&ry(d,l,d.template,l[pn])}}(o),null!==s.contentQueries&&Zw(s,o),y){const b=s.contentCheckHooks;null!==b&&Nl(o,b)}else{const b=s.contentHooks;null!==b&&Kh(o,b,1),Yh(o,1)}!function Yb(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)vs(~d);else{const p=d,y=a[++l],E=a[++l];z0(y,p),E(2,o[p])}}}finally{vs(-1)}}(s,o);const E=s.components;null!==E&&function Qb(s,o){for(let a=0;a<o.length;a++)UP(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&jf(2,C,l),y){const b=s.viewCheckHooks;null!==b&&Nl(o,b)}else{const b=s.viewHooks;null!==b&&Kh(o,b,2),Yh(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Nt]&=-41,512&o[Nt]&&(o[Nt]&=-513,Na(o[gn],-1))}finally{Zh()}}}function Yw(s,o,a,l,d){const p=Sr(),y=2&l;try{vs(-1),y&&o.length>an&&Uw(s,o,an,!1),mn(y?2:0,d),a(l,d)}finally{vs(p),mn(y?3:1,d)}}function iy(s,o,a){if(Sa(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}function sy(s,o,a){Bh()&&(function tE(s,o,a,l){const d=a.directiveStart,p=a.directiveEnd;Aa(a)&&function LP(s,o,a){const l=sr(o,s),d=ay(a),p=s[Hs],y=Pc(s,Bf(s,d,null,a.onPush?32:16,l,o,p,p.createRenderer(l,a),null,null,null));s[o.index]=y}(o,a,s.data[d+a.componentOffset]),s.firstCreatePass||Ku(a,o),Yn(l,o);const y=a.initialInputs;for(let E=d;E<p;E++){const C=s.data[E],b=is(o,s,E,a);Yn(b,o),null!==y&&VP(0,E-d,b,C,0,y),br(C)&&(mr(a.index,o)[pn]=is(o,s,E,a))}}(s,o,a,sr(a,o)),64==(64&a.flags)&&nE(s,o,a))}function oy(s,o,a=sr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],E=-1===y?a(o,s):s[y];s[d++]=E}}}function ay(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=xc(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function xc(s,o,a,l,d,p,y,E,C,b){const A=an+l,N=A+d,z=function ia(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Tt);return a}(A,N),Z="function"==typeof b?b():b;return z[ze]={type:s,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:o,data:z.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Z,incompleteFirstPass:!1}}function Qw(s,o,a,l){const d=uE(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&cE(s).push(l,d.length-1))}function uy(s,o,a,l){for(let d in s)if(s.hasOwnProperty(d)){a=null===a?{}:a;const p=s[d];null===l?cy(a,o,d,p):l.hasOwnProperty(d)&&cy(a,o,l[d],p)}return a}function cy(s,o,a,l){s.hasOwnProperty(a)?s[a].push(o,l):s[a]=[o,l]}function Rc(s,o,a,l){if(Bh()){const d=null===l?null:{"":-1},p=function tT(s,o){const a=s.directiveRegistry;let l=null,d=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(Cd(o,y.selectors,!1))if(l||(l=[]),br(y))if(null!==y.findHostDirectiveDefs){const E=[];d=d||new Map,y.findHostDirectiveDefs(y,E,d),l.unshift(...E,y),au(s,o,E.length)}else l.unshift(y),au(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(s,a);let y,E;null===p?y=E=null:[y,E]=p,null!==y&&dy(s,o,a,y,d,E),d&&function nT(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new X(-301,!1);l.push(o[d],p)}}}(a,l,d)}a.mergedAttrs=Js(a.mergedAttrs,a.attrs)}function dy(s,o,a,l,d,p){for(let b=0;b<l.length;b++)Ha(Ku(a,o),s,l[b].type);!function kP(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,l.length);for(let b=0;b<l.length;b++){const A=l[b];A.providersResolver&&A.providersResolver(A)}let y=!1,E=!1,C=ou(s,o,l.length,null);for(let b=0;b<l.length;b++){const A=l[b];a.mergedAttrs=Js(a.mergedAttrs,A.hostAttrs),FP(s,a,o,C,A),rE(C,A,d),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const N=A.type.prototype;!y&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(a.index),y=!0),!E&&(N.ngOnChanges||N.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(a.index),E=!0),C++}!function Jw(s,o,a){const d=o.directiveEnd,p=s.data,y=o.attrs,E=[];let C=null,b=null;for(let A=o.directiveStart;A<d;A++){const N=p[A],z=a?a.get(N):null,ce=z?z.outputs:null;C=uy(N.inputs,A,C,z?z.inputs:null),b=uy(N.outputs,A,b,ce);const xe=null===C||null===y||Ym(o)?null:rT(C,A,y);E.push(xe)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=C,o.outputs=b}(s,a,p)}function nE(s,o,a){const l=a.directiveStart,d=a.directiveEnd,p=a.index,y=function G0(){return Dt.lFrame.currentDirectiveIndex}();try{vs(p);for(let E=l;E<d;E++){const C=s.data[E],b=o[E];ka(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&eT(C,b)}}finally{vs(-1),ka(y)}}function eT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function au(s,o,a){o.componentOffset=a,(s.components??(s.components=[])).push(o.index)}function rE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;br(o)&&(a[""]=s)}}function FP(s,o,a,l,d){s.data[l]=d;const p=d.factory||(d.factory=Hi(d.type)),y=new Ys(p,br(d),Ac);s.blueprint[l]=y,a[l]=y,function hy(s,o,a,l,d){const p=d.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const E=~o.index;(function eE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,l,p)}}(s,o,l,ou(s,a,d.hostVars,Tt),d)}function co(s,o,a,l,d,p){const y=sr(s,o);!function iE(s,o,a,l,d,p,y){if(null==p)s.removeAttribute(o,d,a);else{const E=null==y?_e(p):y(p,l||"",d);s.setAttribute(o,d,E,a)}}(o[Ot],y,p,s.value,a,l,d)}function VP(s,o,a,l,d,p){const y=p[o];if(null!==y){const E=l.setInput;for(let C=0;C<y.length;){const b=y[C++],A=y[C++],N=y[C++];null!==E?l.setInput(a,N,b,A):a[A]=N}}}function rT(s,o,a){let l=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const y=s[p];for(let E=0;E<y.length;E+=2)if(y[E]===o){l.push(p,y[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function sE(s,o,a,l){return[s,!0,!1,o,null,0,l,a,null,null]}function UP(s,o){const a=mr(o,s);if(xo(a)){const l=a[ze];48&a[Nt]?ry(l,a,l.template,a[pn]):a[es]>0&&fy(a)}}function fy(s){for(let l=so(s);null!==l;l=oo(l))for(let d=ir;d<l.length;d++){const p=l[d];if(xo(p))if(512&p[Nt]){const y=p[ze];ry(y,p,y.template,p[pn])}else p[es]>0&&fy(p)}const a=s[ze].components;if(null!==a)for(let l=0;l<a.length;l++){const d=mr(a[l],s);xo(d)&&d[es]>0&&fy(d)}}function sT(s,o){const a=mr(o,s),l=a[ze];(function aE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Ki(l,a,a[pn])}function Pc(s,o){return s[ci]?s[Ta][Xt]=o:s[ci]=o,s[Ta]=o,o}function $f(s){for(;s;){s[Nt]|=32;const o=cc(s);if(ns(s)&&!o)return s;s=o}return null}function Ad(s,o,a,l=!0){const d=o[Hs];d.begin&&d.begin();try{ry(s,o,s.template,a)}catch(y){throw l&&Fn(o,y),y}finally{d.end&&d.end()}}function jf(s,o,a){Wh(0),o(s,a)}function uE(s){return s[ts]||(s[ts]=[])}function cE(s){return s.cleanup||(s.cleanup=[])}function Fn(s,o){const a=s[ba],l=a?a.get(Ed,null):null;l&&l.handleError(o)}function sa(s,o,a,l,d){for(let p=0;p<a.length;){const y=a[p++],E=a[p++],C=o[y],b=s.data[y];null!==b.setInput?b.setInput(C,d,l,E):C[E]=d}}function py(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=Pe(d,E):2==p&&(l=Pe(l,E+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function Md(s,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(Hn(p)),bi(p))for(let E=ir;E<p.length;E++){const C=p[E],b=C[ze].firstChild;null!==b&&Md(C[ze],C,b,l)}const y=a.type;if(8&y)Md(s,o,a.child,l);else if(32&y){const E=as(a,o);let C;for(;C=E();)l.push(C)}else if(16&y){const E=ta(o,a);if(Array.isArray(E))l.push(...E);else{const C=cc(o[rr]);Md(C[ze],C,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class xd{get rootNodes(){const o=this._lView,a=o[ze];return Md(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pn]}set context(o){this._lView[pn]=o}get destroyed(){return 128==(128&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[gn];if(bi(o)){const a=o[To],l=a?a.indexOf(this):-1;l>-1&&(T(o,l),Gl(a,l))}this._attachedToViewContainer=!1}x(this._lView[ze],this._lView)}onDestroy(o){Qw(this._lView[ze],this._lView,null,o)}markForCheck(){$f(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-65}reattach(){this._lView[Nt]|=64}detectChanges(){Ad(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lc(s,o){cd(s,o,o[Ot],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=o}}class $P extends xd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ad(o[ze],o,o[pn],!1)}checkNoChanges(){}get context(){return null}}class uT extends Ic{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ut(o);return new Rd(a,this.ngModule)}}function cT(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class HP{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=Cr(l);const d=this.injector.get(o,kf,l);return d!==kf||a===kf?d:this.parentInjector.get(o,a,l)}}class Rd extends Cw{get inputs(){return cT(this.componentDef.inputs)}get outputs(){return cT(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Ob(s){return s.map(Nb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let p=(d=d||this.ngModule)instanceof iu?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new HP(o,p):o,E=y.get(Gm,null);if(null===E)throw new X(407,!1);const C=y.get(bb,null),b=E.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=l?function OP(s,o,a){return s.selectRootElement(o,a===P.ShadowDom)}(b,l,this.componentDef.encapsulation):od(b,A,function jP(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),z=this.componentDef.onPush?288:272,Z=xc(0,null,null,1,0,null,null,null,null,null),ce=Bf(null,Z,null,z,null,null,E,b,C,y,null);let xe,$e;zu(ce);try{const et=this.componentDef;let It,Ie=null;et.findHostDirectiveDefs?(It=[],Ie=new Map,et.findHostDirectiveDefs(et,It,Ie),It.push(et)):It=[et];const Mt=function lT(s,o){const a=s[ze],l=an;return s[l]=o,Sd(a,l,2,"#host",null)}(ce,N),_n=function W(s,o,a,l,d,p,y,E){const C=d[ze];!function qt(s,o,a,l){for(const d of s)o.mergedAttrs=Js(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(py(o,o.mergedAttrs,!0),null!==a&&dd(l,a,o))}(l,s,o,y);const b=p.createRenderer(o,a),A=Bf(d,ay(a),null,a.onPush?32:16,d[s.index],s,p,b,E||null,null,null);return C.firstCreatePass&&au(C,s,l.length-1),Pc(d,A),d[s.index]=A}(Mt,N,et,It,ce,E,b);$e=Vu(Z,an),N&&function hT(s,o,a,l){if(l)Wu(s,a,["ng-version",Sw.full]);else{const{attrs:d,classes:p}=function kb(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&a.push(p);else{if(!ls(d))break;d=p}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Wu(s,a,d),p&&p.length>0&&na(s,a,p.join(" "))}}(b,et,N,l),void 0!==a&&function dt(s,o,a){const l=s.projection=[];for(let d=0;d<o.length;d++){const p=a[d];l.push(null!=p?Array.from(p):null)}}($e,this.ngContentSelectors,a),xe=function dT(s,o,a,l,d,p){const y=bn(),E=d[ze],C=sr(y,d);dy(E,d,y,a,null,l);for(let A=0;A<a.length;A++)Yn(is(d,E,y.directiveStart+A,y),d);nE(E,d,y),C&&Yn(C,d);const b=is(d,E,y.directiveStart+y.componentOffset,y);if(s[pn]=d[pn]=b,null!==p)for(const A of p)A(b,o);return iy(E,y,s),b}(_n,et,It,Ie,ce,[ds]),Ki(Z,ce,null)}finally{Zh()}return new zP(this.componentType,xe,uo($e,ce),ce,$e)}}class zP extends Eb{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new $P(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const p=this._rootLView;sa(p[ze],p,d,o,a),$f(mr(this._tNode.index,p))}}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ds(){const s=bn();Pl(se()[ze],s)}function gy(s){let o=function Yi(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(br(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new X(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=s;y.inputs=Hf(s.inputs),y.declaredInputs=Hf(s.declaredInputs),y.outputs=Hf(s.outputs);const E=d.hostBindings;E&&dE(s,E);const C=d.viewQuery,b=d.contentQueries;if(C&&fT(s,C),b&&pT(s,b),Re(s.inputs,d.inputs),Re(s.declaredInputs,d.declaredInputs),Re(s.outputs,d.outputs),br(d)&&d.data.animation){const A=s.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===gy&&(a=!1)}}o=Object.getPrototypeOf(o)}!function lE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Js(d.hostAttrs,a=Js(a,d.hostAttrs))}}(l)}function Hf(s){return s===M?{}:s===j?[]:s}function fT(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function pT(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function dE(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function hs(s){return!!mE(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function mE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Rr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function zf(s,o,a,l){const d=se();return Rr(d,Ks(),o)&&(Ht(),co(fn(),d,s,o,a,l)),zf}function by(s,o,a,l,d,p,y,E){const C=se(),b=Ht(),A=s+an,N=b.firstCreatePass?function Dy(s,o,a,l,d,p,y,E,C){const b=o.consts,A=Sd(o,s,4,y||null,rs(b,E));Rc(o,a,A,rs(b,C)),Pl(o,A);const N=A.tView=xc(2,A,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,b);return null!==o.queries&&(o.queries.template(o,A),N.queries=o.queries.embeddedTView(A)),A}(A,b,C,o,a,l,d,p,y):b.data[A];zi(N,!1);const z=C[Ot].createComment("");ea(b,C,z,N),Yn(z,C),Pc(C,C[A]=sE(z,C,z,N)),So(N)&&sy(b,C,N),null!=y&&oy(C,N,E)}function Pd(s,o,a){const l=se();return Rr(l,Ks(),o)&&function xr(s,o,a,l,d,p,y,E){const C=sr(o,a);let A,b=o.inputs;!E&&null!=b&&(A=b[l])?(sa(s,a,A,l,d),Aa(o)&&function Qn(s,o){const a=mr(o,s);16&a[Nt]||(a[Nt]|=32)}(a,o.index)):3&o.type&&(l=function Xb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,p.setProperty(C,l,d))}(Ht(),fn(),l,s,o,l[Ot],a,!1),Pd}function Ty(s,o,a,l,d){const y=d?"class":"style";sa(s,a,o.inputs[y],y,l)}function ho(s,o,a,l){const d=se(),p=Ht(),y=an+s,E=d[Ot],C=p.firstCreatePass?function wT(s,o,a,l,d,p){const y=o.consts,C=Sd(o,s,2,l,rs(y,d));return Rc(o,a,C,rs(y,p)),null!==C.attrs&&py(C,C.attrs,!1),null!==C.mergedAttrs&&py(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,p,d,o,a,l):p.data[y],b=d[y]=od(E,o,function K0(){return Dt.lFrame.currentNamespace}()),A=So(C);return zi(C,!0),dd(E,b,C),32!=(32&C.flags)&&ea(p,d,b,C),0===function Dl(){return Dt.lFrame.elementDepthCount}()&&Yn(b,d),function Uh(){Dt.lFrame.elementDepthCount++}(),A&&(sy(p,d,C),iy(p,C,d)),null!==l&&oy(d,C),ho}function fo(){let s=bn();$u()?function jh(){Dt.lFrame.isParent=!1}():(s=s.parent,zi(s,!1));const o=s;!function bl(){Dt.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(Pl(a,s),Sa(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Qs(s){return 0!=(8&s.flags)}(o)&&Ty(a,o,se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ol(s){return 0!=(16&s.flags)}(o)&&Ty(a,o,se(),o.stylesWithoutHost,!1),fo}function Kf(s,o,a,l){return ho(s,o,a,l),fo(),Kf}function ua(){return se()}function Qf(s){return!!s&&"function"==typeof s.then}function Ay(s){return!!s&&"function"==typeof s.subscribe}const wE=Ay;function My(s,o,a,l){const d=se(),p=Ht(),y=bn();return function Jf(s,o,a,l,d,p,y){const E=So(l),b=s.firstCreatePass&&cE(s),A=o[pn],N=uE(o);let z=!0;if(3&l.type||y){const xe=sr(l,o),$e=y?y(xe):xe,et=N.length,It=y?Mt=>y(Hn(Mt[l.index])):l.index;let Ie=null;if(!y&&E&&(Ie=function xy(s,o,a,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===l){const E=o[ts],C=d[p+2];return E.length>C?E[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,l.index)),null!==Ie)(Ie.__ngLastListenerFn__||Ie).__ngNextListenerFn__=p,Ie.__ngLastListenerFn__=p,z=!1;else{p=Xf(l,o,A,p,!1);const Mt=a.listen($e,d,p);N.push(p,Mt),b&&b.push(d,It,et,et+1)}}else p=Xf(l,o,A,p,!1);const Z=l.outputs;let ce;if(z&&null!==Z&&(ce=Z[d])){const xe=ce.length;if(xe)for(let $e=0;$e<xe;$e+=2){const _n=o[ce[$e]][ce[$e+1]].subscribe(p),on=N.length;N.push(p,_n),b&&b.push(d,l.index,on,-(on+1))}}}(p,d,d[Ot],y,s,o,l),My}function Nd(s,o,a,l){try{return mn(6,o,a),!1!==a(l)}catch(d){return Fn(s,d),!1}finally{mn(7,o,a)}}function Xf(s,o,a,l,d){return function p(y){if(y===Function)return l;$f(s.componentOffset>-1?mr(s.index,o):o);let C=Nd(o,a,l,y),b=p.__ngNextListenerFn__;for(;b;)C=Nd(o,a,b,y)&&C,b=b.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function ep(s=1){return function Rl(s){return(Dt.lFrame.contextLView=function W0(s,o){for(;s>0;)o=o[ys],s--;return o}(s,Dt.lFrame.contextLView))[pn]}(s)}function ip(s,o){return s<<17|o<<2}function la(s){return s>>17&32767}function Fd(s){return 2|s}function po(s){return(131068&s)>>2}function Fy(s,o){return-131069&s|o<<2}function sp(s){return 1|s}function SE(s,o,a,l,d){const p=s[a+1],y=null===o;let E=l?la(p):po(p),C=!1;for(;0!==E&&(!1===C||y);){const A=s[E+1];DT(s[E],o)&&(C=!0,s[E+1]=l?sp(A):Fd(A)),E=l?la(A):po(A)}C&&(s[a+1]=l?Fd(p):sp(p))}function DT(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ti(s,o)>=0}function lp(s,o){return function Ni(s,o,a,l){const d=se(),p=Ht(),y=function _s(s){const o=Dt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);p.firstUpdatePass&&function Uy(s,o,a,l){const d=s.data;if(null===d[a+1]){const p=d[Sr()],y=function xE(s,o){return o>=s.expandoStartIndex}(s,a);(function FT(s,o){return 0!=(s.flags&(o?8:16))})(p,l)&&null===o&&!y&&(o=!1),o=function RT(s,o,a,l){const d=function Hu(s){const o=Dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Uc(a=By(null,s,o,a,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(a=By(d,s,o,a,l),null===p){let C=function fi(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==po(l))return s[la(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=By(null,s,o,C[1],l),C=Uc(C,o.attrs,l),function PT(s,o,a,l){s[la(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else p=function NT(s,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Uc(l,s[p].hostAttrs,a);return Uc(l,o.attrs,a)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function TE(s,o,a,l,d,p){let y=p?o.classBindings:o.styleBindings,E=la(y),C=po(y);s[l]=a;let A,b=!1;if(Array.isArray(a)?(A=a[1],(null===A||Ti(a,A)>0)&&(b=!0)):A=a,d)if(0!==C){const z=la(s[E+1]);s[l+1]=ip(z,E),0!==z&&(s[z+1]=Fy(s[z+1],l)),s[E+1]=function IT(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=ip(E,0),0!==E&&(s[E+1]=Fy(s[E+1],l)),E=l;else s[l+1]=ip(C,0),0===E?E=l:s[C+1]=Fy(s[C+1],l),C=l;b&&(s[l+1]=Fd(s[l+1])),SE(s,A,l,!0),SE(s,A,l,!1),function CT(s,o,a,l,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ti(p,o)>=0&&(a[l+1]=sp(a[l+1]))}(o,A,s,l,p),y=ip(E,C),p?o.classBindings=y:o.styleBindings=y}(d,p,o,a,y,l)}}(p,s,y,l),o!==Tt&&Rr(d,y,o)&&function hp(s,o,a,l,d,p,y,E){if(!(3&o.type))return;const C=s.data,b=C[E+1],A=function Ly(s){return 1==(1&s)}(b)?RE(C,o,a,d,po(b),y):void 0;fp(A)||(fp(p)||function ky(s){return 2==(2&s)}(b)&&(p=RE(C,null,a,d,E,y)),function Ms(s,o,a,l,d){if(o)d?s.addClass(a,l):s.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:gt.DashCase;null==d?s.removeStyle(a,l,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=gt.Important),s.setStyle(a,l,d,p))}}(l,y,Pa(Sr(),a),d,p))}(p,p.data[Sr()],d,d[Ot],s,d[y+1]=function $y(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ee(xs(s)))),s}(o,a),l,y)}(s,o,null,!0),lp}function By(s,o,a,l,d){let p=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(p=o[E],l=Uc(l,p.hostAttrs,d),p!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function Uc(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),di(s,y,!!a||o[++p]))}return void 0===s?null:s}function RE(s,o,a,l,d,p){const y=null===o;let E;for(;d>0;){const C=s[d],b=Array.isArray(C),A=b?C[1]:C,N=null===A;let z=a[d+1];z===Tt&&(z=N?j:void 0);let Z=N?sn(z,l):A===l?z:void 0;if(b&&!fp(Z)&&(Z=sn(C,l)),fp(Z)&&(E=Z,y))return E;const ce=s[d+1];d=y?la(ce):po(ce)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(E=sn(C,l))}return E}function fp(s){return void 0!==s}function LT(s,o=""){const a=se(),l=Ht(),d=s+an,p=l.firstCreatePass?Sd(l,d,1,o,null):l.data[d],y=a[d]=function Xo(s,o){return s.createText(o)}(a[Ot],o);ea(l,a,y,p),zi(p,!1)}function PE(s){return NE("",s,""),PE}function NE(s,o,a){const l=se(),d=function Oc(s,o,a,l){return Rr(s,Ks(),a)?o+_e(a)+l:Tt}(l,s,o,a);return d!==Tt&&function lo(s,o,a){const l=Pa(o,s);!function sd(s,o,a){s.setValue(o,a)}(s[Ot],l,a)}(l,Sr(),d),NE}const hu=void 0;var JT=["en",[["a","p"],["AM","PM"],hu],[["AM","PM"],hu,hu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hu,"{1} 'at' {0}",hu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QT(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let pi={};function vp(s){const o=function XT(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=ZE(o);if(a)return a;const l=o.split("-")[0];if(a=ZE(l),a)return a;if("en"===l)return JT;throw new X(701,!1)}function qE(s){return vp(s)[yt.PluralCase]}function ZE(s){return s in pi||(pi[s]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[s]),pi[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Bc="en-US";let fu=Bc;function g_(s,o,a,l,d){if(s=q(s),Array.isArray(s))for(let p=0;p<s.length;p++)g_(s[p],o,a,l,d);else{const p=Ht(),y=se();let E=ao(s)?s:q(s.provide),C=$m(s);const b=bn(),A=1048575&b.providerIndexes,N=b.directiveStart,z=b.providerIndexes>>20;if(ao(s)||!s.multi){const Z=new Ys(C,d,Ac),ce=$d(E,o,d?A:A+z,N);-1===ce?(Ha(Ku(b,y),p,E),m_(p,s,o.length),o.push(E),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(Z),y.push(Z)):(a[ce]=Z,y[ce]=Z)}else{const Z=$d(E,o,A+z,N),ce=$d(E,o,A,A+z),$e=ce>=0&&a[ce];if(d&&!$e||!d&&!(Z>=0&&a[Z])){Ha(Ku(b,y),p,E);const et=function SS(s,o,a,l,d){const p=new Ys(s,a,Ac);return p.multi=[],p.index=o,p.componentProviders=0,uI(p,d,l&&!a),p}(d?TS:vr,a.length,d,l,C);!d&&$e&&(a[ce].providerFactory=et),m_(p,s,o.length,0),o.push(E),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(et),y.push(et)}else m_(p,s,Z>-1?Z:ce,uI(a[d?ce:Z],C,!d&&l));!d&&l&&$e&&a[ce].componentProviders++}}}function m_(s,o,a,l){const d=ao(o),p=function Rf(s){return!!s.useClass}(o);if(d||p){const C=(p?q(o.useClass):o).prototype.ngOnDestroy;if(C){const b=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const A=b.indexOf(a);-1===A?b.push(a,[l,C]):b[A+1].push(l,C)}else b.push(a,C)}}}function uI(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function $d(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function vr(s,o,a,l){return Nr(this.multi,[])}function TS(s,o,a,l){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=is(a,a[ze],this.providerFactory.index,l);p=E.slice(0,y),Nr(d,p);for(let C=y;C<E.length;C++)p.push(E[C])}else p=[],Nr(d,p);return p}function Nr(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function y_(s,o=[]){return a=>{a.providersResolver=(l,d)=>function bS(s,o,a){const l=Ht();if(l.firstCreatePass){const d=br(s);g_(a,l.data,l.blueprint,d,!0),g_(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Hc{}class cI{}function AS(s,o){return new Op(s,o??null)}class Op extends Hc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uT(this);const l=qn(o);this._bootstrapComponents=Rs(l.bootstrap),this._r3Injector=Jm(o,a,[{provide:Hc,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],Ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class __ extends cI{constructor(o){super(),this.moduleType=o}create(o){return new Op(this.moduleType,o)}}class v_ extends Hc{constructor(o,a,l){super(),this.componentFactoryResolver=new uT(this),this.instance=null;const d=new Ew([...o,{provide:Hc,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],a||Nf(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function w_(s,o,a=null){return new v_(s,o,a).injector}let MS=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=vc(0,a.type),d=l.length>0?w_([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=lt({token:s,providedIn:"environment",factory:()=>new s(Rt(iu))}),s})();function lI(s){s.getStandaloneInjector=o=>o.get(MS).getOrCreateStandaloneInjector(s)}function P_(s,o,a,l,d,p){const y=o+a;return Rr(s,y,d)?function Ps(s,o,a){return s[o]=a}(s,y+1,p?l.call(p,d):l(d)):function yu(s,o){const a=s[o];return a===Tt?void 0:a}(s,y+1)}function Fp(s,o){const a=Ht();let l;const d=s+an;a.firstCreatePass?(l=function BS(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks??(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=Hi(l.type)),y=In(Ac);try{const E=ja(!1),C=p();return ja(E),function _T(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,se(),d,C),C}finally{In(y)}}function O_(s,o,a){const l=s+an,d=se(),p=function Zs(s,o){return s[o]}(d,l);return function gi(s,o){return s[ze].data[o].pure}(d,l)?P_(d,function Tr(){const s=Dt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function II(s){return o=>{setTimeout(s,void 0,o)}}const Fs=class k_ extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,p=a||(()=>null),y=l;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=II(p),d&&(d=II(d)),y&&(y=II(y)));const E=super.subscribe({next:d,error:p,complete:y});return o instanceof V.w0&&o.add(E),E}};function $S(){return this._results[Symbol.iterator]()}class CI{get changes(){return this._changes||(this._changes=new Fs)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=CI.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=$S)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function Qr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function dm(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jd=(()=>{class s{}return s.__NG_ELEMENT_ID__=iN,s})();const jS=jd,F_=class extends jS{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tView,d=Bf(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[Co]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[Di];return null!==y&&(d[Di]=y.createEmbeddedView(l)),Ki(l,d,o),new xd(d)}};function iN(){return L_(bn(),se())}function L_(s,o){return 4&s.type?new F_(o,s,uo(s,o)):null}let zc=(()=>{class s{}return s.__NG_ELEMENT_ID__=sN,s})();function sN(){return GS(bn(),se())}const oN=zc,HS=class extends oN{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return uo(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const o=yn(this._hostTNode,this._hostLView);if(Ua(o)){const a=$a(o,this._hostLView),l=Ba(o);return new Fo(a[ze].data[l+8],a)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=zS(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-ir}createEmbeddedView(o,a,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const y=o.createEmbeddedView(a||{},p);return this.insert(y,d),y}createComponent(o,a,l,d,p){const y=o&&!function Xu(s){return"function"==typeof s}(o);let E;if(y)E=a;else{const N=a||{};E=N.index,l=N.injector,d=N.projectableNodes,p=N.environmentInjector||N.ngModuleRef}const C=y?o:new Rd(ut(o)),b=l||this.parentInjector;if(!p&&null==C.ngModule){const z=(y?b:this.parentInjector).get(iu,null);z&&(p=z)}const A=C.create(b,d,void 0,p);return this.insert(A.hostView,E),A}insert(o,a){const l=o._lView,d=l[ze];if(function Vh(s){return bi(s[gn])}(l)){const A=this.indexOf(o);if(-1!==A)this.detach(A);else{const N=l[gn],z=new HS(N,N[gr],N[gn]);z.detach(z.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function f(s,o,a,l){const d=ir+l,p=a.length;l>0&&(a[d-1][Xt]=o),l<p-ir?(o[Xt]=a[d],zl(a,ir+l,o)):(a.push(o),o[Xt]=null),o[gn]=a;const y=o[Co];null!==y&&a!==y&&function m(s,o){const a=s[$i];o[rr]!==o[gn][gn][rr]&&(s[Fu]=!0),null===a?s[$i]=[o]:a.push(o)}(y,o);const E=o[Di];null!==E&&E.insertView(s),o[Nt]|=64}(d,l,y,p);const E=As(p,y),C=l[Ot],b=xi(C,y[bo]);return null!==b&&function wm(s,o,a,l,d,p){l[Zn]=d,l[gr]=o,cd(s,l,a,1,d,p)}(d,y[gr],C,l,b,E),o.attachToViewContainerRef(),zl(V_(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=zS(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=T(this._lContainer,a);l&&(Gl(V_(this._lContainer),a),x(l[ze],l))}detach(o){const a=this._adjustIndex(o,-1),l=T(this._lContainer,a);return l&&null!=Gl(V_(this._lContainer),a)?new xd(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function zS(s){return s[To]}function V_(s){return s[To]||(s[To]=[])}function GS(s,o){let a;const l=o[s.index];if(bi(l))a=l;else{let d;if(8&s.type)d=Hn(l);else{const p=o[Ot];d=p.createComment("");const y=sr(s,o);St(p,xi(p,y),d,function ad(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=a=sE(l,o,d,s),Pc(o,a)}return new HS(a,s,o)}class Vp{constructor(o){this.queryList=o,this.matches=null}clone(){return new Vp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Up{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new Up(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==jp(o,a).matches&&this.queries[a].setDirty()}}class DI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class U_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new U_(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Gc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Gc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,WS(a,p)),this.matchTNodeWithReadOption(o,a,ko(a,o,p,!1,!1))}else l===jd?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ko(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Cc||d===zc||d===jd&&4&a.type)this.addMatch(a.index,-2);else{const p=ko(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function WS(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function qS(s,o,a,l){return-1===a?function bI(s,o){return 11&s.type?uo(s,o):4&s.type?L_(s,o):null}(o,s):-2===a?function B_(s,o,a){return a===Cc?uo(o,s):a===jd?L_(o,s):a===zc?GS(o,s):void 0}(s,o,l):is(s,s[ze],a,o)}function Wc(s,o,a,l){const d=o[Di].queries[l];if(null===d.matches){const p=s.data,y=a.matches,E=[];for(let C=0;C<y.length;C+=2){const b=y[C];E.push(b<0?null:qS(o,p[b],y[C+1],a.metadata.read))}d.matches=E}return d.matches}function Bp(s,o,a,l){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const y=Wc(s,o,d,a);for(let E=0;E<p.length;E+=2){const C=p[E];if(C>0)l.push(y[E/2]);else{const b=p[E+1],A=o[-C];for(let N=ir;N<A.length;N++){const z=A[N];z[Co]===z[gn]&&Bp(z[ze],z,b,l)}if(null!==A[$i]){const N=A[$i];for(let z=0;z<N.length;z++){const Z=N[z];Bp(Z[ze],Z,b,l)}}}}}return l}function TI(s){const o=se(),a=Ht(),l=Al();Wh(l+1);const d=jp(a,l);if(s.dirty&&function Uu(s){return 4==(4&s[Nt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Bp(a,o,l,[]):Wc(a,o,d,l);s.reset(p,wd),s.notifyOnChanges()}return!0}return!1}function KS(s,o,a,l){const d=Ht();if(d.firstCreatePass){const p=bn();(function _u(s,o,a){null===s.queries&&(s.queries=new U_),s.queries.track(new Gc(o,a))})(d,new DI(o,a,l),p.index),function $p(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function qc(s,o,a){const l=new CI(4==(4&a));Qw(s,o,l,l.destroy),null===o[Di]&&(o[Di]=new Up),o[Di].queries.push(new Vp(l))}(d,se(),a)}function $_(){return function aN(s,o){return s[Di].queries[o].queryList}(se(),Al())}function jp(s,o){return s.queries.getByIndex(o)}function AI(s){return!!qn(s)}function Eu(...s){}const BI=new Kt("Application Initializer");let Wp=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Eu,this.reject=Eu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Qf(p))a.push(p);else if(wE(p)){const y=new Promise((E,C)=>{p.subscribe({complete:E,error:C})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Rt(BI,8))},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Q_=new Kt("AppId",{providedIn:"root",factory:function $I(){return`${Iu()}${Iu()}${Iu()}`}});function Iu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const J_=new Kt("Platform Initializer"),qp=new Kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let lA=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Zp=new Kt("LocaleId",{providedIn:"root",factory:()=>On(Zp,rt.Optional|rt.SkipSelf)||function dA(){return typeof $localize<"u"&&$localize.locale||Bc}()}),jI=new Kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Wd=(()=>{class s{compileModuleSync(a){return new __(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Rs(qn(a).declarations).reduce((y,E)=>{const C=ut(E);return C&&y.push(new Rd(C)),y},[]);return new GI(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ev=(()=>Promise.resolve(0))();function tv(s){typeof Zone>"u"?ev.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ei{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fs(!1),this.onMicrotaskEmpty=new Fs(!1),this.onStable=new Fs(!1),this.onError=new Fs(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function pA(){let s=Zt.requestAnimationFrame,o=Zt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function iv(s){const o=()=>{!function rv(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,qd(s),s.isCheckStableRunning=!0,Yp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),qd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,y,E)=>{try{return sv(s),a.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),KI(s)}},onInvoke:(a,l,d,p,y,E,C)=>{try{return sv(s),a.invoke(d,p,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),KI(s)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,qd(s),Yp(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ei.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(ei.isInAngularZone())throw new X(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,nv,Eu,Eu);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const nv={};function Yp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function qd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function KI(s){s._nesting--,Yp(s)}class YI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fs,this.onMicrotaskEmpty=new Fs,this.onStable=new Fs,this.onError=new Fs}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Cu=new Kt(""),ov=new Kt("");let av,gA=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,av||(function mA(s){av=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ei.assertNotInAngularZone(),tv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Rt(ei),Rt(QI),Rt(ov))},s.\u0275prov=lt({token:s,factory:s.\u0275fac}),s})(),QI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return av?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const _o=!1;let pa=null;const JI=new Kt("AllowMultipleToken"),uv=new Kt("PlatformDestroyListeners"),XI=new Kt("appBootstrapListener");class cv{constructor(o,a){this.name=o,this.token=a}}function lv(s,o,a=[]){const l=`Platform: ${o}`,d=new Kt(l);return(p=[])=>{let y=rC();if(!y||y.injector.get(JI,!1)){const E=[...a,...p,{provide:d,useValue:!0}];s?s(E):function _A(s){if(pa&&!pa.get(JI,!1))throw new X(400,!1);pa=s;const o=s.get(iC);(function tC(s){const o=s.get(J_,null);o&&o.forEach(a=>a())})(s)}(function dv(s=[],o){return bc.create({name:o,providers:[{provide:ra,useValue:"platform"},{provide:uv,useValue:new Set([()=>pa=null])},...s]})}(E,l))}return function nC(s){const o=rC();if(!o)throw new X(401,!1);return o}()}}function rC(){return pa?.get(iC)??null}let iC=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function CA(s,o){let a;return a="noop"===s?new YI:("zone.js"===s?void 0:s)||new ei(o),a}(l?.ngZone,function IA(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:ei,useValue:d}];return d.run(()=>{const y=bc.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(y),C=E.injector.get(Ed,null);if(!C)throw new X(402,!1);return d.runOutsideAngular(()=>{const b=d.onError.subscribe({next:A=>{C.handleError(A)}});E.onDestroy(()=>{Xp(this._modules,E),b.unsubscribe()})}),function Jp(s,o,a){try{const l=a();return Qf(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(C,d,()=>{const b=E.injector.get(Wp);return b.runInitializers(),b.donePromise.then(()=>(function ks(s){Ce(s,"Expected localeId to be defined"),"string"==typeof s&&(fu=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Zp,Bc)||Bc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=DA({},l);return function Qp(s,o,a){const l=new __(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(hv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new X(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(uv,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Rt(bc))},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function DA(s,o){return Array.isArray(o)?o.reduce(DA,s):{...s,...o}}let hv=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new O.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{ei.assertNotInAngularZone(),tv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{ei.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),b.unsubscribe()}});this.isStable=(0,ne.T)(p,y.pipe((0,ge.B)()))}bootstrap(a,l){const d=a instanceof Cw;if(!this._injector.get(Wp).done){!d&&pr(a);throw new X(405,_o)}let y;y=d?a:this._injector.get(Ic).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function eC(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Hc),b=y.create(bc.NULL,[],l||y.selector,E),A=b.location.nativeElement,N=b.injector.get(Cu,null);return N?.registerApplication(A),b.onDestroy(()=>{this.detachView(b.hostView),Xp(this.components,b),N?.unregisterApplication(A)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Xp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(XI,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Xp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new X(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Rt(ei),Rt(iu),Rt(Ed))},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Xp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function sC(){return!1}let wN=(()=>{class s{}return s.__NG_ELEMENT_ID__=TA,s})();function TA(s){return function EN(s,o,a){if(Aa(s)&&!a){const l=mr(s.index,o);return new xd(l,l)}return 47&s.type?new xd(o[rr],o):null}(bn(),se(),16==(16&s))}class AA{constructor(){}supports(o){return hs(o)}create(o){return new ON(o)}}const NN=(s,o)=>o;class ON{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||NN}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<xA(l,d,p)?a:l,E=xA(y,d,p),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const b=E-d,A=C-d;if(b!=A){for(let z=0;z<b;z++){const Z=z<p.length?p[z]:p[z]=0,ce=Z+z;A<=ce&&ce<b&&(p[z]=Z+1)}p[y.previousIndex]=A-b}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!hs(o))throw new X(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),l=!0),a=a._next}else d=0,function gT(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new kN(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new MA),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MA),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class kN{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FN{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class MA{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new FN,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xA(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class RA{constructor(){}supports(o){return o instanceof Map||mE(o)}create(){return new LN}}class LN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||mE(o)))throw new X(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const l=new VN(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class VN{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PA(){return new aC([new AA])}let aC=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||PA()),deps:[[s,new tt,new to]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new X(901,!1)}}return s.\u0275prov=lt({token:s,providedIn:"root",factory:PA}),s})();function NA(){return new uC([new RA])}let uC=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||NA()),deps:[[s,new tt,new to]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new X(901,!1)}}return s.\u0275prov=lt({token:s,providedIn:"root",factory:NA}),s})();const jN=lv(null,"core",[]);let HN=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Rt(hv))},s.\u0275mod=K({type:s}),s.\u0275inj=tn({}),s})();function zN(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(mt,Te,k)=>{k.d(Te,{Z:()=>qe});var h=k(2090),V=k(4859),O=k(6881),ne=k(1877);class ge{constructor(X,Me){this._delegate=X,this.firebase=Me,(0,O._addComponent)(X,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=X.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this._delegate.automaticDataCollectionEnabled=X}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(X=>{this._delegate.checkDestroyed(),X()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(X,Me=O._DEFAULT_ENTRY_NAME){var _e;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(X);return!Fe.isInitialized()&&"EXPLICIT"===(null===(_e=Fe.getComponent())||void 0===_e?void 0:_e.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:Me})}_removeServiceInstance(X,Me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(X).clearInstance(Me)}_addComponent(X){(0,O._addComponent)(this._delegate,X)}_addOrOverwriteComponent(X){(0,O._addOrOverwriteComponent)(this._delegate,X)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function Pe(){const Ke=function Ee(Ke){const X={},Me={__esModule:!0,initializeApp:function me(Ne,Y={}){const Ze=O.initializeApp(Ne,Y);if((0,h.r3)(X,Ze.name))return X[Ze.name];const _t=new Ke(Ze,Me);return X[Ze.name]=_t,_t},app:Fe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Ne){const Y=Ne.name,Ze=Y.replace("-compat","");if(O._registerComponent(Ne)&&"PUBLIC"===Ne.type){const _t=(Ge=Fe())=>{if("function"!=typeof Ge[Ze])throw Re.create("invalid-app-argument",{appName:Y});return Ge[Ze]()};void 0!==Ne.serviceProps&&(0,h.ZB)(_t,Ne.serviceProps),Me[Ze]=_t,Ke.prototype[Ze]=function(...Ge){return this._getService.bind(this,Y).apply(this,Ne.multipleInstances?Ge:[])}}return"PUBLIC"===Ne.type?Me[Ze]:null},removeApp:function _e(Ne){delete X[Ne]},useAsService:function Oe(Ne,Y){return"serverAuth"===Y?null:Y},modularAPIs:O}};function Fe(Ne){if(!(0,h.r3)(X,Ne=Ne||O._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:Ne});return X[Ne]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function le(){return Object.keys(X).map(Ne=>X[Ne])}}),Fe.App=Ke,Me}(ge);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function X(Me){(0,h.ZB)(Ke,Me)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ke}(),$=new ne.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=H;!function Ae(Ke){(0,O.registerVersion)("@firebase/app-compat","0.2.12",Ke)}()},6881:(mt,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>ai,_DEFAULT_ENTRY_NAME:()=>Vr,_addComponent:()=>at,_addOrOverwriteComponent:()=>bt,_apps:()=>Zt,_clearComponents:()=>Ur,_components:()=>zt,_getProvider:()=>tr,_registerComponent:()=>Cn,_removeServiceInstance:()=>Dn,deleteApp:()=>$n,getApp:()=>ms,getApps:()=>Rt,initializeApp:()=>Lt,onLog:()=>jn,registerVersion:()=>Cr,setLogLevel:()=>Zr});var h=k(5861),V=k(4859),O=k(1877),ne=k(2090);const ge=(ie,K)=>K.some(De=>ie instanceof De);let ae,Re;const H=new WeakMap,$=new WeakMap,q=new WeakMap,ke=new WeakMap,Ae=new WeakMap;let X={get(ie,K,De){if(ie instanceof IDBTransaction){if("done"===K)return $.get(ie);if("objectStoreNames"===K)return ie.objectStoreNames||q.get(ie);if("store"===K)return De.objectStoreNames[1]?void 0:De.objectStore(De.objectStoreNames[0])}return me(ie[K])},set:(ie,K,De)=>(ie[K]=De,!0),has:(ie,K)=>ie instanceof IDBTransaction&&("done"===K||"store"===K)||K in ie};function Fe(ie){return"function"==typeof ie?function _e(ie){return ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return Re||(Re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ie)?function(...K){return ie.apply(le(this),K),me(H.get(this))}:function(...K){return me(ie.apply(le(this),K))}:function(K,...De){const it=ie.call(le(this),K,...De);return q.set(it,K.sort?K.sort():[K]),me(it)}}(ie):(ie instanceof IDBTransaction&&function Ke(ie){if($.has(ie))return;const K=new Promise((De,it)=>{const Et=()=>{ie.removeEventListener("complete",Vt),ie.removeEventListener("error",ut),ie.removeEventListener("abort",ut)},Vt=()=>{De(),Et()},ut=()=>{it(ie.error||new DOMException("AbortError","AbortError")),Et()};ie.addEventListener("complete",Vt),ie.addEventListener("error",ut),ie.addEventListener("abort",ut)});$.set(ie,K)}(ie),ge(ie,function Ee(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ie,X):ie)}function me(ie){if(ie instanceof IDBRequest)return function qe(ie){const K=new Promise((De,it)=>{const Et=()=>{ie.removeEventListener("success",Vt),ie.removeEventListener("error",ut)},Vt=()=>{De(me(ie.result)),Et()},ut=()=>{it(ie.error),Et()};ie.addEventListener("success",Vt),ie.addEventListener("error",ut)});return K.then(De=>{De instanceof IDBCursor&&H.set(De,ie)}).catch(()=>{}),Ae.set(K,ie),K}(ie);if(ke.has(ie))return ke.get(ie);const K=Fe(ie);return K!==ie&&(ke.set(ie,K),Ae.set(K,ie)),K}const le=ie=>Ae.get(ie),Ne=["get","getKey","getAll","getAllKeys","count"],Y=["put","add","delete","clear"],Ze=new Map;function _t(ie,K){if(!(ie instanceof IDBDatabase)||K in ie||"string"!=typeof K)return;if(Ze.get(K))return Ze.get(K);const De=K.replace(/FromIndex$/,""),it=K!==De,Et=Y.includes(De);if(!(De in(it?IDBIndex:IDBObjectStore).prototype)||!Et&&!Ne.includes(De))return;const Vt=function(){var ut=(0,h.Z)(function*(Jt,...Gt){const pr=this.transaction(Jt,Et?"readwrite":"readonly");let qn=pr.store;return it&&(qn=qn.index(Gt.shift())),(yield Promise.all([qn[De](...Gt),Et&&pr.done]))[0]});return function(Gt){return ut.apply(this,arguments)}}();return Ze.set(K,Vt),Vt}!function Me(ie){X=ie(X)}(ie=>({...ie,get:(K,De,it)=>_t(K,De)||ie.get(K,De,it),has:(K,De)=>!!_t(K,De)||ie.has(K,De)}));class Ge{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(De=>{if(function $t(ie){return"VERSION"===ie.getComponent()?.type}(De)){const it=De.getImmediate();return`${it.library}/${it.version}`}return null}).filter(De=>De).join(" ")}}const nt="@firebase/app",re=new O.Yd("@firebase/app"),Vr="[DEFAULT]",Ir={[nt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zt=new Map,zt=new Map;function at(ie,K){try{ie.container.addComponent(K)}catch(De){re.debug(`Component ${K.name} failed to register with FirebaseApp ${ie.name}`,De)}}function bt(ie,K){ie.container.addOrOverwriteComponent(K)}function Cn(ie){const K=ie.name;if(zt.has(K))return re.debug(`There were multiple attempts to register component ${K}.`),!1;zt.set(K,ie);for(const De of Zt.values())at(De,ie);return!0}function tr(ie,K){const De=ie.container.getProvider("heartbeat").getImmediate({optional:!0});return De&&De.triggerHeartbeat(),ie.container.getProvider(K)}function Dn(ie,K,De=Vr){tr(ie,K).clearInstance(De)}function Ur(){zt.clear()}const nr=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ft{constructor(K,De,it){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},De),this._name=De.name,this._automaticDataCollectionEnabled=De.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}const ai="9.22.2";function Lt(ie,K={}){let De=ie;"object"!=typeof K&&(K={name:K});const it=Object.assign({name:Vr,automaticDataCollectionEnabled:!1},K),Et=it.name;if("string"!=typeof Et||!Et)throw nr.create("bad-app-name",{appName:String(Et)});if(De||(De=(0,ne.aH)()),!De)throw nr.create("no-options");const Vt=Zt.get(Et);if(Vt){if((0,ne.vZ)(De,Vt.options)&&(0,ne.vZ)(it,Vt.config))return Vt;throw nr.create("duplicate-app",{appName:Et})}const ut=new V.H0(Et);for(const Gt of zt.values())ut.addComponent(Gt);const Jt=new Ft(De,it,ut);return Zt.set(Et,Jt),Jt}function ms(ie=Vr){const K=Zt.get(ie);if(!K&&ie===Vr&&(0,ne.aH)())return Lt();if(!K)throw nr.create("no-app",{appName:ie});return K}function Rt(){return Array.from(Zt.values())}function $n(ie){return On.apply(this,arguments)}function On(){return(On=(0,h.Z)(function*(ie){const K=ie.name;Zt.has(K)&&(Zt.delete(K),yield Promise.all(ie.container.getProviders().map(De=>De.delete())),ie.isDeleted=!0)})).apply(this,arguments)}function Cr(ie,K,De){var it;let Et=null!==(it=Ir[ie])&&void 0!==it?it:ie;De&&(Et+=`-${De}`);const Vt=Et.match(/\s|\//),ut=K.match(/\s|\//);if(Vt||ut){const Jt=[`Unable to register library "${Et}" with version "${K}":`];return Vt&&Jt.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),Vt&&ut&&Jt.push("and"),ut&&Jt.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void re.warn(Jt.join(" "))}Cn(new V.wA(`${Et}-version`,()=>({library:Et,version:K}),"VERSION"))}function jn(ie,K){if(null!==ie&&"function"!=typeof ie)throw nr.create("invalid-log-argument");(0,O.Am)(ie,K)}function Zr(ie){(0,O.Ub)(ie)}const ui="firebase-heartbeat-database",Kr=1,U="firebase-heartbeat-store";let F=null;function R(){return F||(F=function ve(ie,K,{blocked:De,upgrade:it,blocking:Et,terminated:Vt}={}){const ut=indexedDB.open(ie,K),Jt=me(ut);return it&&ut.addEventListener("upgradeneeded",Gt=>{it(me(ut.result),Gt.oldVersion,Gt.newVersion,me(ut.transaction),Gt)}),De&&ut.addEventListener("blocked",Gt=>De(Gt.oldVersion,Gt.newVersion,Gt)),Jt.then(Gt=>{Vt&&Gt.addEventListener("close",()=>Vt()),Et&&Gt.addEventListener("versionchange",pr=>Et(pr.oldVersion,pr.newVersion,pr))}).catch(()=>{}),Jt}(ui,Kr,{upgrade:(ie,K)=>{0===K&&ie.createObjectStore(U)}}).catch(ie=>{throw nr.create("idb-open",{originalErrorMessage:ie.message})})),F}function M(){return(M=(0,h.Z)(function*(ie){try{return yield(yield R()).transaction(U).objectStore(U).get(We(ie))}catch(K){if(K instanceof ne.ZR)re.warn(K.message);else{const De=nr.create("idb-get",{originalErrorMessage:K?.message});re.warn(De.message)}}})).apply(this,arguments)}function j(ie,K){return ue.apply(this,arguments)}function ue(){return(ue=(0,h.Z)(function*(ie,K){try{const it=(yield R()).transaction(U,"readwrite");yield it.objectStore(U).put(K,We(ie)),yield it.done}catch(De){if(De instanceof ne.ZR)re.warn(De.message);else{const it=nr.create("idb-set",{originalErrorMessage:De?.message});re.warn(it.message)}}})).apply(this,arguments)}function We(ie){return`${ie.name}!${ie.options.appId}`}class Pt{constructor(K){this.container=K,this._heartbeatsCache=null;const De=this.container.getProvider("app").getImmediate();this._storage=new At(De),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var K=this;return(0,h.Z)(function*(){const it=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=wt();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==Et&&!K._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Et))return K._heartbeatsCache.heartbeats.push({date:Et,agent:it}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(Vt=>{const ut=new Date(Vt.date).valueOf();return Date.now()-ut<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,h.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const De=wt(),{heartbeatsToSend:it,unsentEntries:Et}=function hn(ie,K=1024){const De=[];let it=ie.slice();for(const Et of ie){const Vt=De.find(ut=>ut.agent===Et.agent);if(Vt){if(Vt.dates.push(Et.date),fr(De)>K){Vt.dates.pop();break}}else if(De.push({agent:Et.agent,dates:[Et.date]}),fr(De)>K){De.pop();break}it=it.slice(1)}return{heartbeatsToSend:De,unsentEntries:it}}(K._heartbeatsCache.heartbeats),Vt=(0,ne.L)(JSON.stringify({version:2,heartbeats:it}));return K._heartbeatsCache.lastSentHeartbeatDate=De,Et.length>0?(K._heartbeatsCache.heartbeats=Et,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),Vt})()}}function wt(){return(new Date).toISOString().substring(0,10)}class At{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,h.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function P(ie){return M.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var De=this;return(0,h.Z)(function*(){var it;if(yield De._canUseIndexedDBPromise){const Vt=yield De.read();return j(De.app,{lastSentHeartbeatDate:null!==(it=K.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var De=this;return(0,h.Z)(function*(){var it;if(yield De._canUseIndexedDBPromise){const Vt=yield De.read();return j(De.app,{lastSentHeartbeatDate:null!==(it=K.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...K.heartbeats]})}})()}}function fr(ie){return(0,ne.L)(JSON.stringify({version:2,heartbeats:ie})).length}!function js(ie){Cn(new V.wA("platform-logger",K=>new Ge(K),"PRIVATE")),Cn(new V.wA("heartbeat",K=>new Pt(K),"PRIVATE")),Cr(nt,"0.9.12",ie),Cr(nt,"0.9.12","esm2017"),Cr("fire-js","")}("")},4859:(mt,Te,k)=>{k.d(Te,{H0:()=>Ee,wA:()=>O});var h=k(5861),V=k(2090);class O{constructor(H,$,q){this.name=H,this.instanceFactory=$,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ne="[DEFAULT]";class ge{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const q=new V.BH;if(this.instancesDeferred.set($,q),this.isInitialized($)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:$});ke&&q.resolve(ke)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const q=this.normalizeInstanceIdentifier(H?.identifier),ke=null!==($=H?.optional)&&void 0!==$&&$;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Ae){if(ke)return null;throw Ae}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function Re(Pe){return"EAGER"===Pe.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[$,q]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:ke});q.resolve(Ae)}catch{}}}}clearInstance(H=ne){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,h.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...$.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ne){return this.instances.has(H)}getOptions(H=ne){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,q=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:q,options:$});for(const[Ae,qe]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Ae)&&qe.resolve(ke);return ke}onInit(H,$){var q;const ke=this.normalizeInstanceIdentifier($),Ae=null!==(q=this.onInitCallbacks.get(ke))&&void 0!==q?q:new Set;Ae.add(H),this.onInitCallbacks.set(ke,Ae);const qe=this.instances.get(ke);return qe&&H(qe,ke),()=>{Ae.delete(H)}}invokeOnInitCallbacks(H,$){const q=this.onInitCallbacks.get($);if(q)for(const ke of q)try{ke(H,$)}catch{}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let q=this.instances.get(H);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=H,Pe===ne?void 0:Pe),options:$}),this.instances.set(H,q),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(q,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,q)}catch{}var Pe;return q||null}normalizeInstanceIdentifier(H=ne){return this.component?this.component.multipleInstances?H:ne:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new ge(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Te,k)=>{k.d(Te,{Am:()=>Pe,Ub:()=>Ee,Yd:()=>Re,in:()=>V});const h=[];var V=(()=>{return(H=V||(V={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",V;var H})();const O={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ae=(H,$,...q)=>{if($<H.logLevel)return;const ke=(new Date).toISOString(),Ae=ge[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${ke}]  ${H.name}:`,...q)};class Re{constructor($){this.name=$,this._logLevel=ne,this._logHandler=ae,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in V))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...$),this._logHandler(this,V.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...$),this._logHandler(this,V.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,V.INFO,...$),this._logHandler(this,V.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,V.WARN,...$),this._logHandler(this,V.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...$),this._logHandler(this,V.ERROR,...$)}}function Ee(H){h.forEach($=>{$.setLogLevel(H)})}function Pe(H,$){for(const q of h){let ke=null;$&&$.level&&(ke=O[$.level]),q.userLogHandler=null===H?null:(Ae,qe,...Ke)=>{const X=Ke.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");qe>=(ke??Ae.logLevel)&&H({level:V[qe].toLowerCase(),message:X,args:Ke,type:Ae.name})}}}},9260:(mt,Te,k)=>{k.d(Te,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.22.2","app-compat")},9568:(mt,Te,k)=>{k.r(Te);var h=k(5861),V=k(3942),O=k(1389),ne=k(2090),Re=(k(6881),k(1877),k(4859));function Ee(){return window}const Pe=2e3;function $(){return $=(0,h.Z)(function*(R,P,M){var j;const{BuildInfo:ue}=Ee();(0,O.as)(P.sessionId,"AuthEvent did not contain a session ID");const We=yield function Me(R){return _e.apply(this,arguments)}(P.sessionId),vt={};return(0,O.at)()?vt.ibi=ue.packageName:(0,O.au)()?vt.apn=ue.packageName:(0,O.av)(R,"operation-not-supported-in-this-environment"),ue.displayName&&(vt.appDisplayName=ue.displayName),vt.sessionId=We,(0,O.aw)(R,M,P.type,void 0,null!==(j=P.eventId)&&void 0!==j?j:void 0,vt)}),$.apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(R){const{BuildInfo:P}=Ee(),M={};(0,O.at)()?M.iosBundleId=P.packageName:(0,O.au)()?M.androidPackageName=P.packageName:(0,O.av)(R,"operation-not-supported-in-this-environment"),yield(0,O.ax)(R,M)})).apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(R,P,M){const{cordova:j}=Ee();let ue=()=>{};try{yield new Promise((We,vt)=>{let pt=null;function Pt(){var At;We();const fr=null===(At=j.plugins.browsertab)||void 0===At?void 0:At.close;"function"==typeof fr&&fr(),"function"==typeof M?.close&&M.close()}function wt(){pt||(pt=window.setTimeout(()=>{vt((0,O.az)(R,"redirect-cancelled-by-user"))},Pe))}function hn(){"visible"===document?.visibilityState&&wt()}P.addPassiveListener(Pt),document.addEventListener("resume",wt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",hn,!1),ue=()=>{P.removePassiveListener(Pt),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",hn,!1),pt&&window.clearTimeout(pt)}})}finally{ue()}})).apply(this,arguments)}function _e(){return(_e=(0,h.Z)(function*(R){const P=function Fe(R){if((0,O.as)(/[0-9a-zA-Z]+/.test(R),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(R);const P=new ArrayBuffer(R.length),M=new Uint8Array(P);for(let j=0;j<R.length;j++)M[j]=R.charCodeAt(j);return M}(R),M=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(M)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const me=20;class le extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(P)),super.onEvent(P)}initialized(){var P=this;return(0,h.Z)(function*(){yield P.initPromise})()}}function Ne(R){return Y.apply(this,arguments)}function Y(){return(Y=(0,h.Z)(function*(R){const P=yield Ge()._get($t(R));return P&&(yield Ge()._remove($t(R))),P})).apply(this,arguments)}function _t(){const R=[],P="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<me;M++){const j=Math.floor(Math.random()*P.length);R.push(P.charAt(j))}return R.join("")}function Ge(){return(0,O.aC)(O.b)}function $t(R){return(0,O.aD)("authEvent",R.config.apiKey,R.name)}function re(R){if(!R?.includes("?"))return{};const[P,...M]=R.split("?");return(0,ne.zd)(M.join("?"))}const ye=class de{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(P){var M=this;return(0,h.Z)(function*(){const j=P._key();let ue=M.eventManagers.get(j);return ue||(ue=new le(P),M.eventManagers.set(j,ue),M.attachCallbackListeners(P,ue)),ue})()}_openPopup(P){(0,O.av)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,M,j,ue){var We=this;return(0,h.Z)(function*(){!function X(R){var P,M,j,ue,We,vt,pt,Pt,wt,hn;const At=Ee();(0,O.aA)("function"==typeof(null===(P=At?.universalLinks)||void 0===P?void 0:P.subscribe),R,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(M=At?.BuildInfo)||void 0===M?void 0:M.packageName)<"u",R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(We=null===(ue=null===(j=At?.cordova)||void 0===j?void 0:j.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===We?void 0:We.openUrl),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Pt=null===(pt=null===(vt=At?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===pt?void 0:pt.browsertab)||void 0===Pt?void 0:Pt.isAvailable),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(hn=null===(wt=At?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===hn?void 0:hn.open),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const vt=yield We._initialize(P);yield vt.initialized(),vt.resetRedirect(),(0,O.aG)(),yield We._originValidation(P);const pt=function ve(R,P,M=null){return{type:P,eventId:M,urlResponse:null,sessionId:_t(),postBody:null,tenantId:R.tenantId,error:(0,O.az)(R,"no-auth-event")}}(P,j,ue);yield function Oe(R,P){return Ge()._set($t(R),P)}(P,pt);const Pt=yield function H(R,P,M){return $.apply(this,arguments)}(P,pt,M),wt=yield function Ae(R){const{cordova:P}=Ee();return new Promise(M=>{P.plugins.browsertab.isAvailable(j=>{let ue=null;j?P.plugins.browsertab.openUrl(R):ue=P.InAppBrowser.open(R,(0,O.ay)()?"_blank":"_system","location=yes"),M(ue)})})}(Pt);return function qe(R,P,M){return Ke.apply(this,arguments)}(P,vt,wt)})()}_isIframeWebStorageSupported(P,M){throw new Error("Method not implemented.")}_originValidation(P){const M=P._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function q(R){return ke.apply(this,arguments)}(P)),this.originValidationPromises[M]}attachCallbackListeners(P,M){const{universalLinks:j,handleOpenURL:ue,BuildInfo:We}=Ee(),vt=setTimeout((0,h.Z)(function*(){yield Ne(P),M.onEvent(Le())}),500),pt=function(){var hn=(0,h.Z)(function*(At){clearTimeout(vt);const fr=yield Ne(P);let js=null;fr&&At?.url&&(js=function Ze(R,P){var M,j;const ue=function Bs(R){const P=re(R),M=P.link?decodeURIComponent(P.link):void 0,j=re(M).link,ue=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return re(ue).link||ue||j||M||R}(P);if(ue.includes("/__/auth/callback")){const We=re(ue),vt=We.firebaseError?function nt(R){try{return JSON.parse(R)}catch{return null}}(decodeURIComponent(We.firebaseError)):null,pt=null===(j=null===(M=vt?.code)||void 0===M?void 0:M.split("auth/"))||void 0===j?void 0:j[1],Pt=pt?(0,O.az)(pt):null;return Pt?{type:R.type,eventId:R.eventId,tenantId:R.tenantId,error:Pt,urlResponse:null,sessionId:null,postBody:null}:{type:R.type,eventId:R.eventId,tenantId:R.tenantId,sessionId:R.sessionId,urlResponse:ue,postBody:null}}return null}(fr,At.url)),M.onEvent(js||Le())});return function(fr){return hn.apply(this,arguments)}}();typeof j<"u"&&"function"==typeof j.subscribe&&j.subscribe(null,pt);const Pt=ue,wt=`${We.packageName.toLowerCase()}://`;Ee().handleOpenURL=function(){var hn=(0,h.Z)(function*(At){if(At.toLowerCase().startsWith(wt)&&pt({url:At}),"function"==typeof Pt)try{Pt(At)}catch(fr){console.error(fr)}});return function(At){return hn.apply(this,arguments)}}()}};function Le(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}const un=1e3;function ct(){var R;return(null===(R=self?.location)||void 0===R?void 0:R.protocol)||null}function Wt(R=(0,ne.z$)()){return!("file:"!==ct()&&"ionic:"!==ct()&&"capacitor:"!==ct()||!R.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){try{const R=self.localStorage,P=O.aL();if(R)return R.setItem(P,"1"),R.removeItem(P),!function Nn(R=(0,ne.z$)()){return function dn(){return(0,ne.w1)()&&11===document?.documentMode}()||function Lr(R=(0,ne.z$)()){return/Edge\/\d+/.test(R)}(R)}()||(0,ne.hl)()}catch{return Wn()&&(0,ne.hl)()}return!1}function Wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function oi(){return(function lt(){return"http:"===ct()||"https:"===ct()}()||(0,ne.ru)()||Wt())&&!function tn(){return(0,ne.b$)()||(0,ne.UG)()}()&&Er()&&!Wn()}function Ci(){return Wt()&&typeof document<"u"}function wn(){return(wn=(0,h.Z)(function*(){return!!Ci()&&new Promise(R=>{const P=setTimeout(()=>{R(!1)},un);document.addEventListener("deviceready",()=>{clearTimeout(P),R(!0)})})})).apply(this,arguments)}const En={LOCAL:"local",NONE:"none",SESSION:"session"},Bi=O.aA,In="persistence";function Ir(R){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(R){yield R._initializationPromise;const P=at(),M=O.aD(In,R.config.apiKey,R.name);P&&P.setItem(M,R._getPersistence())})).apply(this,arguments)}function at(){var R;try{return(null===(R=function rt(){return typeof window<"u"?window:null}())||void 0===R?void 0:R.sessionStorage)||null}catch{return null}}const bt=O.aA;class Cn{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(ye),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(P){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,M,j,ue){var We=this;return(0,h.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openPopup(P,M,j,ue)})()}_openRedirect(P,M,j,ue){var We=this;return(0,h.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openRedirect(P,M,j,ue)})()}_isIframeWebStorageSupported(P,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,M)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return Ci()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,h.Z)(function*(){if(P.underlyingResolver)return;const M=yield function $s(){return wn.apply(this,arguments)}();P.underlyingResolver=M?P.cordovaResolver:P.browserResolver})()}}function tr(R){return R.unwrap()}function Ur(R){return nr(R)}function nr(R){const{_tokenResponse:P}=R instanceof ne.ZR?R.customData:R;if(!P)return null;if(!(R instanceof ne.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return O.P.credentialFromResult(R);const M=P.providerId;if(!M||M===O.p.PASSWORD)return null;let j;switch(M){case O.p.GOOGLE:j=O.V;break;case O.p.FACEBOOK:j=O.U;break;case O.p.GITHUB:j=O.W;break;case O.p.TWITTER:j=O.Z;break;default:const{oauthIdToken:ue,oauthAccessToken:We,oauthTokenSecret:vt,pendingToken:pt,nonce:Pt}=P;return We||vt||ue||pt?pt?M.startsWith("saml.")?O.aO._create(M,pt):O.L._fromParams({providerId:M,signInMethod:M,pendingToken:pt,idToken:ue,accessToken:We}):new O.X(M).credential({idToken:ue,accessToken:We,rawNonce:Pt}):null}return R instanceof ne.ZR?j.credentialFromError(R):j.credentialFromResult(R)}function Ft(R,P){return P.catch(M=>{throw M instanceof ne.ZR&&function hr(R,P){var M;const j=null===(M=P.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===P?.code)P.resolver=new ms(R,O.aq(R,P));else if(j){const ue=nr(P),We=P;ue&&(We.credential=ue,We.tenantId=j.tenantId||void 0,We.email=j.email||void 0,We.phoneNumber=j.phoneNumber||void 0)}}(R,M),M}).then(M=>{const ue=M.user;return{operationType:M.operationType,credential:Ur(M),additionalUserInfo:O.ao(M),user:Rt.getOrCreate(ue)}})}function ai(R,P){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,h.Z)(function*(R,P){const M=yield P;return{verificationId:M.verificationId,confirm:j=>Ft(R,M.confirm(j))}})).apply(this,arguments)}class ms{constructor(P,M){this.resolver=M,this.auth=function Dn(R){return R.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return Ft(tr(this.auth),this.resolver.resolveSignIn(P))}}class Rt{constructor(P){this._delegate=P,this.multiFactor=O.ar(P)}static getOrCreate(P){return Rt.USER_MAP.has(P)||Rt.USER_MAP.set(P,new Rt(P)),Rt.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var M=this;return(0,h.Z)(function*(){return Ft(M.auth,O.a0(M._delegate,P))})()}linkWithPhoneNumber(P,M){var j=this;return(0,h.Z)(function*(){return ai(j.auth,O.l(j._delegate,P,M))})()}linkWithPopup(P){var M=this;return(0,h.Z)(function*(){return Ft(M.auth,O.d(M._delegate,P,Cn))})()}linkWithRedirect(P){var M=this;return(0,h.Z)(function*(){return yield Ir(O.aH(M.auth)),O.g(M._delegate,P,Cn)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var M=this;return(0,h.Z)(function*(){return Ft(M.auth,O.a1(M._delegate,P))})()}reauthenticateWithPhoneNumber(P,M){return ai(this.auth,O.r(this._delegate,P,M))}reauthenticateWithPopup(P){return Ft(this.auth,O.e(this._delegate,P,Cn))}reauthenticateWithRedirect(P){var M=this;return(0,h.Z)(function*(){return yield Ir(O.aH(M.auth)),O.h(M._delegate,P,Cn)})()}sendEmailVerification(P){return O.ae(this._delegate,P)}unlink(P){var M=this;return(0,h.Z)(function*(){return yield O.an(M._delegate,P),M})()}updateEmail(P){return O.aj(this._delegate,P)}updatePassword(P){return O.ak(this._delegate,P)}updatePhoneNumber(P){return O.u(this._delegate,P)}updateProfile(P){return O.ai(this._delegate,P)}verifyBeforeUpdateEmail(P,M){return O.af(this._delegate,P,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Rt.USER_MAP=new WeakMap;const $n=O.aA;let On=(()=>{class R{constructor(M,j){if(this.app=M,j.isInitialized())return this._delegate=j.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=M.options;$n(ue,"invalid-api-key",{appName:M.name}),$n(ue,"invalid-api-key",{appName:M.name});const We=typeof window<"u"?Cn:void 0;this._delegate=j.initialize({options:{persistence:jn(ue,M.name),popupRedirectResolver:We}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Rt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,j){O.I(this._delegate,M,j)}applyActionCode(M){return O.a5(this._delegate,M)}checkActionCode(M){return O.a6(this._delegate,M)}confirmPasswordReset(M,j){return O.a4(this._delegate,M,j)}createUserWithEmailAndPassword(M,j){var ue=this;return(0,h.Z)(function*(){return Ft(ue._delegate,O.a8(ue._delegate,M,j))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return O.ad(this._delegate,M)}isSignInWithEmailLink(M){return O.ab(this._delegate,M)}getRedirectResult(){var M=this;return(0,h.Z)(function*(){$n(oi(),M._delegate,"operation-not-supported-in-this-environment");const j=yield O.j(M._delegate,Cn);return j?Ft(M._delegate,Promise.resolve(j)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function Ce(R,P){(0,O.aH)(R)._logFramework(P)}(this._delegate,M)}onAuthStateChanged(M,j,ue){const{next:We,error:vt,complete:pt}=Cr(M,j,ue);return this._delegate.onAuthStateChanged(We,vt,pt)}onIdTokenChanged(M,j,ue){const{next:We,error:vt,complete:pt}=Cr(M,j,ue);return this._delegate.onIdTokenChanged(We,vt,pt)}sendSignInLinkToEmail(M,j){return O.aa(this._delegate,M,j)}sendPasswordResetEmail(M,j){return O.a3(this._delegate,M,j||void 0)}setPersistence(M){var j=this;return(0,h.Z)(function*(){let ue;switch(function Vr(R,P){Bi(Object.values(En).includes(P),R,"invalid-persistence-type"),(0,ne.b$)()?Bi(P!==En.SESSION,R,"unsupported-persistence-type"):(0,ne.UG)()?Bi(P===En.NONE,R,"unsupported-persistence-type"):Wn()?Bi(P===En.NONE||P===En.LOCAL&&(0,ne.hl)(),R,"unsupported-persistence-type"):Bi(P===En.NONE||Er(),R,"unsupported-persistence-type")}(j._delegate,M),M){case En.SESSION:ue=O.a;break;case En.LOCAL:ue=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case En.NONE:ue=O.N;break;default:return O.av("argument-error",{appName:j._delegate.name})}return j._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return Ft(this._delegate,O._(this._delegate))}signInWithCredential(M){return Ft(this._delegate,O.$(this._delegate,M))}signInWithCustomToken(M){return Ft(this._delegate,O.a2(this._delegate,M))}signInWithEmailAndPassword(M,j){return Ft(this._delegate,O.a9(this._delegate,M,j))}signInWithEmailLink(M,j){return Ft(this._delegate,O.ac(this._delegate,M,j))}signInWithPhoneNumber(M,j){return ai(this._delegate,O.s(this._delegate,M,j))}signInWithPopup(M){var j=this;return(0,h.Z)(function*(){return $n(oi(),j._delegate,"operation-not-supported-in-this-environment"),Ft(j._delegate,O.c(j._delegate,M,Cn))})()}signInWithRedirect(M){var j=this;return(0,h.Z)(function*(){return $n(oi(),j._delegate,"operation-not-supported-in-this-environment"),yield Ir(j._delegate),O.f(j._delegate,M,Cn)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return O.a7(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return R.Persistence=En,R})();function Cr(R,P,M){let j=R;"function"!=typeof R&&({next:j,error:P,complete:M}=R);const ue=j;return{next:vt=>ue(vt&&Rt.getOrCreate(vt)),error:P,complete:M}}function jn(R,P){const M=function zt(R,P){const M=at();if(!M)return[];const j=O.aD(In,R,P);switch(M.getItem(j)){case En.NONE:return[O.N];case En.LOCAL:return[O.i,O.a];case En.SESSION:return[O.a];default:return[]}}(R,P);if(typeof self<"u"&&!M.includes(O.i)&&M.push(O.i),typeof window<"u")for(const j of[O.b,O.a])M.includes(j)||M.push(j);return M.includes(O.N)||M.push(O.N),M}class Zr{constructor(){this.providerId="phone",this._delegate=new O.P(tr(V.Z.auth()))}static credential(P,M){return O.P.credential(P,M)}verifyPhoneNumber(P,M){return this._delegate.verifyPhoneNumber(P,M)}unwrap(){return this._delegate}}Zr.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Zr.PROVIDER_ID=O.P.PROVIDER_ID;const ui=O.aA;class Kr{constructor(P,M,j=V.Z.app()){var ue;ui(null===(ue=j.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:j.name}),this._delegate=new O.R(P,M,j.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(R){R.INTERNAL.registerComponent(new Re.wA("auth-compat",P=>{const M=P.getProvider("app-compat").getImmediate(),j=P.getProvider("auth");return new On(M,j)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Zr,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Kr,TwitterAuthProvider:O.Z,Auth:On,AuthCredential:O.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),R.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},5861:(mt,Te,k)=>{function h(O,ne,ge,ae,Re,Ee,Pe){try{var H=O[Ee](Pe),$=H.value}catch(q){return void ge(q)}H.done?ne($):Promise.resolve($).then(ae,Re)}function V(O){return function(){var ne=this,ge=arguments;return new Promise(function(ae,Re){var Ee=O.apply(ne,ge);function Pe($){h(Ee,ae,Re,Pe,H,"next",$)}function H($){h(Ee,ae,Re,Pe,H,"throw",$)}Pe(void 0)})}}k.d(Te,{Z:()=>V})},7582:(mt,Te,k)=>{function ne(re,oe){var de={};for(var ye in re)Object.prototype.hasOwnProperty.call(re,ye)&&oe.indexOf(ye)<0&&(de[ye]=re[ye]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(ye=Object.getOwnPropertySymbols(re);Le<ye.length;Le++)oe.indexOf(ye[Le])<0&&Object.prototype.propertyIsEnumerable.call(re,ye[Le])&&(de[ye[Le]]=re[ye[Le]])}return de}function q(re,oe,de,ye){return new(de||(de=Promise))(function(Ce,we){function Xe(lt){try{ct(ye.next(lt))}catch(Wt){we(Wt)}}function un(lt){try{ct(ye.throw(lt))}catch(Wt){we(Wt)}}function ct(lt){lt.done?Ce(lt.value):function Le(Ce){return Ce instanceof de?Ce:new de(function(we){we(Ce)})}(lt.value).then(Xe,un)}ct((ye=ye.apply(re,oe||[])).next())})}function me(re){return this instanceof me?(this.v=re,this):new me(re)}function le(re,oe,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,ye=de.apply(re,oe||[]),Ce=[];return Le={},we("next"),we("throw"),we("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function we(tn){ye[tn]&&(Le[tn]=function(dn){return new Promise(function(Lr,Nn){Ce.push([tn,dn,Lr,Nn])>1||Xe(tn,dn)})})}function Xe(tn,dn){try{!function un(tn){tn.value instanceof me?Promise.resolve(tn.value.v).then(ct,lt):Wt(Ce[0][2],tn)}(ye[tn](dn))}catch(Lr){Wt(Ce[0][3],Lr)}}function ct(tn){Xe("next",tn)}function lt(tn){Xe("throw",tn)}function Wt(tn,dn){tn(dn),Ce.shift(),Ce.length&&Xe(Ce[0][0],Ce[0][1])}}function Oe(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,oe=re[Symbol.asyncIterator];return oe?oe.call(re):(re=function Ke(re){var oe="function"==typeof Symbol&&Symbol.iterator,de=oe&&re[oe],ye=0;if(de)return de.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&ye>=re.length&&(re=void 0),{value:re&&re[ye++],done:!re}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),de={},ye("next"),ye("throw"),ye("return"),de[Symbol.asyncIterator]=function(){return this},de);function ye(Ce){de[Ce]=re[Ce]&&function(we){return new Promise(function(Xe,un){!function Le(Ce,we,Xe,un){Promise.resolve(un).then(function(ct){Ce({value:ct,done:Xe})},we)}(Xe,un,(we=re[Ce](we)).done,we.value)})}}}k.d(Te,{FC:()=>le,KL:()=>Oe,_T:()=>ne,mG:()=>q,qq:()=>me})}},mt=>{mt(mt.s=7454)}]);